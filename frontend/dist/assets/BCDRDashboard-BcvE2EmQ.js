import{b as m,j as e,bT as R,L as a,B as C,a8 as c,v as u,y as l,a7 as n,X as h,aa as T,S as D,aM as F}from"./vendor-CWk44mA8.js";import{d as p}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const j={processes:{total:0,tier_1_count:0,tier_2_count:0,tier_3_count:0,tier_4_count:0,overdue_review_count:0},plans:{total:0,published_count:0,draft_count:0,overdue_review_count:0},tests:{total:0,completed_count:0,passed_count:0,failed_count:0,upcoming_count:0,openFindingsCount:0},runbooks:{total:0,published_count:0,needs_review_count:0},upcomingTests:[],overdueItems:{totalOverdue:0,plans:[],processes:[],findings:[]}},f={readinessScore:0,metrics:{rtoCoverage:0,planCoverage:0,testSuccessRate:0,overdueItems:0}};function A(){const{data:d,isLoading:b,error:i,refetch:N}=m({queryKey:["bcdr-dashboard"],queryFn:async()=>(await p.get("/api/bcdr/dashboard")).data,staleTime:3e4,retry:1}),{data:o,isLoading:g,error:x,refetch:v}=m({queryKey:["bcdr-metrics"],queryFn:async()=>(await p.get("/api/bcdr/dashboard/metrics")).data,staleTime:3e4,retry:1}),w=b||g,y=i||x,s=d?{...j,...d}:j,r=o?{...f,...o}:f;if(w)return e.jsxs("div",{className:"p-6 space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-surface-700 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsx("div",{className:"card p-6 h-32"},t))})]});if(y)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-surface-100 mb-2",children:"Failed to load BC/DR Dashboard"}),e.jsx("p",{className:"text-surface-400 mb-4",children:(i||x)?.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>{N(),v()},className:"btn btn-primary",children:"Try Again"})]})});const _=(r.readinessScore??0)>=80?"text-green-400":(r.readinessScore??0)>=60?"text-yellow-400":"text-red-400";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"BC/DR Dashboard"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Business Continuity & Disaster Recovery Overview"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(a,{to:"/bcdr/processes/new",className:"btn btn-primary",children:"Add Process"}),e.jsx(a,{to:"/bcdr/plans/new",className:"btn btn-secondary",children:"Create Plan"})]})]}),e.jsx("div",{className:"card p-6 bg-gradient-to-r from-brand-900/50 to-surface-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-200",children:"BC/DR Readiness Score"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Overall preparedness based on RTO coverage, plan coverage, and test success rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:C("text-5xl font-bold",_),children:[r.readinessScore??0,"%"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-surface-400",children:[e.jsxs("span",{children:["RTO: ",r.metrics?.rtoCoverage??0,"%"]}),e.jsxs("span",{children:["Plans: ",r.metrics?.planCoverage??0,"%"]}),e.jsxs("span",{children:["Tests: ",r.metrics?.testSuccessRate??0,"%"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(a,{to:"/bcdr/processes",className:"card p-6 hover:border-brand-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-400",children:"Business Processes"}),e.jsx("p",{className:"text-3xl font-bold text-surface-100 mt-1",children:s.processes?.total??0}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[e.jsxs("span",{className:"text-red-400",children:["Tier 1: ",s.processes?.tier_1_count??0]}),e.jsxs("span",{className:"text-yellow-400",children:["Tier 2: ",s.processes?.tier_2_count??0]})]})]}),e.jsx(c,{className:"w-10 h-10 text-brand-400"})]}),(s.processes?.overdue_review_count??0)>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-1 text-yellow-400 text-xs",children:[e.jsx(u,{className:"w-4 h-4"}),s.processes?.overdue_review_count," overdue for review"]})]}),e.jsx(a,{to:"/bcdr/plans",className:"card p-6 hover:border-brand-500/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-400",children:"BC/DR Plans"}),e.jsx("p",{className:"text-3xl font-bold text-surface-100 mt-1",children:s.plans?.total??0}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[e.jsxs("span",{className:"text-green-400",children:[s.plans?.published_count??0," published"]}),e.jsxs("span",{className:"text-surface-400",children:[s.plans?.draft_count??0," draft"]})]})]}),e.jsx(l,{className:"w-10 h-10 text-blue-400"})]})}),e.jsxs(a,{to:"/bcdr/tests",className:"card p-6 hover:border-brand-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-400",children:"DR Tests"}),e.jsx("p",{className:"text-3xl font-bold text-surface-100 mt-1",children:s.tests?.completed_count??0}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs",children:[e.jsxs("span",{className:"text-green-400",children:[s.tests?.passed_count??0," passed"]}),e.jsxs("span",{className:"text-red-400",children:[s.tests?.failed_count??0," failed"]})]})]}),e.jsx(n,{className:"w-10 h-10 text-purple-400"})]}),(s.tests?.openFindingsCount??0)>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-1 text-yellow-400 text-xs",children:[e.jsx(u,{className:"w-4 h-4"}),s.tests?.openFindingsCount," open findings"]})]}),e.jsxs(a,{to:"/bcdr/runbooks",className:"card p-6 hover:border-brand-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-surface-400",children:"Runbooks"}),e.jsx("p",{className:"text-3xl font-bold text-surface-100 mt-1",children:s.runbooks?.total??0}),e.jsx("div",{className:"flex items-center gap-2 mt-2 text-xs",children:e.jsxs("span",{className:"text-green-400",children:[s.runbooks?.published_count??0," published"]})})]}),e.jsx(h,{className:"w-10 h-10 text-teal-400"})]}),(s.runbooks?.needs_review_count??0)>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-1 text-yellow-400 text-xs",children:[e.jsx(T,{className:"w-4 h-4"}),s.runbooks?.needs_review_count," need review"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Upcoming DR Tests"}),e.jsx(a,{to:"/bcdr/tests",className:"text-brand-400 text-sm hover:text-brand-300",children:"View all →"})]}),s.upcomingTests&&s.upcomingTests.length>0?e.jsx("div",{className:"space-y-3",children:s.upcomingTests.map(t=>e.jsxs(a,{to:`/bcdr/tests/${t.id}`,className:"flex items-center justify-between p-3 rounded-lg bg-surface-800/50 hover:bg-surface-700/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-100 font-medium",children:t.name}),e.jsx("p",{className:"text-surface-400 text-sm",children:t.test_type})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-surface-300 text-sm",children:new Date(t.scheduled_date).toLocaleDateString()})})]},t.id))}):e.jsxs("div",{className:"text-center py-8 text-surface-400",children:[e.jsx(n,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No upcoming tests scheduled"}),e.jsx(a,{to:"/bcdr/tests/new",className:"text-brand-400 text-sm hover:text-brand-300 mt-2 inline-block",children:"Schedule a test →"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Overdue Items"}),(s.overdueItems?.totalOverdue??0)>0&&e.jsxs("span",{className:"px-2 py-1 rounded-full bg-red-500/20 text-red-400 text-xs font-medium",children:[s.overdueItems?.totalOverdue," items"]})]}),(s.overdueItems?.totalOverdue??0)===0?e.jsxs("div",{className:"text-center py-8 text-surface-400",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-2 text-green-400 opacity-50"}),e.jsx("p",{className:"text-green-400",children:"All items are up to date!"})]}):e.jsxs("div",{className:"space-y-4",children:[(s.overdueItems?.plans??[]).slice(0,3).map(t=>e.jsxs(a,{to:`/bcdr/plans/${t.id}`,className:"flex items-center gap-3 p-3 rounded-lg bg-red-500/10 hover:bg-red-500/20 transition-colors",children:[e.jsx(l,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-surface-100 truncate",children:t.title}),e.jsx("p",{className:"text-red-400 text-xs",children:"Review overdue"})]})]},t.id)),(s.overdueItems?.processes??[]).slice(0,2).map(t=>e.jsxs(a,{to:`/bcdr/processes/${t.id}`,className:"flex items-center gap-3 p-3 rounded-lg bg-yellow-500/10 hover:bg-yellow-500/20 transition-colors",children:[e.jsx(c,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-surface-100 truncate",children:t.title}),e.jsx("p",{className:"text-yellow-400 text-xs",children:"BIA review overdue"})]})]},t.id)),(s.overdueItems?.findings??[]).slice(0,2).map(t=>e.jsxs(a,{to:`/bcdr/tests/${t.test_id}`,className:"flex items-center gap-3 p-3 rounded-lg bg-orange-500/10 hover:bg-orange-500/20 transition-colors",children:[e.jsx(F,{className:"w-5 h-5 text-orange-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-surface-100 truncate",children:t.title}),e.jsx("p",{className:"text-orange-400 text-xs",children:"Remediation overdue"})]})]},t.id))]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(a,{to:"/bcdr/processes/new",className:"p-4 rounded-lg bg-surface-800/50 hover:bg-surface-700/50 transition-colors text-center",children:[e.jsx(c,{className:"w-8 h-8 mx-auto mb-2 text-brand-400"}),e.jsx("span",{className:"text-surface-200 text-sm",children:"Add Process"})]}),e.jsxs(a,{to:"/bcdr/plans/new",className:"p-4 rounded-lg bg-surface-800/50 hover:bg-surface-700/50 transition-colors text-center",children:[e.jsx(l,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),e.jsx("span",{className:"text-surface-200 text-sm",children:"Create Plan"})]}),e.jsxs(a,{to:"/bcdr/tests/new",className:"p-4 rounded-lg bg-surface-800/50 hover:bg-surface-700/50 transition-colors text-center",children:[e.jsx(n,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),e.jsx("span",{className:"text-surface-200 text-sm",children:"Schedule Test"})]}),e.jsxs(a,{to:"/bcdr/runbooks/new",className:"p-4 rounded-lg bg-surface-800/50 hover:bg-surface-700/50 transition-colors text-center",children:[e.jsx(h,{className:"w-8 h-8 mx-auto mb-2 text-teal-400"}),e.jsx("span",{className:"text-surface-200 text-sm",children:"Create Runbook"})]})]})]})]})}export{A as default};
