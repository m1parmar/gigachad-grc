import{r as a,j as t,V as w,B as g,aJ as b,aD as c}from"./vendor-CWk44mA8.js";import{B as j}from"./index-CiJwl-Bo.js";import{a as y}from"./export-DqfI3kh9.js";const N=[{value:"csv",label:"Export as CSV",icon:"ðŸ“„"},{value:"xlsx",label:"Export as Excel",icon:"ðŸ“Š"},{value:"json",label:"Export as JSON",icon:"{ }"}];function O({data:n,columns:u,filename:f,sheetName:x,disabled:p=!1,buttonText:m="Export",variant:E="secondary",size:h="md"}){const[r,o]=a.useState(!1),[i,d]=a.useState(!1),l=a.useRef(null);a.useEffect(()=>{function e(s){l.current&&!l.current.contains(s.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),a.useEffect(()=>{function e(s){s.key==="Escape"&&o(!1)}if(r)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]);const v=async e=>{if(n.length===0){c.error("No data to export");return}d(!0),o(!1);try{await new Promise(s=>setTimeout(s,300)),await y({filename:f,columns:u,data:n,format:e,sheetName:x}),c.success(`Exported ${n.length} records as ${e.toUpperCase()}`)}catch(s){console.error("Export error:",s),c.error("Failed to export data")}finally{d(!1)}};return t.jsxs("div",{className:"relative inline-block",ref:l,children:[t.jsx(j,{variant:E,size:h,onClick:()=>o(!r),disabled:p||i,isLoading:i,loadingText:"Exporting...",leftIcon:t.jsx(b,{className:"w-4 h-4"}),rightIcon:t.jsx(w,{className:g("w-4 h-4 transition-transform",r&&"rotate-180")}),children:m}),r&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-surface-800 border border-surface-700 rounded-lg shadow-xl z-50 overflow-hidden",children:N.map(e=>t.jsxs("button",{onClick:()=>v(e.value),className:"w-full px-4 py-2.5 text-left text-sm text-surface-200 hover:bg-surface-700 flex items-center gap-3 transition-colors",children:[t.jsx("span",{className:"text-base",children:e.icon}),e.label]},e.value))})]})}export{O as E};
