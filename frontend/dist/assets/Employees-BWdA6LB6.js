import{r as a,j as e,L as j,l as I,aL as M,ay as A,aC as O,I as R,v as T,bR as _,am as V,aM as X,S as Z,aZ as q,A as z,bX as G,af as J}from"./vendor-CWk44mA8.js";import{O as F}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function K(r){return r===void 0?"text-gray-400":r>=80?"text-green-500":r>=60?"text-yellow-500":"text-red-500"}function Q(r){return r===void 0?"bg-gray-500/20":r>=80?"bg-green-500/20":r>=60?"bg-yellow-500/20":"bg-red-500/20"}function U(r){switch(r){case"clear":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-green-500/20 text-green-400",children:[e.jsx(Z,{className:"h-3 w-3"}),"Clear"]});case"pending":case"in_progress":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-yellow-500/20 text-yellow-400",children:[e.jsx(A,{className:"h-3 w-3"}),"Pending"]});case"flagged":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-red-500/20 text-red-400",children:[e.jsx(X,{className:"h-3 w-3"}),"Flagged"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-gray-500/20 text-gray-400",children:[e.jsx(T,{className:"h-3 w-3"}),"None"]})}}function W({dataSources:r}){const c=r||{hasHris:!1,hasBackgroundCheck:!1,hasTraining:!1,hasAssets:!1,hasAccess:!1};return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`p-1 rounded ${c.hasHris?"text-blue-400":"text-gray-600"}`,title:"HRIS",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("div",{className:`p-1 rounded ${c.hasBackgroundCheck?"text-green-400":"text-gray-600"}`,title:"Background Check",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx("div",{className:`p-1 rounded ${c.hasTraining?"text-purple-400":"text-gray-600"}`,title:"Training",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("div",{className:`p-1 rounded ${c.hasAssets?"text-orange-400":"text-gray-600"}`,title:"Assets",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("div",{className:`p-1 rounded ${c.hasAccess?"text-cyan-400":"text-gray-600"}`,title:"Access",children:e.jsx(J,{className:"h-4 w-4"})})]})}function ae(){const[r,c]=a.useState([]),[D,B]=a.useState([]),[E,N]=a.useState(!0),[x,L]=a.useState(""),[m,b]=a.useState(""),[u,y]=a.useState(""),[n,H]=a.useState("lastName"),[d,v]=a.useState("asc"),[l,w]=a.useState(1),[h,S]=a.useState(1),[i,C]=a.useState(0),[p,P]=a.useState(!1),k=a.useCallback(async()=>{N(!0);try{const o=(await F.list({search:x||void 0,department:m||void 0,complianceStatus:u||void 0,sortBy:n,sortOrder:d,page:l,limit:25})).data,g=(o.data||o||[]).map(s=>({id:s.id,email:s.email,firstName:s.firstName,lastName:s.lastName,fullName:s.fullName||`${s.firstName||""} ${s.lastName||""}`.trim()||s.email,department:s.department,jobTitle:s.jobTitle,employmentStatus:s.employmentStatus,complianceScore:s.complianceScore,backgroundCheckStatus:s.backgroundCheckStatus||s.latestBackgroundCheck?.status,overdueTrainings:s.overdueTrainings??s.overdueTrainingCount??0,pendingAttestations:s.pendingAttestations??s.pendingAttestationCount??0,dataSources:s.dataSources||{hasHris:!!s.hrisSource,hasBackgroundCheck:!!s.latestBackgroundCheck,hasTraining:(s.trainingRecordCount??0)>0,hasAssets:(s.assetCount??0)>0,hasAccess:(s.accessRecordCount??0)>0},lastCorrelatedAt:s.lastCorrelatedAt||s.updatedAt}));c(g),C(o.total||g.length),S(Math.ceil((o.total||g.length)/25))}catch(t){console.error("Failed to fetch employees:",t),c([]),C(0),S(1)}finally{N(!1)}},[x,m,u,n,d,l]),$=a.useCallback(async()=>{try{const t=await F.getDepartments();B(t.data||[])}catch(t){console.error("Failed to fetch departments:",t)}},[]);a.useEffect(()=>{$()},[$]),a.useEffect(()=>{k()},[k]);const f=t=>{n===t?v(d==="asc"?"desc":"asc"):(H(t),v("asc"))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Employee Compliance"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track employee compliance with training, background checks, and attestations"})]}),e.jsx(j,{to:"/people/dashboard",className:"btn btn-primary",children:"View Dashboard"})]}),e.jsxs("div",{className:"card p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or department...",value:x,onChange:t=>L(t.target.value),className:"input pl-10 w-full"})]}),e.jsxs("button",{onClick:()=>P(!p),className:`btn btn-secondary ${p?"bg-primary/20":""}`,children:[e.jsx(M,{className:"h-5 w-5"}),"Filters"]})]}),p&&e.jsxs("div",{className:"flex flex-wrap gap-4 pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Department:"}),e.jsxs("select",{value:m,onChange:t=>b(t.target.value),className:"input",children:[e.jsx("option",{value:"",children:"All Departments"}),D.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Compliance:"}),e.jsxs("select",{value:u,onChange:t=>y(t.target.value),className:"input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"compliant",children:"Compliant (80+)"}),e.jsx("option",{value:"at_risk",children:"At Risk (60-79)"}),e.jsx("option",{value:"non_compliant",children:"Non-Compliant (<60)"})]})]}),e.jsx("button",{onClick:()=>{b(""),y("")},className:"text-sm text-primary hover:text-primary/80",children:"Clear Filters"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[i," employees found"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Sort by:"}),e.jsxs("button",{onClick:()=>f("lastName"),className:`px-2 py-1 rounded ${n==="lastName"?"bg-surface-700 text-foreground":""}`,children:["Name ",n==="lastName"&&(d==="asc"?"↑":"↓")]}),e.jsxs("button",{onClick:()=>f("complianceScore"),className:`px-2 py-1 rounded ${n==="complianceScore"?"bg-surface-700 text-foreground":""}`,children:["Score ",n==="complianceScore"&&(d==="asc"?"↑":"↓")]}),e.jsxs("button",{onClick:()=>f("department"),className:`px-2 py-1 rounded ${n==="department"?"bg-surface-700 text-foreground":""}`,children:["Dept ",n==="department"&&(d==="asc"?"↑":"↓")]})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-surface-800/50",children:[e.jsx("th",{className:"text-left p-4 font-medium text-muted-foreground",children:"Employee"}),e.jsx("th",{className:"text-left p-4 font-medium text-muted-foreground",children:"Department"}),e.jsx("th",{className:"text-center p-4 font-medium text-muted-foreground",children:"Score"}),e.jsx("th",{className:"text-center p-4 font-medium text-muted-foreground",children:"Background"}),e.jsx("th",{className:"text-center p-4 font-medium text-muted-foreground",children:"Issues"}),e.jsx("th",{className:"text-center p-4 font-medium text-muted-foreground",children:"Data Sources"}),e.jsx("th",{className:"text-right p-4 font-medium text-muted-foreground",children:"Actions"})]})}),e.jsx("tbody",{children:E?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[e.jsx(A,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Loading employees..."]})}):r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:["No employees found. ",i===0&&"Load demo data to see sample employees or configure HR integrations to import employee data."]})}):r.map(t=>e.jsxs("tr",{className:"border-b border-border hover:bg-surface-800/30",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-surface-700 flex items-center justify-center",children:e.jsx(O,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx(j,{to:`/people/${t.id}`,className:"font-medium text-foreground hover:text-primary",children:t.fullName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.email})]})]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:"text-foreground",children:t.department||"—"}),t.jobTitle&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.jobTitle})]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full text-lg font-bold ${Q(t.complianceScore)} ${K(t.complianceScore)}`,children:t.complianceScore??"—"})}),e.jsx("td",{className:"p-4 text-center",children:U(t.backgroundCheckStatus)}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.overdueTrainings>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-red-500/20 text-red-400",children:[e.jsx(R,{className:"h-3 w-3"}),t.overdueTrainings]}),t.pendingAttestations>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs bg-yellow-500/20 text-yellow-400",children:[e.jsx(T,{className:"h-3 w-3"}),t.pendingAttestations]}),t.overdueTrainings===0&&t.pendingAttestations===0&&e.jsx("span",{className:"text-sm text-green-400",children:"None"})]})}),e.jsx("td",{className:"p-4",children:e.jsx(W,{dataSources:t.dataSources})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx(j,{to:`/people/${t.id}`,className:"text-sm text-primary hover:text-primary/80",children:"View Details →"})})]},t.id))})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",(l-1)*25+1," to ",Math.min(l*25,i)," of ",i]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w(l-1),disabled:l===1,className:"btn btn-secondary disabled:opacity-50",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm",children:["Page ",l," of ",h]}),e.jsx("button",{onClick:()=>w(l+1),disabled:l===h,className:"btn btn-secondary disabled:opacity-50",children:e.jsx(V,{className:"h-4 w-4"})})]})]})]})]})}export{ae as default};
