import{u as E,r as u,b as q,c as k,aD as f,j as e,ay as A,a7 as W,bO as ce,S as y,h as O,v as D,m as Z,a8 as ee,aR as de,V as oe,bS as me,A as ue,aM as G,am as M,aq as xe,aT as B,bT as se,bF as he,M as V,ab as Q,L as C,aQ as pe,k as ge,t as fe}from"./vendor-CWk44mA8.js";import{s as L,w as je,M as $,I as H,B as be,J as Ne,d as ae,b as ve,K as ye,L as we,N as R,h as K,O as _,c as ke}from"./index-CiJwl-Bo.js";import Ce from"./DisabledModulePage-CE1vhHrB.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function Se(){const t=E(),[a,x]=u.useState(!1),[l,d]=u.useState(""),[c,j]=u.useState(0),{data:i,isLoading:N}=q({queryKey:["seed-status"],queryFn:()=>L.getStatus().then(m=>m.data)}),h=k({mutationFn:()=>L.loadDemoData(),onSuccess:m=>{t.invalidateQueries({queryKey:["seed-status"]}),t.invalidateQueries(),f.success(`Demo data loaded! Created ${m.data.totalRecords} records.`)},onError:m=>{f.error(m.response?.data?.message||"Failed to load demo data")}}),o=k({mutationFn:m=>L.resetData(m),onSuccess:m=>{t.invalidateQueries({queryKey:["seed-status"]}),t.invalidateQueries(),f.success(`Data reset complete. Deleted ${m.data.totalRecords} records.`),x(!1),d("")},onError:m=>{f.error(m.response?.data?.message||"Failed to reset data")}}),b=()=>{h.mutate()},p=()=>{x(!0),d(""),j(5);const m=setInterval(()=>{j(v=>v<=1?(clearInterval(m),0):v-1)},1e3)},n=()=>{l==="DELETE ALL DATA"&&o.mutate(l)},s=l==="DELETE ALL DATA"&&c===0;return N?e.jsx("div",{className:"card p-6",children:e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx(A,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"h-6 w-6 text-purple-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Demo Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Load sample data to explore the platform or reset to start fresh"})]})]}),i?.demoDataLoaded&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:[e.jsx(W,{className:"h-5 w-5 text-purple-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-purple-400",children:"Demo Mode Active"}),e.jsx("p",{className:"text-xs text-purple-400/70",children:"This organization contains demonstration data. Clear it when ready for production use."})]})]}),!i?.hasExistingData&&!i?.demoDataLoaded&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsx(ce,{className:"h-5 w-5 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-400",children:"Ready for Demo Data"}),e.jsx("p",{className:"text-xs text-blue-400/70",children:"Your organization is empty. Load demo data to see the platform in action."})]})]}),i?.hasExistingData&&i.dataSummary&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Current Data"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(w,{label:"Controls",count:i.dataSummary.controls}),e.jsx(w,{label:"Evidence",count:i.dataSummary.evidence}),e.jsx(w,{label:"Policies",count:i.dataSummary.policies}),e.jsx(w,{label:"Risks",count:i.dataSummary.risks}),e.jsx(w,{label:"Vendors",count:i.dataSummary.vendors}),e.jsx(w,{label:"Employees",count:i.dataSummary.employees}),e.jsx(w,{label:"Assets",count:i.dataSummary.assets}),e.jsx(w,{label:"Integrations",count:i.dataSummary.integrations}),e.jsx(w,{label:"Audits",count:i.dataSummary.audits})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",i.dataSummary.total," records"]})]}),!i?.hasExistingData&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Demo Data Includes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"50 security controls"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"3 compliance frameworks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"15 security policies"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"25 risk items"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"20 vendor profiles"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"50 employee records"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"30+ assets"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"5 audit records"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-border",children:[!i?.hasExistingData&&e.jsxs("button",{onClick:b,disabled:h.isPending,className:"btn btn-primary flex items-center gap-2",children:[h.isPending?e.jsx(A,{className:"h-4 w-4 animate-spin"}):e.jsx(W,{className:"h-4 w-4"}),h.isPending?"Loading...":"Load Demo Data"]}),i?.hasExistingData&&e.jsxs("button",{onClick:p,className:"btn btn-secondary flex items-center gap-2 text-red-400 hover:text-red-300 hover:border-red-400/50",children:[e.jsx(O,{className:"h-4 w-4"}),"Reset All Data"]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"card p-6 w-full max-w-md mx-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-500/20 rounded-lg",children:e.jsx(D,{className:"h-6 w-6 text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Reset All Data"})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-surface-700 rounded-lg",children:e.jsx(Z,{className:"h-5 w-5 text-muted-foreground"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will permanently delete all data in your organization:"}),e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("ul",{className:"text-sm text-red-400 space-y-1",children:[e.jsxs("li",{children:["• ",i?.dataSummary.controls||0," controls"]}),e.jsxs("li",{children:["• ",i?.dataSummary.evidence||0," evidence records"]}),e.jsxs("li",{children:["• ",i?.dataSummary.policies||0," policies"]}),e.jsxs("li",{children:["• ",i?.dataSummary.risks||0," risks"]}),e.jsxs("li",{children:["• ",i?.dataSummary.vendors||0," vendors"]}),e.jsxs("li",{children:["• ",i?.dataSummary.employees||0," employees"]}),e.jsxs("li",{children:["• ",i?.dataSummary.assets||0," assets"]}),e.jsx("li",{children:"• And all related records..."})]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{className:"text-foreground",children:"This cannot be undone."})," Users and organization settings will be preserved."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Type ",e.jsx("span",{className:"font-mono text-red-400",children:"DELETE ALL DATA"})," to confirm:"]}),e.jsx("input",{type:"text",value:l,onChange:m=>d(m.target.value),placeholder:"DELETE ALL DATA",className:"input w-full font-mono"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-border",children:[e.jsx("button",{onClick:()=>x(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsxs("button",{onClick:n,disabled:!s||o.isPending,className:"btn bg-red-500 hover:bg-red-600 text-white disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o.isPending?e.jsx(A,{className:"h-4 w-4 animate-spin"}):c>0?e.jsx("span",{className:"w-4 text-center",children:c}):e.jsx(O,{className:"h-4 w-4"}),o.isPending?"Deleting...":c>0?`Wait ${c}s`:"Delete All Data"]})]})]})})]})}function w({label:t,count:a}){return e.jsxs("div",{className:"p-3 bg-surface-800/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t})]})}function Re(){const t=E(),{enabledModules:a,_refreshFromOrgConfig:x}=je(),[l,d]=u.useState(new Set(a)),{data:c,isLoading:j}=q({queryKey:["org-modules"],queryFn:async()=>(await H.getModules()).data});u.useEffect(()=>{c&&c.enabledModules&&Array.isArray(c.enabledModules)&&x&&x(c.enabledModules)},[c,x]),u.useEffect(()=>{d(new Set(a))},[a]);const i=n=>{d(s=>{const m=new Set(s);return m.has(n)?m.delete(n):m.add(n),m})},N=n=>{const s=$.find(m=>m.id===n);s&&d(new Set(s.modules))},h=u.useMemo(()=>{const n=Array.from(l).sort();return $.find(m=>{const v=[...m.modules].sort();return n.length===v.length&&n.every((r,g)=>r===v[g])})||null},[l]),o=k({mutationFn:async n=>(await H.updateModules(n)).data,onSuccess:n=>{if(f.success("Module configuration saved"),t.invalidateQueries({queryKey:["org-modules"]}),x&&n&&Array.isArray(n.enabledModules))try{x(n.enabledModules)}catch(s){console.error("Error refreshing module config:",s)}},onError:n=>{console.error("Failed to save module configuration:",n),f.error(n.response?.data?.message||"Failed to save module configuration")}}),b=()=>{const n=Array.from(l);o.mutate(n)},p=Object.values(Ne);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Module Configuration"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Enable or disable modules for this organization. Deployment defaults act as a baseline; changes here apply at the organization level."})]}),e.jsx(be,{onClick:b,disabled:o.isPending||j,children:o.isPending?"Saving...":"Save Configuration"})]}),e.jsxs("div",{className:"card p-4 space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-surface-200 mb-2",children:"Presets"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(n=>e.jsx("button",{type:"button",onClick:()=>N(n.id),className:`px-3 py-1.5 rounded-full text-xs border ${h?.id===n.id?"bg-brand-500 text-white border-brand-500":"bg-surface-900 text-surface-300 border-surface-700 hover:bg-surface-800"}`,children:n.name},n.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:p.map(n=>{const s=l.has(n.id);return e.jsxs("label",{className:`card p-4 flex items-start gap-3 cursor-pointer border ${s?"border-brand-500 bg-brand-500/10":"border-surface-800 hover:border-surface-600"}`,children:[e.jsx("input",{type:"checkbox",className:"mt-1",checked:s,onChange:()=>i(n.id)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-surface-100",children:n.name}),!s&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-surface-800 text-surface-400",children:"Disabled"})]}),e.jsx("p",{className:"text-xs text-surface-400 mt-1",children:n.description}),e.jsxs("p",{className:"text-[10px] text-surface-500 mt-1",children:["Env var: ",e.jsx("code",{className:"font-mono",children:n.envVar})]})]})]},n.id)})})]})}function Ae(){const[t,a]=u.useState([]),[x,l]=u.useState(!0),[d,c]=u.useState(new Set),[j,i]=u.useState(!1);u.useEffect(()=>{N();const s=setInterval(N,300*1e3);return()=>clearInterval(s)},[]);const N=async()=>{try{const s=await ae.get("/api/system/warnings");a(s.data.warnings||[])}catch(s){console.error("Failed to fetch system warnings:",s)}finally{l(!1)}},h=s=>{c(v=>new Set([...v,s]));const m=JSON.parse(sessionStorage.getItem("dismissedWarnings")||"[]");m.push(s),sessionStorage.setItem("dismissedWarnings",JSON.stringify(m))};u.useEffect(()=>{const s=JSON.parse(sessionStorage.getItem("dismissedWarnings")||"[]");c(new Set(s))},[]);const o=t.filter(s=>!d.has(s.id)),b=o.filter(s=>s.severity==="critical"),p=o.filter(s=>s.severity==="warning");if(x||o.length===0)return null;const n=b.length>0;return e.jsxs("div",{className:`mb-6 rounded-lg border ${n?"border-red-500/50 bg-red-500/10":"border-yellow-500/50 bg-yellow-500/10"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 cursor-pointer ${n?"text-red-400":"text-yellow-400"}`,onClick:()=>i(!j),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n?e.jsx(ee,{className:"h-6 w-6"}):e.jsx(D,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:n?`${b.length} Critical Issue${b.length>1?"s":""} Detected`:`${o.length} System Warning${o.length>1?"s":""}`}),e.jsx("p",{className:"text-sm opacity-80",children:n?"Address these issues before deploying to production":"Review these recommendations to improve system resilience"})]})]}),e.jsx("button",{className:"p-1 hover:bg-white/10 rounded",children:j?e.jsx(de,{className:"h-5 w-5"}):e.jsx(oe,{className:"h-5 w-5"})})]}),j&&e.jsxs("div",{className:"border-t border-white/10 divide-y divide-white/10",children:[b.map(s=>e.jsx(J,{warning:s,onDismiss:()=>h(s.id)},s.id)),p.map(s=>e.jsx(J,{warning:s,onDismiss:()=>h(s.id)},s.id))]})]})}function J({warning:t,onDismiss:a}){const x=t.severity==="critical";return e.jsxs("div",{className:"px-4 py-3 flex items-start gap-4",children:[e.jsx("div",{className:`mt-0.5 p-1 rounded ${x?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:x?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(D,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded ${x?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:t.category.toUpperCase()}),e.jsx("h4",{className:"font-medium text-foreground",children:t.title})]}),e.jsx("p",{className:"mt-1 text-sm text-foreground/70",children:t.message}),t.recommendation&&e.jsxs("p",{className:"mt-2 text-sm text-foreground/60",children:[e.jsx("span",{className:"font-medium",children:"Recommendation:"})," ",t.recommendation]}),t.documentationUrl&&e.jsxs("a",{href:t.documentationUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center gap-1 text-sm text-primary hover:underline",children:["View Documentation",e.jsx(me,{className:"h-3 w-3"})]})]}),!x&&e.jsx("button",{onClick:l=>{l.stopPropagation(),a()},className:"p-1 hover:bg-white/10 rounded text-foreground/50 hover:text-foreground",title:"Dismiss for this session",children:e.jsx(Z,{className:"h-4 w-4"})})]})}function De(){const[t,a]=u.useState(null),[x,l]=u.useState(!0),[d,c]=u.useState(null),j=async()=>{try{l(!0),c(null);const o=(await ae.get("/api/system/production-readiness")).data;o&&typeof o.score=="number"?a({ready:o.ready??!1,score:o.score??0,blockers:o.blockers??[],warnings:o.warnings??[],recommendations:o.recommendations??[]}):c("System health API not available")}catch(h){console.error("Failed to fetch production readiness:",h),c("System health check unavailable (backend may need restart)")}finally{l(!1)}};if(u.useEffect(()=>{j()},[]),x)return e.jsx("div",{className:"bg-surface-800 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(A,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-foreground/60",children:"Analyzing system..."})]})});if(d||!t)return e.jsx("div",{className:"bg-surface-800 rounded-xl p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-12 w-12 mx-auto text-yellow-500 mb-3"}),e.jsx("p",{className:"text-foreground/60",children:d||"Unable to load data"}),e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg text-sm",children:"Retry"})]})});const i=t.score>=80?"text-green-400":t.score>=60?"text-yellow-400":"text-red-400",N=t.score>=80?"bg-green-500/20":t.score>=60?"bg-yellow-500/20":"bg-red-500/20";return e.jsxs("div",{className:"bg-surface-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-primary"}),"Production Readiness"]}),e.jsx("p",{className:"text-sm text-foreground/60 mt-1",children:"System configuration analysis for production deployment"})]}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-white/10 rounded-lg text-foreground/60 hover:text-foreground",title:"Refresh",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-6",children:[e.jsxs("div",{className:`relative w-24 h-24 rounded-full ${N} flex items-center justify-center`,children:[e.jsx("span",{className:`text-3xl font-bold ${i}`,children:t.score}),e.jsx("span",{className:"absolute bottom-2 text-xs text-foreground/40",children:"/ 100"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:t.ready?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-5 w-5 text-green-400"}),e.jsx("span",{className:"font-medium text-green-400",children:"Production Ready"})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-5 w-5 text-red-400"}),e.jsx("span",{className:"font-medium text-red-400",children:"Not Production Ready"})]})}),e.jsx("p",{className:"text-sm text-foreground/60",children:t.ready?"All critical requirements have been met. Your instance is ready for production use.":`${t.blockers.length} critical issue${t.blockers.length!==1?"s":""} must be resolved before production deployment.`})]})]})]}),t.blockers.length>0&&e.jsxs("div",{className:"p-6 border-b border-white/10 bg-red-500/5",children:[e.jsxs("h4",{className:"text-sm font-medium text-red-400 mb-3 flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Critical Blockers (",t.blockers.length,")"]}),e.jsx("ul",{className:"space-y-2",children:t.blockers.map((h,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-foreground/80",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-red-400 flex-shrink-0"}),h]},o))})]}),t.warnings.length>0&&e.jsxs("div",{className:"p-6 border-b border-white/10 bg-yellow-500/5",children:[e.jsxs("h4",{className:"text-sm font-medium text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Warnings (",t.warnings.length,")"]}),e.jsx("ul",{className:"space-y-2",children:t.warnings.map((h,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-foreground/80",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-yellow-400 flex-shrink-0"}),h]},o))})]}),t.recommendations.length>0&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-primary"}),"Recommendations"]}),e.jsx("ul",{className:"space-y-2",children:t.recommendations.map((h,o)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-foreground/70",children:[e.jsx(M,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),h]},o))})]}),t.ready&&t.warnings.length===0&&e.jsx("div",{className:"p-6 bg-green-500/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-400",children:"Excellent Configuration!"}),e.jsx("p",{className:"text-sm text-foreground/60",children:"Your GigaChad GRC instance is properly configured for production use."})]})]})})]})}const Y={organization:{title:"Organization Settings",description:"Manage your organization details"},communications:{title:"Communications",description:"Configure email and Slack notifications"},api:{title:"API Keys",description:"Manage API keys for programmatic access"},"dashboard-templates":{title:"Dashboard Templates",description:"Create and manage dashboard templates for your organization"},"employee-compliance":{title:"Employee Compliance Settings",description:"Configure scoring weights, thresholds, and requirements for employee compliance tracking"},ai:{title:"AI Configuration",description:"Configure AI providers and features for intelligent automation"},modules:{title:"Module Configuration",description:"Enable or disable platform modules for this organization"}};function Ue({section:t}){const{user:a}=ve();if(!(a?.role==="admin"||a?.role==="super_admin"))return e.jsx(xe,{to:"/dashboard",replace:!0});const{title:l,description:d}=Y[t]||Y.organization;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:l}),e.jsx("p",{className:"text-surface-400 mt-1",children:d})]}),e.jsxs("div",{className:"max-w-4xl",children:[t==="organization"&&e.jsx(Ee,{}),t==="communications"&&e.jsx(Fe,{}),t==="api"&&e.jsx(Te,{}),t==="dashboard-templates"&&e.jsx(Me,{}),t==="employee-compliance"&&e.jsx(qe,{}),t==="modules"&&e.jsx(Re,{}),t==="ai"&&e.jsx(ye,{module:"ai",fallback:e.jsx(Ce,{moduleId:"ai"}),children:e.jsx(Ie,{})})]})]})}function Ee(){const{branding:t,updateBranding:a}=we(),[x,l]=u.useState(t.platformName),[d,c]=u.useState(t.logoUrl),[j,i]=u.useState(null),[N,h]=u.useState(!1),[o,b]=u.useState(!1),p=u.useRef(null);u.useEffect(()=>{l(t.platformName),c(t.logoUrl)},[t]);const n=r=>{const g=r.target.files?.[0];if(g){if(!g.type.startsWith("image/")){f.error("Please upload an image file");return}if(g.size>2*1024*1024){f.error("Image must be less than 2MB");return}const P=new FileReader;P.onload=I=>{const F=I.target?.result;i(F),c(F)},P.readAsDataURL(g)}},s=async()=>{h(!0);try{await a({platformName:x,logoUrl:d}),f.success("Branding settings saved"),i(null)}catch{f.error("Failed to save branding settings")}finally{h(!1)}},m=()=>{c("/logo.png"),i(null),p.current&&(p.current.value="")},v=async()=>{b(!0);try{const r=new Date().toISOString().replace(/[:.]/g,"-"),g=async z=>{const T=await fetch(z,{headers:{"Content-Type":"application/json"}});if(!T.ok)throw new Error(`Failed to fetch ${z}: ${T.status} ${T.statusText}`);return T.json()},[P,I,F,te,re,ne]=await Promise.all([g("/api/risks/full?page=1&limit=1000"),g("/api/evidence?limit=1000"),g("/api/controls?limit=1000"),g("/api/vendors?page=1&limit=1000"),g("/api/audits?page=1&limit=1000"),g("/api/audit-logs?page=1&limit=1000")]),le={exportedAt:new Date().toISOString(),meta:{version:1,description:"Organization-level export for offboarding. Includes risks, controls, evidence metadata, vendors, audits, and recent audit logs. Evidence files remain in object storage and can be exported separately."},risks:P,controls:F,evidence:I,vendors:te,audits:re,auditLogs:ne},ie=new Blob([JSON.stringify(le,null,2)],{type:"application/json"}),U=URL.createObjectURL(ie),S=document.createElement("a");S.href=U,S.download=`organization-export-${r}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(U),f.success("Organization export started. JSON file downloaded.")}catch(r){console.error(r),f.error("Failed to export organization data. Please try again or contact support.")}finally{b(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Platform Branding"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Customize the look and name of your GRC platform"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Platform Name"}),e.jsx("input",{type:"text",value:x,onChange:r=>l(r.target.value),className:"input mt-1",placeholder:"GigaChad GRC"}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:"This name appears in the sidebar, login page, and throughout the platform"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Platform Logo"}),e.jsxs("div",{className:"mt-2 flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-20 h-20 rounded-lg border border-surface-700 bg-surface-800 flex items-center justify-center overflow-hidden",children:d?e.jsx("img",{src:j||d,alt:"Logo preview",className:"w-full h-full object-contain"}):e.jsx(B,{className:"w-8 h-8 text-surface-500"})})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:n,className:"hidden",id:"logo-upload"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>p.current?.click(),className:"btn-secondary text-sm",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Upload Image"]}),d!=="/logo.png"&&e.jsx("button",{type:"button",onClick:m,className:"btn-ghost text-sm text-surface-400 hover:text-surface-200",children:"Reset to Default"})]}),e.jsx("p",{className:"text-surface-500 text-xs",children:"Recommended: Square image, at least 128x128 pixels. PNG or SVG with transparent background works best."}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"text-surface-400 text-xs",children:"Or enter image URL:"}),e.jsx("input",{type:"url",value:d.startsWith("data:")?"":d,onChange:r=>{c(r.target.value||"/logo.png"),i(null)},className:"input mt-1 text-sm",placeholder:"https://example.com/logo.png"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-surface-800",children:e.jsx("button",{className:"btn-primary",onClick:s,disabled:N,children:N?"Saving...":"Save Branding"})})]}),e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Organization Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Organization Name"}),e.jsx("input",{type:"text",defaultValue:"Default Organization",className:"input mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Description"}),e.jsx("textarea",{defaultValue:"Your organization's GRC platform",className:"input mt-1",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Primary Contact Email"}),e.jsx("input",{type:"email",className:"input mt-1",placeholder:"admin@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Timezone"}),e.jsxs("select",{className:"input mt-1",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Industry"}),e.jsxs("select",{className:"input mt-1",children:[e.jsx("option",{value:"",children:"Select industry..."}),e.jsx("option",{value:"technology",children:"Technology"}),e.jsx("option",{value:"finance",children:"Finance & Banking"}),e.jsx("option",{value:"healthcare",children:"Healthcare"}),e.jsx("option",{value:"retail",children:"Retail"}),e.jsx("option",{value:"manufacturing",children:"Manufacturing"}),e.jsx("option",{value:"government",children:"Government"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-surface-800",children:e.jsx("button",{className:"btn-primary",children:"Save Organization"})})]}),e.jsx(Pe,{}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Data Portability & Offboarding"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Export a structured JSON snapshot of your organization's data to support vendor offboarding or migration to another system. Includes risks, controls, evidence metadata, vendors, audits, and recent activity logs."})]}),e.jsx(se,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-1",title:"Export includes JSON metadata only; evidence files remain in your object storage.","aria-label":"Data export warning"})]}),e.jsxs("div",{className:"bg-surface-800/60 rounded-lg p-4 space-y-2 text-sm text-surface-400",children:[e.jsx("p",{className:"font-medium text-surface-200",children:"What's included"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Risk register data (using the full export endpoint)"}),e.jsx("li",{children:"Controls and implementations"}),e.jsx("li",{children:"Evidence metadata (file paths and metadata, not binary files)"}),e.jsx("li",{children:"Vendors and audit records"}),e.jsx("li",{children:"Recent audit log entries for traceability"})]}),e.jsx("p",{className:"text-xs text-surface-500 pt-1",children:"Evidence files themselves remain in your configured object storage (e.g., RustFS/S3). Those can be exported separately at the storage layer if you need a full archive."})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-surface-800",children:e.jsx("button",{type:"button",onClick:v,className:"btn-primary",disabled:o,children:o?"Preparing Export…":"Export Organization Data (JSON)"})})]}),e.jsx(Se,{}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-surface-800",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"System Health"}),e.jsx(Ae,{}),e.jsx(De,{})]})]})}function Pe(){const t=ge(),{isMultiWorkspaceEnabled:a,workspaces:x,enableMultiWorkspace:l,disableMultiWorkspace:d,isLoading:c}=ke(),[j,i]=u.useState(!1),[N,h]=u.useState(!1),o=async()=>{if(a){if(x.length>1){f.error("Cannot disable multi-workspace mode while more than one workspace exists");return}h(!0)}else{i(!0);try{await l(),f.success("Multi-workspace mode enabled! A default workspace has been created.")}catch{f.error("Failed to enable multi-workspace mode")}finally{i(!1)}}},b=async()=>{h(!1),i(!0);try{await d(),f.success("Multi-workspace mode disabled")}catch{f.error("Failed to disable multi-workspace mode")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-6 h-6 text-brand-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Multi-Workspace Mode"}),e.jsx("p",{className:"text-sm text-surface-400",children:"Enable separate workspaces for different products or teams"})]})]}),e.jsx("button",{onClick:o,disabled:j||c,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${a?"bg-brand-600":"bg-surface-600"} ${j||c?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a?"translate-x-6":"translate-x-1"}`})})]}),a&&e.jsx("div",{className:"pt-4 border-t border-surface-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-surface-100 font-medium",children:[x.length," workspace",x.length!==1?"s":""," active"]}),e.jsx("p",{className:"text-sm text-surface-400",children:"Manage workspaces, members, and permissions"})]}),e.jsxs("button",{onClick:()=>t("/settings/workspaces"),className:"flex items-center gap-1 text-sm text-brand-400 hover:text-brand-300",children:["Manage Workspaces",e.jsx(M,{className:"w-4 h-4"})]})]})}),!a&&e.jsxs("div",{className:"bg-surface-800 rounded-lg p-4 text-sm text-surface-400",children:[e.jsx("p",{className:"mb-2",children:"Multi-workspace mode allows you to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Track compliance progress separately for each product"}),e.jsx("li",{children:"Assign team members to specific workspaces"}),e.jsx("li",{children:"View consolidated org-level dashboards"}),e.jsx("li",{children:"Maintain a shared control library across all workspaces"})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-surface-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-100 mb-4",children:"Disable Multi-Workspace Mode?"}),e.jsx("p",{className:"text-surface-400 mb-6",children:"This will hide all workspace-related features. Your data will be preserved but workspace filtering will be disabled across the platform."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm text-surface-400 hover:text-surface-100",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Disable Multi-Workspace"})]})]})})]})}function Fe(){const t=E(),[a,x]=u.useState("disabled"),[l,d]=u.useState({emailFromAddress:"",emailFromName:"",smtpHost:"",smtpPort:587,smtpUser:"",smtpPassword:"",smtpSecure:!0,sendgridApiKey:"",sesRegion:"us-east-1",sesAccessKeyId:"",sesSecretAccessKey:""}),[c,j]=u.useState({enabled:!1,webhookUrl:"",botToken:"",defaultChannel:"",workspaceName:""}),[i,N]=u.useState(""),{data:h,isLoading:o}=q({queryKey:["notifications-config"],queryFn:()=>R.get().then(r=>r.data)}),b=k({mutationFn:r=>R.updateEmail(r),onSuccess:()=>{t.invalidateQueries({queryKey:["notifications-config"]}),f.success("Email configuration saved")},onError:()=>{f.error("Failed to save email configuration")}}),p=k({mutationFn:r=>R.updateSlack(r),onSuccess:()=>{t.invalidateQueries({queryKey:["notifications-config"]}),f.success("Slack configuration saved")},onError:()=>{f.error("Failed to save Slack configuration")}}),n=k({mutationFn:r=>R.testEmail(r),onSuccess:r=>{r.data.success?f.success(r.data.message):f.error(r.data.message)},onError:()=>{f.error("Failed to send test email")}}),s=k({mutationFn:r=>R.testSlack(r),onSuccess:r=>{r.data.success?f.success(r.data.message):f.error(r.data.message)},onError:()=>{f.error("Failed to send test message")}}),m=()=>{const r={emailProvider:a,emailFromAddress:l.emailFromAddress,emailFromName:l.emailFromName};a==="smtp"?r.smtpConfig={host:l.smtpHost,port:l.smtpPort,user:l.smtpUser,password:l.smtpPassword||void 0,secure:l.smtpSecure}:a==="sendgrid"&&l.sendgridApiKey?r.sendgridApiKey=l.sendgridApiKey:a==="ses"&&(r.sesConfig={region:l.sesRegion,accessKeyId:l.sesAccessKeyId||void 0,secretAccessKey:l.sesSecretAccessKey||void 0}),b.mutate(r)},v=()=>{p.mutate({slackNotificationsEnabled:c.enabled,slackWebhookUrl:c.webhookUrl||void 0,slackBotToken:c.botToken||void 0,slackDefaultChannel:c.defaultChannel,slackWorkspaceName:c.workspaceName})};return o?e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-surface-700 rounded w-1/3"}),e.jsx("div",{className:"h-32 bg-surface-700 rounded"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-surface-100 flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Email Configuration"]}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Configure how the platform sends emails"})]}),h?.emailProvider!=="disabled"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-400",children:"Configured"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email Provider"}),e.jsxs("select",{className:"input mt-1",value:a,onChange:r=>x(r.target.value),children:[e.jsx("option",{value:"disabled",children:"Disabled"}),e.jsx("option",{value:"smtp",children:"SMTP Server"}),e.jsx("option",{value:"sendgrid",children:"SendGrid"}),e.jsx("option",{value:"ses",children:"AWS SES"})]})]}),a!=="disabled"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"From Address"}),e.jsx("input",{type:"email",className:"input mt-1",placeholder:"noreply@company.com",value:l.emailFromAddress,onChange:r=>d(g=>({...g,emailFromAddress:r.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"From Name"}),e.jsx("input",{type:"text",className:"input mt-1",placeholder:"GigaChad GRC",value:l.emailFromName,onChange:r=>d(g=>({...g,emailFromName:r.target.value}))})]})]}),a==="smtp"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-surface-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"SMTP Host"}),e.jsx("input",{type:"text",className:"input mt-1",placeholder:"smtp.company.com",value:l.smtpHost,onChange:r=>d(g=>({...g,smtpHost:r.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Port"}),e.jsx("input",{type:"number",className:"input mt-1",value:l.smtpPort,onChange:r=>d(g=>({...g,smtpPort:parseInt(r.target.value)}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Username"}),e.jsx("input",{type:"text",className:"input mt-1",value:l.smtpUser,onChange:r=>d(g=>({...g,smtpUser:r.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Password"}),e.jsx("input",{type:"password",className:"input mt-1",placeholder:"••••••••",value:l.smtpPassword,onChange:r=>d(g=>({...g,smtpPassword:r.target.value}))})]})]}),a==="sendgrid"&&e.jsxs("div",{className:"p-4 bg-surface-800/50 rounded-lg",children:[e.jsx("label",{className:"label",children:"SendGrid API Key"}),e.jsx("input",{type:"password",className:"input mt-1",placeholder:"SG.xxxxxxxxxx",value:l.sendgridApiKey,onChange:r=>d(g=>({...g,sendgridApiKey:r.target.value}))})]}),a==="ses"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-surface-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"AWS Region"}),e.jsxs("select",{className:"input mt-1",value:l.sesRegion,onChange:r=>d(g=>({...g,sesRegion:r.target.value})),children:[e.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),e.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),e.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Access Key ID"}),e.jsx("input",{type:"text",className:"input mt-1",placeholder:"AKIA...",value:l.sesAccessKeyId,onChange:r=>d(g=>({...g,sesAccessKeyId:r.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Secret Access Key"}),e.jsx("input",{type:"password",className:"input mt-1",placeholder:"••••••••",value:l.sesSecretAccessKey,onChange:r=>d(g=>({...g,sesSecretAccessKey:r.target.value}))})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-4 border-t border-surface-700",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"email",className:"input",placeholder:"Enter email to send test",value:i,onChange:r=>N(r.target.value)})}),e.jsx("button",{className:"btn-secondary",onClick:()=>n.mutate(i),disabled:!i||n.isPending,children:n.isPending?"Sending...":"Send Test"})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-surface-800",children:e.jsx("button",{className:"btn-primary",onClick:m,disabled:b.isPending,children:b.isPending?"Saving...":"Save Email Settings"})})]}),e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Slack Notifications"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Send alerts and notifications to Slack"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.enabled,onChange:r=>j(g=>({...g,enabled:r.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:ring-2 peer-focus:ring-brand-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-600"})]})]}),c.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Webhook URL"}),e.jsx("input",{type:"password",className:"input mt-1",placeholder:"https://hooks.slack.com/services/...",value:c.webhookUrl,onChange:r=>j(g=>({...g,webhookUrl:r.target.value}))}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:"Create a webhook in your Slack workspace settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Default Channel"}),e.jsx("input",{type:"text",className:"input mt-1",placeholder:"#grc-alerts",value:c.defaultChannel,onChange:r=>j(g=>({...g,defaultChannel:r.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Workspace Name"}),e.jsx("input",{type:"text",className:"input mt-1",placeholder:"Company Workspace",value:c.workspaceName,onChange:r=>j(g=>({...g,workspaceName:r.target.value}))})]})]})]}),e.jsx("div",{className:"flex items-center gap-4 pt-4 border-t border-surface-700",children:e.jsx("button",{className:"btn-secondary",onClick:()=>s.mutate(c.defaultChannel),disabled:s.isPending,children:s.isPending?"Sending...":"Send Test Message"})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-surface-800",children:e.jsx("button",{className:"btn-primary",onClick:v,disabled:p.isPending,children:p.isPending?"Saving...":"Save Slack Settings"})})]})]})}function Te(){const[t]=u.useState([{id:"1",name:"Production API Key",prefix:"grc_prod_",created:"2025-01-15",lastUsed:"2025-12-01"},{id:"2",name:"Development Key",prefix:"grc_dev_",created:"2025-06-10",lastUsed:"Never"}]);return e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"API Keys"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Manage API keys for programmatic access"})]}),e.jsx("button",{className:"btn-primary",children:"Generate New Key"})]}),e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-100 font-medium",children:a.name}),e.jsxs("p",{className:"text-surface-500 text-sm font-mono",children:[a.prefix,"••••••••"]}),e.jsxs("p",{className:"text-surface-600 text-xs mt-1",children:["Created ",a.created," • Last used ",a.lastUsed]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"btn-secondary text-sm",children:"Regenerate"}),e.jsx("button",{className:"btn-danger text-sm",children:"Revoke"})]})]},a.id))}),e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(se,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-medium",children:"API Key Security"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"API keys grant full access to your organization's data. Keep them secure and rotate them regularly."})]})]})})]})}function Me(){const t=E(),[a,x]=u.useState(!1),[l,d]=u.useState(""),[c,j]=u.useState(""),{data:i,isLoading:N}=q({queryKey:["dashboard-templates"],queryFn:()=>K.getTemplates().then(p=>p.data)}),h=k({mutationFn:p=>K.create(p),onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard-templates"]}),t.invalidateQueries({queryKey:["dashboards"]}),f.success("Template created"),x(!1),d(""),j("")},onError:()=>f.error("Failed to create template")}),o=k({mutationFn:p=>K.delete(p),onSuccess:()=>{t.invalidateQueries({queryKey:["dashboard-templates"]}),t.invalidateQueries({queryKey:["dashboards"]}),f.success("Template deleted")},onError:()=>f.error("Failed to delete template")}),b=p=>{p.preventDefault(),l.trim()&&h.mutate({name:l.trim(),description:c.trim()||void 0,isTemplate:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Dashboard Templates"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Templates are shared with all users in your organization"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[e.jsx(V,{className:"w-4 h-4 mr-1"})," Create Template"]})]}),N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-surface-600 rounded-full border-t-brand-500"})}):i?.length===0?e.jsxs("div",{className:"text-center py-12 bg-surface-800/50 rounded-lg",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto text-surface-500 mb-4"}),e.jsx("h3",{className:"text-surface-300 font-medium mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-surface-500 text-sm mb-4",children:"Create a template that all users can use as a starting point"}),e.jsxs("button",{onClick:()=>x(!0),className:"btn btn-ghost",children:[e.jsx(V,{className:"w-4 h-4 mr-1"})," Create First Template"]})]}):e.jsx("div",{className:"space-y-3",children:i?.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface-800/50 rounded-lg hover:bg-surface-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-surface-700 rounded",children:e.jsx(Q,{className:"w-5 h-5 text-brand-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-100 font-medium",children:p.name}),p.description&&e.jsx("p",{className:"text-surface-500 text-sm",children:p.description}),e.jsxs("p",{className:"text-surface-600 text-xs mt-1",children:[p.widgets?.length||0," widgets •"," ","Created by ",p.creator?.displayName||"Unknown"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(C,{to:"/dashboards",state:{editTemplate:p.id},className:"btn btn-ghost btn-sm",children:[e.jsx(pe,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsx("button",{onClick:()=>{confirm("Delete this template?")&&o.mutate(p.id)},className:"btn btn-ghost btn-sm text-red-400 hover:text-red-300",disabled:o.isPending,children:e.jsx(O,{className:"w-4 h-4"})})]})]},p.id))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-md font-semibold text-surface-100 mb-4",children:"Template Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-surface-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),e.jsx("span",{children:"Templates appear in the template gallery for all users"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),e.jsx("span",{children:"Users create their own copy when they use a template"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),e.jsx("span",{children:"Changes to templates don't affect existing user dashboards"})]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface-900 rounded-lg shadow-xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100 mb-4",children:"Create Dashboard Template"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:l,onChange:p=>d(p.target.value),className:"input w-full",placeholder:"Executive Overview",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-2",children:"Description (optional)"}),e.jsx("textarea",{value:c,onChange:p=>j(p.target.value),className:"input w-full h-20",placeholder:"A high-level overview for executives..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-ghost",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!l.trim()||h.isPending,className:"btn btn-primary",children:h.isPending?"Creating...":"Create Template"})]})]})]})})]})}const X={scoreWeights:{backgroundCheck:25,training:25,attestation:25,accessReview:25},thresholds:{compliant:80,atRisk:60},requirements:{backgroundCheckRequired:!0,backgroundCheckValidityDays:365,trainingCompletionRequired:!0,trainingOverdueDays:30,attestationRequired:!0,attestationValidityDays:365,mfaRequired:!0},integrationSources:{hris:null,backgroundCheck:null,lms:null,mdm:null,identityProvider:null}};function qe(){const t=E(),[a,x]=u.useState(X),[l,d]=u.useState(!1),[c,j]=u.useState(!1);u.useEffect(()=>{_.getConfig().then(s=>{s.data&&x(m=>({...m,...s.data}))}).catch(()=>{})},[]);const i=(s,m)=>{x(v=>({...v,scoreWeights:{...v.scoreWeights,[s]:m}})),d(!0)},N=(s,m)=>{x(v=>({...v,thresholds:{...v.thresholds,[s]:m}})),d(!0)},h=(s,m)=>{x(v=>({...v,requirements:{...v.requirements,[s]:m}})),d(!0)},o=Object.values(a.scoreWeights).reduce((s,m)=>s+m,0),b=o===100,p=async()=>{if(!b){f.error("Score weights must total 100%");return}j(!0);try{await _.updateConfig({scoreWeights:{backgroundCheck:a.scoreWeights.backgroundCheck,training:a.scoreWeights.training,attestation:a.scoreWeights.attestation,deviceCompliance:0,accessReview:a.scoreWeights.accessReview},thresholds:a.thresholds,requirements:{backgroundCheckRequired:a.requirements.backgroundCheckRequired,backgroundCheckExpiration:a.requirements.backgroundCheckValidityDays,securityTrainingRequired:a.requirements.trainingCompletionRequired,securityTrainingFrequency:a.requirements.trainingOverdueDays,policyAttestationRequired:a.requirements.attestationRequired,accessReviewRequired:a.requirements.mfaRequired}}),f.success("Employee compliance settings saved"),d(!1),t.invalidateQueries({queryKey:["employee-compliance-dashboard"]})}catch{f.error("Failed to save settings")}finally{j(!1)}},n=()=>{x(X),d(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Compliance Score Weights"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Configure how much each category contributes to the overall compliance score. Weights must total 100%."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center justify-between",children:[e.jsx("span",{children:"Background Check"}),e.jsxs("span",{className:"text-surface-500",children:[a.scoreWeights.backgroundCheck,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"50",value:a.scoreWeights.backgroundCheck,onChange:s=>i("backgroundCheck",parseInt(s.target.value)),className:"w-full accent-brand-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center justify-between",children:[e.jsx("span",{children:"Training Completion"}),e.jsxs("span",{className:"text-surface-500",children:[a.scoreWeights.training,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"50",value:a.scoreWeights.training,onChange:s=>i("training",parseInt(s.target.value)),className:"w-full accent-brand-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center justify-between",children:[e.jsx("span",{children:"Policy Attestation"}),e.jsxs("span",{className:"text-surface-500",children:[a.scoreWeights.attestation,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"50",value:a.scoreWeights.attestation,onChange:s=>i("attestation",parseInt(s.target.value)),className:"w-full accent-brand-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center justify-between",children:[e.jsx("span",{children:"Access Review / Device Compliance"}),e.jsxs("span",{className:"text-surface-500",children:[a.scoreWeights.accessReview,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"50",value:a.scoreWeights.accessReview,onChange:s=>i("accessReview",parseInt(s.target.value)),className:"w-full accent-brand-500"})]})]}),e.jsx("div",{className:`p-3 rounded-lg ${b?"bg-green-500/10 border border-green-500/30":"bg-red-500/10 border border-red-500/30"}`,children:e.jsxs("p",{className:`text-sm font-medium ${b?"text-green-400":"text-red-400"}`,children:["Total Weight: ",o,"% ",b?"✓":"(must equal 100%)"]})})]}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Compliance Thresholds"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Define score thresholds for compliance status categories."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Compliant Threshold (≥)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:a.thresholds.compliant,onChange:s=>N("compliant",parseInt(s.target.value)||0),className:"input w-24"}),e.jsx("span",{className:"text-surface-400",children:"% score"})]}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:"Employees scoring at or above this are considered compliant"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"At Risk Threshold (≥)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:a.thresholds.atRisk,onChange:s=>N("atRisk",parseInt(s.target.value)||0),className:"input w-24"}),e.jsx("span",{className:"text-surface-400",children:"% score"})]}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:'Employees scoring between this and compliant are "at risk"'})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-surface-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsxs("span",{children:["Compliant: ≥",a.thresholds.compliant,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsxs("span",{children:["At Risk: ",a.thresholds.atRisk,"-",a.thresholds.compliant-1,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsxs("span",{children:["Non-Compliant: <",a.thresholds.atRisk,"%"]})]})]})]}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Compliance Requirements"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Configure what is required for employee compliance."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-surface-800/50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-surface-200 font-medium",children:"Background Check"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.requirements.backgroundCheckRequired,onChange:s=>h("backgroundCheckRequired",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500"})]})]}),a.requirements.backgroundCheckRequired&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-surface-400 text-sm",children:"Valid for"}),e.jsx("input",{type:"number",min:"30",max:"1095",value:a.requirements.backgroundCheckValidityDays,onChange:s=>h("backgroundCheckValidityDays",parseInt(s.target.value)||365),className:"input w-20 text-sm"}),e.jsx("span",{className:"text-surface-400 text-sm",children:"days"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-800/50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-surface-200 font-medium",children:"Training Completion"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.requirements.trainingCompletionRequired,onChange:s=>h("trainingCompletionRequired",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500"})]})]}),a.requirements.trainingCompletionRequired&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-surface-400 text-sm",children:"Mark overdue after"}),e.jsx("input",{type:"number",min:"1",max:"365",value:a.requirements.trainingOverdueDays,onChange:s=>h("trainingOverdueDays",parseInt(s.target.value)||30),className:"input w-20 text-sm"}),e.jsx("span",{className:"text-surface-400 text-sm",children:"days past due date"})]})]}),e.jsxs("div",{className:"p-4 bg-surface-800/50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-surface-200 font-medium",children:"Policy Attestation"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.requirements.attestationRequired,onChange:s=>h("attestationRequired",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500"})]})]}),a.requirements.attestationRequired&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-surface-400 text-sm",children:"Attestations valid for"}),e.jsx("input",{type:"number",min:"30",max:"1095",value:a.requirements.attestationValidityDays,onChange:s=>h("attestationValidityDays",parseInt(s.target.value)||365),className:"input w-20 text-sm"}),e.jsx("span",{className:"text-surface-400 text-sm",children:"days"})]})]}),e.jsx("div",{className:"p-4 bg-surface-800/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-surface-200 font-medium",children:"MFA Required"}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:"Require multi-factor authentication for all employees"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.requirements.mfaRequired,onChange:s=>h("mfaRequired",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500"})]})]})})]})]}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"Data Sources"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Employee compliance data is gathered from configured integrations. Click a category to view or configure integrations."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs(C,{to:"/integrations?search=HR%20Tools",className:"p-3 bg-surface-800/50 rounded-lg hover:bg-surface-700/50 hover:border-brand-500/50 border border-transparent transition-all cursor-pointer group",children:[e.jsx("p",{className:"text-surface-400 text-xs uppercase tracking-wider mb-1 group-hover:text-brand-400",children:"HRIS / Employee List"}),e.jsx("p",{className:"text-surface-200 text-sm",children:"BambooHR, Workday, ADP, etc."}),e.jsx("p",{className:"text-surface-500 text-xs mt-2 group-hover:text-brand-400",children:"Click to configure →"})]}),e.jsxs(C,{to:"/integrations?search=Background%20Check",className:"p-3 bg-surface-800/50 rounded-lg hover:bg-surface-700/50 hover:border-brand-500/50 border border-transparent transition-all cursor-pointer group",children:[e.jsx("p",{className:"text-surface-400 text-xs uppercase tracking-wider mb-1 group-hover:text-brand-400",children:"Background Check"}),e.jsx("p",{className:"text-surface-200 text-sm",children:"Certn, Checkr, Sterling, etc."}),e.jsx("p",{className:"text-surface-500 text-xs mt-2 group-hover:text-brand-400",children:"Click to configure →"})]}),e.jsxs(C,{to:"/integrations?search=Security%20Awareness",className:"p-3 bg-surface-800/50 rounded-lg hover:bg-surface-700/50 hover:border-brand-500/50 border border-transparent transition-all cursor-pointer group",children:[e.jsx("p",{className:"text-surface-400 text-xs uppercase tracking-wider mb-1 group-hover:text-brand-400",children:"Training / LMS"}),e.jsx("p",{className:"text-surface-200 text-sm",children:"KnowBe4, Proofpoint, Curricula, etc."}),e.jsx("p",{className:"text-surface-500 text-xs mt-2 group-hover:text-brand-400",children:"Click to configure →"})]}),e.jsxs(C,{to:"/integrations?search=MDM",className:"p-3 bg-surface-800/50 rounded-lg hover:bg-surface-700/50 hover:border-brand-500/50 border border-transparent transition-all cursor-pointer group",children:[e.jsx("p",{className:"text-surface-400 text-xs uppercase tracking-wider mb-1 group-hover:text-brand-400",children:"MDM / Device"}),e.jsx("p",{className:"text-surface-200 text-sm",children:"Jamf, Kandji, Intune, etc."}),e.jsx("p",{className:"text-surface-500 text-xs mt-2 group-hover:text-brand-400",children:"Click to configure →"})]}),e.jsxs(C,{to:"/integrations?search=Identity%20Provider",className:"p-3 bg-surface-800/50 rounded-lg hover:bg-surface-700/50 hover:border-brand-500/50 border border-transparent transition-all cursor-pointer group",children:[e.jsx("p",{className:"text-surface-400 text-xs uppercase tracking-wider mb-1 group-hover:text-brand-400",children:"Identity Provider"}),e.jsx("p",{className:"text-surface-200 text-sm",children:"Okta, Azure AD, Google Workspace"}),e.jsx("p",{className:"text-surface-500 text-xs mt-2 group-hover:text-brand-400",children:"Click to configure →"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:n,className:"btn btn-ghost",disabled:!l,children:"Reset to Defaults"}),e.jsx("button",{onClick:p,className:"btn btn-primary",disabled:!l||!b||c,children:c?"Saving...":"Save Settings"})]})]})}function Ie(){const[t,a]=u.useState("disabled"),[x,l]=u.useState(""),[d,c]=u.useState(""),[j,i]=u.useState({riskScoring:!0,categorization:!0,smartSearch:!0,policyDrafting:!1,controlSuggestions:!1}),[N,h]=u.useState(!1),o=async()=>{h(!0),await new Promise(n=>setTimeout(n,1e3)),f.success("AI configuration saved"),h(!1)},b=[{id:"gpt-5",name:"GPT-5 (Most Capable)"},{id:"gpt-5-mini",name:"GPT-5 Mini (Balanced)"},{id:"o3",name:"o3 (Advanced Reasoning)"},{id:"o3-mini",name:"o3-mini (Fast Reasoning)"},{id:"gpt-4o",name:"GPT-4o (Previous Gen)"}],p=[{id:"claude-opus-4-5-20250514",name:"Claude Opus 4.5 (Most Capable)"},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4 (Balanced)"},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku (Fast)"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"AI Provider"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Select an AI provider for intelligent automation features."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>a("disabled"),className:`p-4 rounded-lg border-2 transition-all ${t==="disabled"?"border-brand-500 bg-brand-500/10":"border-surface-700 hover:border-surface-600"}`,children:[e.jsx("p",{className:"text-surface-100 font-medium",children:"Disabled"}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:"No AI features"})]}),e.jsxs("button",{onClick:()=>{a("openai"),c("gpt-5")},className:`p-4 rounded-lg border-2 transition-all ${t==="openai"?"border-brand-500 bg-brand-500/10":"border-surface-700 hover:border-surface-600"}`,children:[e.jsx("p",{className:"text-surface-100 font-medium",children:"OpenAI"}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:"GPT-4, GPT-3.5"})]}),e.jsxs("button",{onClick:()=>{a("anthropic"),c("claude-opus-4-5-20250514")},className:`p-4 rounded-lg border-2 transition-all ${t==="anthropic"?"border-brand-500 bg-brand-500/10":"border-surface-700 hover:border-surface-600"}`,children:[e.jsx("p",{className:"text-surface-100 font-medium",children:"Anthropic"}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:"Claude 3"})]})]}),t!=="disabled"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-surface-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"API Key"}),e.jsx("input",{type:"password",value:x,onChange:n=>l(n.target.value),className:"input mt-1",placeholder:t==="openai"?"sk-...":"sk-ant-..."}),e.jsx("p",{className:"text-surface-500 text-xs mt-1",children:"Your API key is encrypted and stored securely."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Model"}),e.jsx("select",{value:d,onChange:n=>c(n.target.value),className:"input mt-1",children:(t==="openai"?b:p).map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))})]})]})]}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"AI Features"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Enable or disable specific AI-powered features."})]}),e.jsx("div",{className:"space-y-3",children:[{key:"riskScoring",name:"Risk Scoring",desc:"AI-suggested risk likelihood and impact scores"},{key:"categorization",name:"Auto-Categorization",desc:"Automatically categorize and tag items"},{key:"smartSearch",name:"Smart Search",desc:"Natural language search across all modules"},{key:"policyDrafting",name:"Policy Drafting",desc:"Generate policy drafts based on requirements"},{key:"controlSuggestions",name:"Control Suggestions",desc:"Recommend controls for risks and requirements"}].map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-800/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-200 font-medium",children:n.name}),e.jsx("p",{className:"text-surface-500 text-sm",children:n.desc})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j[n.key],onChange:s=>i(m=>({...m,[n.key]:s.target.checked})),disabled:t==="disabled",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-surface-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-500 peer-disabled:opacity-50"})]})]},n.key))})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-surface-100",children:"MCP Server Integration"}),e.jsx("p",{className:"text-surface-400 text-sm mt-1",children:"Configure Model Context Protocol (MCP) servers for advanced AI workflows."})]}),e.jsx(C,{to:"/settings/mcp",className:"btn btn-secondary",children:"Configure MCP →"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"btn btn-primary",disabled:N,children:N?"Saving...":"Save AI Configuration"})})]})}export{Ue as default};
