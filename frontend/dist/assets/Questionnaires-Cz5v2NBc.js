import{r as u,k as p,b as h,j as e,M as n}from"./vendor-CWk44mA8.js";import{b as f,B as g,q as j}from"./index-CiJwl-Bo.js";import{a as y}from"./Skeleton-DVOICtGK.js";import{E as N}from"./EmptyState-DqJSE5Oy.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function S(){const{user:d}=f(),[a,x]=u.useState("all"),r=p(),l=d?.organizationId||"",{data:c=[],isLoading:o}=h({queryKey:["questionnaires",a,l],queryFn:()=>j.list({organizationId:l,...a!=="all"?{status:a}:{}}).then(s=>s.data),enabled:!!l}),m=s=>{if(s.length===0)return 0;const t=s.filter(i=>i.status==="answered"||i.status==="approved").length;return Math.round(t/s.length*100)};return o?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-100",children:"Security Questionnaires"}),e.jsx("p",{className:"mt-1 text-surface-400",children:"Respond to incoming customer security questionnaires"})]})}),e.jsx(y,{rows:8,columns:6})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-100",children:"Security Questionnaires"}),e.jsx("p",{className:"mt-1 text-surface-400",children:"Respond to incoming customer security questionnaires"})]}),e.jsx(g,{onClick:()=>r("/questionnaires/new"),leftIcon:e.jsx(n,{className:"w-5 h-5"}),children:"Log New Request"})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","in_progress","completed"].map(s=>e.jsx("button",{onClick:()=>x(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===s?"bg-brand-600 text-white":"bg-surface-800 text-surface-300 hover:bg-surface-700"}`,children:s==="all"?"All":s.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())},s))}),c.length===0?e.jsx(N,{variant:"checklist",title:"No incoming questionnaires",description:"When customers send security questionnaires, you can log and track them here. Use the knowledge base to quickly answer common questions.",action:{label:"Log New Request",onClick:()=>r("/questionnaires/new"),icon:e.jsx(n,{className:"w-5 h-5"})}}):e.jsx("div",{className:"bg-surface-900 border border-surface-800 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-800 border-b border-surface-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"Customer Request"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"From"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"Completion"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-surface-400 uppercase tracking-wider",children:"Due Date"})]})}),e.jsx("tbody",{className:"divide-y divide-surface-800",children:c.map(s=>{const t=m(s.questions);return e.jsxs("tr",{onClick:()=>r(`/questionnaires/${s.id}`),className:"hover:bg-surface-800 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-surface-100",children:s.title}),e.jsxs("div",{className:"text-sm text-surface-500",children:[s.questions.length," questions"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-surface-300",children:s.requesterName}),s.company&&e.jsx("div",{className:"text-sm text-surface-500",children:s.company})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full capitalize ${s.priority==="urgent"?"bg-red-500/20 text-red-400":s.priority==="high"?"bg-orange-500/20 text-orange-400":s.priority==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:s.priority})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full capitalize ${s.status==="completed"?"bg-green-500/20 text-green-400":s.status==="in_progress"?"bg-blue-500/20 text-blue-400":s.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-surface-700 text-surface-400"}`,children:s.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-surface-100",children:[t,"%"]}),e.jsx("div",{className:"w-24 h-2 bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${t===100?"bg-green-500":t>=50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${t}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-surface-300",children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"â€”"})]},s.id)})})]})})]})}export{S as default};
