import{r as u,b as N,Z as M,E as L,y as F,Y as P,a1 as S,ab as I,j as e,aF as w,aL as E,aJ as A,aD as j,by as R,bz as C}from"./vendor-CWk44mA8.js";import{x as $}from"./index-CiJwl-Bo.js";import{a as U}from"./export-DqfI3kh9.js";import{R as H}from"./RiskHeatMap-qmek_2NP.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const v=[{id:"risk-register",name:"Full Risk Register",description:"Complete list of all risks with details, scores, and treatment status",icon:M,fields:["riskId","title","category","status","likelihood","impact","inherentRisk","treatmentPlan","owner"]},{id:"risk-summary",name:"Risk Summary",description:"High-level overview of risks by category and risk level",icon:L,fields:["category","riskLevel","count","percentageOfTotal"]},{id:"treatment-status",name:"Treatment Status Report",description:"Progress on risk treatments and mitigation activities",icon:F,fields:["riskId","title","treatmentPlan","treatmentStatus","dueDate","owner","progress"]},{id:"risk-trends",name:"Risk Trend Analysis",description:"Historical trends in risk identification, treatment, and closure",icon:P,fields:["period","newRisks","closedRisks","openRisks","avgRiskScore"]},{id:"executive-summary",name:"Executive Summary",description:"Board-ready summary with key metrics and top risks",icon:S,fields:["keyMetrics","topRisks","riskAppetite","recommendations"]},{id:"heat-map",name:"Risk Heat Map",description:"Interactive likelihood vs impact matrix visualization",icon:I,fields:["likelihood","impact","riskLevel","count"]}],z=a=>{switch(a){case"risk-register":return[{key:"riskId",header:"Risk ID"},{key:"title",header:"Title"},{key:"description",header:"Description"},{key:"category",header:"Category",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())},{key:"status",header:"Status",transform:r=>String(r||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())},{key:"likelihood",header:"Likelihood"},{key:"impact",header:"Impact"},{key:"inherentRisk",header:"Inherent Risk",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())},{key:"residualRisk",header:"Residual Risk",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())},{key:"treatmentPlan",header:"Treatment Plan",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())},{key:"owner",header:"Owner"},{key:"createdAt",header:"Created Date",transform:r=>r?new Date(r).toLocaleDateString():""}];case"treatment-status":return[{key:"riskId",header:"Risk ID"},{key:"title",header:"Title"},{key:"treatmentPlan",header:"Treatment Plan",transform:r=>String(r||"None").replace(/\b\w/g,t=>t.toUpperCase())},{key:"status",header:"Status",transform:r=>String(r||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())},{key:"owner",header:"Owner"},{key:"inherentRisk",header:"Risk Level",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())}];case"executive-summary":return[{key:"riskId",header:"Risk ID"},{key:"title",header:"Title"},{key:"inherentRisk",header:"Risk Level",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())},{key:"status",header:"Status",transform:r=>String(r||"").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())},{key:"treatmentPlan",header:"Treatment",transform:r=>String(r||"None").replace(/\b\w/g,t=>t.toUpperCase())}];case"heat-map":return[{key:"riskId",header:"Risk ID"},{key:"title",header:"Title"},{key:"likelihood",header:"Likelihood"},{key:"impact",header:"Impact"},{key:"inherentRisk",header:"Risk Level",transform:r=>String(r||"").replace(/\b\w/g,t=>t.toUpperCase())}];default:return[{key:"riskId",header:"Risk ID"},{key:"title",header:"Title"},{key:"category",header:"Category"},{key:"inherentRisk",header:"Risk Level"},{key:"status",header:"Status"}]}};function O(a,r=6){const t=new Date,d=[];for(let c=r-1;c>=0;c--){const i=new Date(t.getFullYear(),t.getMonth()-c,1),o=i.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),n=new Date(i.getFullYear(),i.getMonth()+1,0),m=a.filter(x=>new Date(x.createdAt)<=n),h=m.filter(x=>x.status==="open"||x.status==="in_treatment").length,l=m.filter(x=>x.status==="mitigated"||x.status==="accepted").length,b=m.filter(x=>x.inherentRisk==="critical"||x.inherentRisk==="high").length,k=Math.floor(Math.random()*3)-1;d.push({month:o,openRisks:Math.max(0,h+k),mitigatedRisks:Math.max(0,l+k),criticalHighRisks:Math.max(0,b),totalRisks:m.length})}return d}function _(a,r,t,d,c){const i=v.find(l=>l.id===a)?.name||"Risk Report",o=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});let n=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${i}</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 40px; color: #333; }
        h1 { color: #1a1a1a; border-bottom: 2px solid #10b981; padding-bottom: 10px; }
        h2 { color: #374151; margin-top: 30px; }
        .meta { color: #6b7280; font-size: 14px; margin-bottom: 20px; }
        .filters { background: #f3f4f6; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        th { background: #f9fafb; font-weight: 600; }
        .stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }
        .stat-card { background: #f9fafb; padding: 20px; border-radius: 8px; text-align: center; }
        .stat-value { font-size: 28px; font-weight: bold; }
        .stat-label { color: #6b7280; font-size: 12px; margin-top: 5px; }
        .critical { color: #ef4444; }
        .high { color: #f97316; }
        .medium { color: #f59e0b; }
        .low { color: #10b981; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 500; }
        .badge-critical { background: #fef2f2; color: #ef4444; }
        .badge-high { background: #fff7ed; color: #f97316; }
        .badge-medium { background: #fffbeb; color: #f59e0b; }
        .badge-low { background: #ecfdf5; color: #10b981; }
        @media print { body { padding: 20px; } }
      </style>
    </head>
    <body>
      <h1>${i}</h1>
      <div class="meta">
        Generated on: ${o}<br>
        ${d.start||d.end?`Date Range: ${d.start||"Start"} to ${d.end||"End"}`:"All time data"}
      </div>
  `;const m=[];c.category&&m.push(`Category: ${c.category}`),c.riskLevel&&m.push(`Risk Level: ${c.riskLevel}`),c.status&&m.push(`Status: ${c.status}`),m.length>0&&(n+=`<div class="filters"><strong>Filters Applied:</strong> ${m.join(" | ")}</div>`),a==="executive-summary"&&(n+=`
      <h2>Key Metrics</h2>
      <div class="stat-grid">
        <div class="stat-card">
          <div class="stat-value">${t?.totalRisks||r.length}</div>
          <div class="stat-label">Total Risks</div>
        </div>
        <div class="stat-card">
          <div class="stat-value critical">${t?.openRisks||r.filter(l=>l.status==="open").length}</div>
          <div class="stat-label">Open Risks</div>
        </div>
        <div class="stat-card">
          <div class="stat-value medium">${t?.inTreatment||r.filter(l=>l.status==="in_treatment").length}</div>
          <div class="stat-label">In Treatment</div>
        </div>
        <div class="stat-card">
          <div class="stat-value low">${t?.mitigatedThisMonth||r.filter(l=>l.status==="mitigated").length}</div>
          <div class="stat-label">Mitigated</div>
        </div>
      </div>
      <h2>Top Risks Requiring Attention</h2>
    `);const h=a==="executive-summary"?r.filter(l=>l.inherentRisk==="critical"||l.inherentRisk==="high").slice(0,10):r;return n+=`
    <table>
      <thead>
        <tr>
          <th>Risk ID</th>
          <th>Title</th>
          ${a!=="heat-map"?"<th>Category</th>":""}
          <th>Risk Level</th>
          <th>Status</th>
          ${a==="treatment-status"?"<th>Treatment Plan</th>":""}
        </tr>
      </thead>
      <tbody>
  `,h.forEach(l=>{const b=`badge-${l.inherentRisk}`;n+=`
      <tr>
        <td>${l.riskId}</td>
        <td>${l.title}</td>
        ${a!=="heat-map"?`<td>${l.category}</td>`:""}
        <td><span class="badge ${b}">${l.inherentRisk}</span></td>
        <td>${l.status?.replace(/_/g," ")}</td>
        ${a==="treatment-status"?`<td>${l.treatmentPlan||"None"}</td>`:""}
      </tr>
    `}),n+=`
      </tbody>
    </table>
    <div class="meta" style="margin-top: 30px; font-size: 12px;">
      Total records: ${h.length} | Report generated by GigaChad GRC
    </div>
    </body>
    </html>
  `,n}function ee(){const[a,r]=u.useState(null),[t,d]=u.useState({start:"",end:""}),[c,i]=u.useState({category:"",riskLevel:"",status:""}),[o,n]=u.useState("csv"),[m,h]=u.useState(!1),{data:l}=N({queryKey:["risk-dashboard"],queryFn:async()=>(await $.getDashboard()).data}),{data:b,isLoading:k}=N({queryKey:["risks","report",c,t],queryFn:async()=>(await $.list({...c,limit:1e3})).data,enabled:!!a}),x=u.useMemo(()=>{let s=b?.risks||[];if(t.start){const g=new Date(t.start);s=s.filter(p=>new Date(p.createdAt)>=g)}if(t.end){const g=new Date(t.end);g.setHours(23,59,59,999),s=s.filter(p=>new Date(p.createdAt)<=g)}return s},[b?.risks,t]),D=u.useMemo(()=>O(x),[x]),T=async()=>{if(!a||x.length===0){j.error("No data available to export");return}h(!0);try{const s=v.find(p=>p.id===a)?.name||"risk-report",g=s.toLowerCase().replace(/\s+/g,"-");if(o==="pdf"){const p=_(a,x,l,t,c),f=window.open("","_blank");f&&(f.document.write(p),f.document.close(),f.focus(),setTimeout(()=>{f.print()},250)),j.success("PDF report opened for printing")}else{const p=z(a);await U({filename:g,columns:p,data:x,format:o==="excel"?"xlsx":"csv",sheetName:s}),j.success(`${o.toUpperCase()} report downloaded successfully`)}}catch(s){j.error("Failed to export report"),console.error("Export error:",s)}finally{h(!1)}},y=v.find(s=>s.id===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Risk Reports"}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 mt-1",children:"Generate and export risk reports"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-5",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Report Templates"}),e.jsx("div",{className:"space-y-2",children:v.map(s=>e.jsx("button",{onClick:()=>r(s.id),className:`w-full p-3 rounded-lg border text-left transition-all ${a===s.id?"bg-brand-500/10 border-brand-500/50":"bg-gray-50 dark:bg-surface-700/50 border-gray-200 dark:border-surface-700 hover:border-gray-300 dark:hover:border-surface-600 hover:bg-gray-100 dark:hover:bg-surface-700"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${a===s.id?"bg-brand-500/20":"bg-gray-200 dark:bg-surface-600"}`,children:e.jsx(s.icon,{className:`w-4 h-4 ${a===s.id?"text-brand-400":"text-gray-500 dark:text-surface-400"}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`font-medium text-sm ${a===s.id?"text-brand-500 dark:text-brand-400":"text-gray-900 dark:text-white"}`,children:s.name}),e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-xs mt-0.5 line-clamp-2",children:s.description})]})]})},s.id))})]})}),e.jsx("div",{className:"lg:col-span-8 space-y-5",children:a&&y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-brand-500/20",children:e.jsx(y.icon,{className:"w-5 h-5 text-brand-500 dark:text-brand-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:y.name}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm",children:y.description})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 dark:text-surface-500 mb-1.5",children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"Start Date"]}),e.jsx("input",{type:"date",value:t.start,onChange:s=>d(g=>({...g,start:s.target.value})),className:"w-full px-3 py-2 bg-gray-50 dark:bg-surface-700 border border-gray-300 dark:border-surface-600 rounded-lg text-gray-900 dark:text-white text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 dark:text-surface-500 mb-1.5",children:[e.jsx(w,{className:"w-3 h-3 inline mr-1"}),"End Date"]}),e.jsx("input",{type:"date",value:t.end,onChange:s=>d(g=>({...g,end:s.target.value})),className:"w-full px-3 py-2 bg-gray-50 dark:bg-surface-700 border border-gray-300 dark:border-surface-600 rounded-lg text-gray-900 dark:text-white text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 dark:text-surface-500 mb-1.5",children:[e.jsx(E,{className:"w-3 h-3 inline mr-1"}),"Category"]}),e.jsxs("select",{value:c.category,onChange:s=>i(g=>({...g,category:s.target.value})),className:"w-full px-3 py-2 bg-gray-50 dark:bg-surface-700 border border-gray-300 dark:border-surface-600 rounded-lg text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"security",children:"Security"}),e.jsx("option",{value:"compliance",children:"Compliance"}),e.jsx("option",{value:"operational",children:"Operational"}),e.jsx("option",{value:"financial",children:"Financial"}),e.jsx("option",{value:"strategic",children:"Strategic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-surface-500 mb-1.5",children:"Risk Level"}),e.jsxs("select",{value:c.riskLevel,onChange:s=>i(g=>({...g,riskLevel:s.target.value})),className:"w-full px-3 py-2 bg-gray-50 dark:bg-surface-700 border border-gray-300 dark:border-surface-600 rounded-lg text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-surface-500 mb-1.5",children:"Status"}),e.jsxs("select",{value:c.status,onChange:s=>i(g=>({...g,status:s.target.value})),className:"w-full px-3 py-2 bg-gray-50 dark:bg-surface-700 border border-gray-300 dark:border-surface-600 rounded-lg text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_treatment",children:"In Treatment"}),e.jsx("option",{value:"mitigated",children:"Mitigated"}),e.jsx("option",{value:"accepted",children:"Accepted"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-surface-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-surface-500",children:"Format:"}),e.jsx("div",{className:"flex gap-1",children:["csv","excel","pdf"].map(s=>e.jsx("button",{onClick:()=>n(s),className:`px-3 py-1.5 rounded text-xs font-medium transition-colors ${o===s?"bg-brand-500 text-white":"bg-gray-100 dark:bg-surface-700 text-gray-600 dark:text-surface-400 hover:bg-gray-200 dark:hover:bg-surface-600 hover:text-gray-700 dark:hover:text-surface-300"}`,children:s.toUpperCase()},s))})]}),e.jsxs("button",{onClick:T,disabled:m||x.length===0,className:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm font-medium transition-colors",children:[e.jsx(A,{className:`w-4 h-4 ${m?"animate-bounce":""}`}),m?"Exporting...":"Export Report"]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-surface-500",children:[x.length," risk",x.length!==1?"s":""," matching current filters",(t.start||t.end||c.category||c.riskLevel||c.status)&&e.jsx("button",{onClick:()=>{d({start:"",end:""}),i({category:"",riskLevel:"",status:""})},className:"ml-2 text-brand-500 dark:text-brand-400 hover:text-brand-600 dark:hover:text-brand-300",children:"Clear filters"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-5",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Preview"}),k?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-surface-400",children:"Loading preview..."}):e.jsxs("div",{children:[a==="executive-summary"&&e.jsx(q,{data:l,risks:x}),a==="risk-register"&&e.jsx(B,{risks:x}),a==="risk-summary"&&e.jsx(G,{data:l,risks:x}),a==="treatment-status"&&e.jsx(Y,{risks:x}),a==="risk-trends"&&e.jsx(K,{trendData:D}),a==="heat-map"&&e.jsx(H,{risks:x,showLegend:!0})]})]})]}):e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-12 text-center",children:[e.jsx(S,{className:"w-12 h-12 text-gray-400 dark:text-surface-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-surface-400 text-lg font-medium",children:"Select a Report Template"}),e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-sm mt-1",children:"Choose a template from the left panel to configure and generate your report"})]})})]})]})}function q({data:a,risks:r}){const t=r.filter(d=>d.inherentRisk==="critical"||d.inherentRisk==="high").slice(0,5);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a?.totalRisks||r.length}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Total Risks"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-2xl font-bold text-red-500 dark:text-red-400",children:a?.openRisks||r.filter(d=>d.status==="open").length}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Open"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-2xl font-bold text-amber-500 dark:text-amber-400",children:a?.inTreatment||r.filter(d=>d.status==="in_treatment").length}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"In Treatment"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-500 dark:text-emerald-400",children:a?.mitigatedThisMonth||r.filter(d=>d.status==="mitigated").length}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Mitigated"})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium text-sm mb-3",children:"Top Critical/High Risks"}),e.jsx("div",{className:"space-y-2",children:t.map(d=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 dark:border-surface-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${d.inherentRisk==="critical"?"bg-red-500":"bg-orange-500"}`,children:d.inherentRisk}),e.jsx("span",{className:"text-gray-900 dark:text-white text-sm",children:d.title})]}),e.jsx("span",{className:"text-gray-500 dark:text-surface-400 text-xs capitalize",children:d.status?.replace(/_/g," ")})]},d.id))})]})]})}function B({risks:a}){return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-surface-400 border-b border-gray-200 dark:border-surface-700",children:[e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Risk ID"}),e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Title"}),e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Category"}),e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Risk Level"}),e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Status"})]})}),e.jsx("tbody",{children:a.slice(0,5).map(r=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-surface-700/50",children:[e.jsx("td",{className:"py-2.5 text-brand-500 dark:text-brand-400 font-mono text-xs",children:r.riskId}),e.jsx("td",{className:"py-2.5 text-gray-900 dark:text-white text-sm",children:r.title}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-surface-300 capitalize text-sm",children:r.category}),e.jsx("td",{className:"py-2.5",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white capitalize ${r.inherentRisk==="critical"?"bg-red-500":r.inherentRisk==="high"?"bg-orange-500":r.inherentRisk==="medium"?"bg-amber-500":"bg-emerald-500"}`,children:r.inherentRisk})}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-surface-300 capitalize text-sm",children:r.status?.replace(/_/g," ")})]},r.id))})]}),a.length>5&&e.jsxs("p",{className:"text-gray-500 dark:text-surface-500 text-xs mt-3",children:["... and ",a.length-5," more rows in the full report"]}),a.length===0&&e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-sm text-center py-6",children:"No risks found with current filters"})]})}function G({data:a,risks:r}){const t=r.reduce((i,o)=>(i[o.category]=(i[o.category]||0)+1,i),{}),d=Object.entries(t).map(([i,o])=>({category:i,count:o})).sort((i,o)=>o.count-i.count),c=r.reduce((i,o)=>(i[o.inherentRisk]=(i[o.inherentRisk]||0)+1,i),{});return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium text-sm mb-3",children:"By Risk Level"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["critical","high","medium","low"].map(i=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c[i]||a?.byRiskLevel?.find(o=>o.level===i)?.count||0}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs capitalize mt-1",children:i})]},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium text-sm mb-3",children:"By Category"}),e.jsxs("div",{className:"space-y-2",children:[d.slice(0,4).map(i=>e.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-gray-200 dark:border-surface-700/50",children:[e.jsx("span",{className:"text-gray-600 dark:text-surface-300 capitalize text-sm",children:i.category}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium text-sm",children:i.count})]},i.category)),d.length===0&&e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-sm",children:"No category data available"})]})]})]})}function Y({risks:a}){const r={mitigate:a.filter(t=>t.treatmentPlan==="mitigate").length,accept:a.filter(t=>t.treatmentPlan==="accept").length,transfer:a.filter(t=>t.treatmentPlan==="transfer").length,avoid:a.filter(t=>t.treatmentPlan==="avoid").length};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.mitigate}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Mitigating"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.accept}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Accepting"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.transfer}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Transferring"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg text-center border border-gray-200 dark:border-surface-600/50",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.avoid}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-xs mt-1",children:"Avoiding"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium text-sm mb-3",children:"Risks with Treatment Plans"}),e.jsxs("div",{className:"space-y-2",children:[a.filter(t=>t.treatmentPlan).slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 dark:border-surface-700/50",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 dark:text-white text-sm",children:t.title}),e.jsxs("span",{className:"text-gray-500 dark:text-surface-500 text-xs ml-2",children:["(",t.riskId,")"]})]}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-brand-500/20 text-brand-500 dark:text-brand-400 capitalize",children:t.treatmentPlan})]},t.id)),a.filter(t=>t.treatmentPlan).length===0&&e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-sm",children:"No risks with treatment plans"})]})]})]})}function K({trendData:a}){if(a.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-surface-400",children:"No trend data available"});const r=Math.max(...a.map(n=>Math.max(n.openRisks,n.mitigatedRisks,n.totalRisks))),t=160,d=a[a.length-1],c=a[a.length-2]||d,i=d.openRisks-c.openRisks,o=d.mitigatedRisks-c.mitigatedRisks;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg border border-gray-200 dark:border-surface-600/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-surface-400 text-xs",children:"Open Risks"}),i!==0&&e.jsxs("span",{className:`flex items-center text-xs ${i>0?"text-red-500 dark:text-red-400":"text-emerald-500 dark:text-emerald-400"}`,children:[i>0?e.jsx(R,{className:"w-3 h-3 mr-0.5"}):e.jsx(C,{className:"w-3 h-3 mr-0.5"}),Math.abs(i)]})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:d.openRisks})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg border border-gray-200 dark:border-surface-600/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-surface-400 text-xs",children:"Mitigated"}),o!==0&&e.jsxs("span",{className:`flex items-center text-xs ${o>0?"text-emerald-500 dark:text-emerald-400":"text-amber-500 dark:text-amber-400"}`,children:[o>0?e.jsx(R,{className:"w-3 h-3 mr-0.5"}):e.jsx(C,{className:"w-3 h-3 mr-0.5"}),Math.abs(o)]})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:d.mitigatedRisks})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg border border-gray-200 dark:border-surface-600/50",children:[e.jsx("span",{className:"text-gray-500 dark:text-surface-400 text-xs",children:"Critical/High"}),e.jsx("p",{className:"text-xl font-bold text-red-500 dark:text-red-400 mt-1",children:d.criticalHighRisks})]})]}),e.jsxs("div",{className:"bg-gray-100/50 dark:bg-surface-700/30 rounded-lg p-4 border border-gray-200 dark:border-surface-600/30",children:[e.jsx("div",{className:"flex items-end justify-between gap-2",style:{height:t},children:a.map((n,m)=>{const h=r>0?n.openRisks/r*(t-30):0,l=r>0?n.mitigatedRisks/r*(t-30):0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex items-end gap-1 h-full",children:[e.jsx("div",{className:"w-3 bg-red-500/70 rounded-t transition-all hover:bg-red-500",style:{height:Math.max(4,h)},title:`Open: ${n.openRisks}`}),e.jsx("div",{className:"w-3 bg-emerald-500/70 rounded-t transition-all hover:bg-emerald-500",style:{height:Math.max(4,l)},title:`Mitigated: ${n.mitigatedRisks}`})]}),e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-surface-500",children:n.month})]},m)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-3 border-t border-gray-200 dark:border-surface-700/50",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500/70 rounded"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-surface-400",children:"Open Risks"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500/70 rounded"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-surface-400",children:"Mitigated"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium text-sm mb-3",children:"Monthly Breakdown"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-surface-400 border-b border-gray-200 dark:border-surface-700",children:[e.jsx("th",{className:"pb-2 text-xs font-medium",children:"Month"}),e.jsx("th",{className:"pb-2 text-xs font-medium text-right",children:"Total"}),e.jsx("th",{className:"pb-2 text-xs font-medium text-right",children:"Open"}),e.jsx("th",{className:"pb-2 text-xs font-medium text-right",children:"Mitigated"}),e.jsx("th",{className:"pb-2 text-xs font-medium text-right",children:"Critical/High"})]})}),e.jsx("tbody",{children:a.slice().reverse().map((n,m)=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-surface-700/50",children:[e.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:n.month}),e.jsx("td",{className:"py-2 text-gray-600 dark:text-surface-300 text-right",children:n.totalRisks}),e.jsx("td",{className:"py-2 text-red-500 dark:text-red-400 text-right",children:n.openRisks}),e.jsx("td",{className:"py-2 text-emerald-500 dark:text-emerald-400 text-right",children:n.mitigatedRisks}),e.jsx("td",{className:"py-2 text-amber-500 dark:text-amber-400 text-right",children:n.criticalHighRisks})]},m))})]})})]})]})}export{ee as default};
