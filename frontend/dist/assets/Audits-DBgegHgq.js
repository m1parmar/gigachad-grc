import{k as f,r as n,b as h,j as e,M as o,l as g,q as j,L as v}from"./vendor-CWk44mA8.js";import{B as d,U as b}from"./index-CiJwl-Bo.js";import{a as N}from"./Skeleton-DVOICtGK.js";import{E as w}from"./ExportDropdown-ClBGGM80.js";import{e as y}from"./export-DqfI3kh9.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const C={planning:"bg-blue-100 text-blue-800",fieldwork:"bg-yellow-100 text-yellow-800",testing:"bg-orange-100 text-orange-800",reporting:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800"},S={internal:"Internal",external:"External",surveillance:"Surveillance",certification:"Certification"};function I(){const i=f(),[t,x]=n.useState(""),[r,u]=n.useState(""),[l,m]=n.useState(""),{data:p=[],isLoading:c}=h({queryKey:["audits",r,l],queryFn:()=>b.list({status:r||void 0,auditType:l||void 0}).then(s=>s.data)}),a=p.filter(s=>s.name.toLowerCase().includes(t.toLowerCase())||s.auditId.toLowerCase().includes(t.toLowerCase())||s.framework?.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-surface-100",children:"Audits"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Manage internal and external compliance audits"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(w,{data:a,columns:y.audits,filename:"audits",sheetName:"Audits",disabled:c||a.length===0}),e.jsx(d,{onClick:()=>i("/audits/new"),leftIcon:e.jsx(o,{className:"w-5 h-5"}),children:"New Audit"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(g,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-surface-500"}),e.jsx("input",{type:"text",placeholder:"Search audits...",value:t,onChange:s=>x(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 placeholder-surface-500 focus:outline-none focus:ring-2 focus:ring-brand-500"})]}),e.jsxs("select",{value:r,onChange:s=>u(s.target.value),className:"px-4 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"fieldwork",children:"Fieldwork"}),e.jsx("option",{value:"testing",children:"Testing"}),e.jsx("option",{value:"reporting",children:"Reporting"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:l,onChange:s=>m(s.target.value),className:"px-4 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:ring-2 focus:ring-brand-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"internal",children:"Internal"}),e.jsx("option",{value:"external",children:"External"}),e.jsx("option",{value:"surveillance",children:"Surveillance"}),e.jsx("option",{value:"certification",children:"Certification"})]})]}),c?e.jsx(N,{rows:5,columns:4}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-12 h-12 mx-auto text-surface-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-surface-300 mb-2",children:"No audits found"}),e.jsx("p",{className:"text-surface-500 mb-4",children:"Get started by creating your first audit"}),e.jsx(d,{onClick:()=>i("/audits/new"),leftIcon:e.jsx(o,{className:"w-5 h-5"}),children:"New Audit"})]}):e.jsx("div",{className:"grid gap-4",children:a.map(s=>e.jsxs(v,{to:`/audits/${s.id}`,className:"block bg-surface-800 border border-surface-700 rounded-lg p-6 hover:border-brand-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-100",children:s.name}),e.jsxs("span",{className:"text-sm text-surface-500",children:["#",s.auditId]}),s.isExternal&&e.jsx("span",{className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-xs font-medium",children:"External"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-surface-400",children:[e.jsx("span",{children:S[s.auditType]||s.auditType}),s.framework&&e.jsxs("span",{children:["• ",s.framework]}),s.plannedStartDate&&e.jsxs("span",{children:["• ",new Date(s.plannedStartDate).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${C[s.status]}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-4 border-t border-surface-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-surface-500 mb-1",children:"Requests"}),e.jsx("div",{className:"text-lg font-semibold text-surface-100",children:s._count.requests})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-surface-500 mb-1",children:"Evidence"}),e.jsx("div",{className:"text-lg font-semibold text-surface-100",children:s._count.evidence})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-surface-500 mb-1",children:"Tests"}),e.jsx("div",{className:"text-lg font-semibold text-surface-100",children:s._count.testResults})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-surface-500 mb-1",children:"Findings"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("div",{className:"text-lg font-semibold text-surface-100",children:s._count.findings}),s.criticalFindings>0&&e.jsxs("span",{className:"text-xs text-red-400",children:["(",s.criticalFindings," critical)"]})]})]})]})]},s.id))})]})}export{I as default};
