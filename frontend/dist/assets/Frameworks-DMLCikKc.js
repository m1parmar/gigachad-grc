import{u as k,r as x,b as C,c as p,j as e,M as j,z as N,m as F,aD as o,L as D,h as S,B as b}from"./vendor-CWk44mA8.js";import{B as c,f as u}from"./index-CiJwl-Bo.js";import{d as q}from"./Skeleton-DVOICtGK.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function $(){const t=k(),[d,a]=x.useState(!1),[n,i]=x.useState(null),[r,l]=x.useState({name:"",type:"",version:"",description:""}),{data:m,isLoading:g}=C({queryKey:["frameworks"],queryFn:()=>u.list().then(s=>s.data)}),f=p({mutationFn:s=>u.create(s),onSuccess:()=>{t.invalidateQueries({queryKey:["frameworks"]}),a(!1),l({name:"",type:"",version:"",description:""}),o.success("Framework created successfully")},onError:()=>{o.error("Failed to create framework")}}),h=p({mutationFn:s=>u.delete(s),onSuccess:()=>{t.invalidateQueries({queryKey:["frameworks"]}),i(null),o.success("Framework deleted successfully")},onError:()=>{o.error("Failed to delete framework")}}),v=s=>{s.preventDefault(),f.mutate(r)};return g?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"Frameworks"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Track your compliance readiness across regulatory frameworks"})]})}),e.jsx(q,{count:6})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"Frameworks"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Track your compliance readiness across regulatory frameworks"})]}),e.jsx(c,{onClick:()=>a(!0),leftIcon:e.jsx(j,{className:"w-5 h-5"}),children:"Create Framework"})]}),m&&m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsx(R,{framework:s,onDelete:(y,w)=>i({id:y,name:w})},s.id))}):e.jsxs("div",{className:"card flex flex-col items-center justify-center py-16",children:[e.jsx(N,{className:"w-16 h-16 mb-4 text-surface-500"}),e.jsx("h3",{className:"text-lg font-medium text-surface-200 mb-2",children:"No frameworks yet"}),e.jsx("p",{className:"text-surface-400 text-center mb-6 max-w-md",children:"Get started by creating your first compliance framework."}),e.jsx(c,{onClick:()=>a(!0),leftIcon:e.jsx(j,{className:"w-5 h-5"}),className:"text-base px-6 py-3",children:"Create Your First Framework"})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-surface-100",children:"Create Framework"}),e.jsx("button",{onClick:()=>a(!1),className:"text-surface-400 hover:text-surface-200",children:e.jsx(F,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Framework Name *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:s=>l({...r,name:s.target.value}),placeholder:"e.g., SOC 2, ISO 27001, GDPR",className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Type *"}),e.jsx("input",{type:"text",required:!0,value:r.type,onChange:s=>l({...r,type:s.target.value}),placeholder:"e.g., Security & Privacy, Data Protection",className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Version"}),e.jsx("input",{type:"text",value:r.version,onChange:s=>l({...r,version:s.target.value}),placeholder:"e.g., 2017, 2022, 1.0",className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:s=>l({...r,description:s.target.value}),placeholder:"Brief description of the framework...",rows:3,className:"input w-full"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{type:"button",variant:"secondary",onClick:()=>a(!1),className:"flex-1",children:"Cancel"}),e.jsx(c,{type:"submit",isLoading:f.isPending,className:"flex-1",children:"Create Framework"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-100 mb-2",children:"Delete Framework"}),e.jsxs("p",{className:"text-surface-400 mb-6",children:['Are you sure you want to delete "',n.name,'"? This will also delete all requirements and mappings associated with this framework. This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{variant:"secondary",onClick:()=>i(null),children:"Cancel"}),e.jsx(c,{variant:"danger",onClick:()=>h.mutate(n.id),isLoading:h.isPending,children:"Delete"})]})]})})]})}function R({framework:t,onDelete:d}){const a=t.readiness?.score||0,n=a>=80?"text-green-400":a>=50?"text-yellow-400":"text-red-400",i=a>=80?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500",r=l=>{l.preventDefault(),l.stopPropagation(),d(t.id,t.name)};return e.jsxs(D,{to:`/frameworks/${t.id}`,className:"card p-6 hover:border-surface-700 transition-colors group relative",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 bg-red-600/0 text-surface-500 rounded-lg hover:bg-red-600/20 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",title:"Delete framework",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start justify-between mb-4 pr-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-brand-600/20 rounded-lg",children:e.jsx(N,{className:"w-6 h-6 text-brand-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-surface-100 group-hover:text-brand-400 transition-colors",children:t.name}),e.jsxs("p",{className:"text-xs text-surface-500",children:["Version ",t.version]})]})]}),e.jsx("span",{className:"badge badge-info text-xs uppercase",children:t.type})]}),e.jsx("p",{className:"text-sm text-surface-400 line-clamp-2 mb-4",children:t.description}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-surface-400",children:"Readiness Score"}),e.jsxs("span",{className:b("text-lg font-bold",n),children:[a,"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:b("progress-fill",i),style:{width:`${a}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-surface-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-surface-500",children:"Requirements"}),e.jsx("p",{className:"text-sm font-medium text-surface-200",children:t.requirementCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-surface-500",children:"Mapped Controls"}),e.jsx("p",{className:"text-sm font-medium text-surface-200",children:t.mappedControlCount||0})]})]}),t.lastAssessment&&e.jsx("div",{className:"mt-4 pt-4 border-t border-surface-800",children:e.jsxs("p",{className:"text-xs text-surface-500",children:["Last assessed:"," ",new Date(t.lastAssessment.createdAt).toLocaleDateString()]})})]})}export{$ as default};
