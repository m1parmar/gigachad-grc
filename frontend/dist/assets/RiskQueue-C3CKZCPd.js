import{r as f,b as r,aa as g,v as j,aC as v,S as x,j as e,L as N,T as b}from"./vendor-CWk44mA8.js";import{x as n}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function q(){const[t,h]=f.useState("assessments"),a=localStorage.getItem("userId")||"",{data:c}=r({queryKey:["risk-queue","assessments",a],queryFn:async()=>(await n.list({status:"risk_analysis_in_progress",limit:50})).data}),{data:i}=r({queryKey:["risk-queue","treatments",a],queryFn:async()=>(await n.list({status:"treatment_decision_review",limit:50})).data}),{data:l}=r({queryKey:["risk-queue","approvals",a],queryFn:async()=>(await n.list({status:"executive_approval",limit:50})).data}),{data:d}=r({queryKey:["risk-queue","reviews",a],queryFn:async()=>(await n.list({status:"grc_approval",limit:50})).data}),o=[{key:"assessments",label:"My Assessments",count:c?.risks?.length||0,icon:g,color:"text-amber-400"},{key:"treatments",label:"Treatment Decisions",count:i?.risks?.length||0,icon:j,color:"text-orange-400"},{key:"approvals",label:"Executive Approvals",count:l?.risks?.length||0,icon:v,color:"text-purple-400"},{key:"reviews",label:"GRC Reviews",count:d?.risks?.length||0,icon:x,color:"text-cyan-400"}],u=()=>{switch(t){case"assessments":return c?.risks||[];case"treatments":return i?.risks||[];case"approvals":return l?.risks||[];case"reviews":return d?.risks||[];default:return[]}},m=s=>{switch(s){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-amber-500";case"low":return"bg-emerald-500";default:return"bg-surface-500"}},p=()=>{switch(t){case"assessments":return"Complete Assessment";case"treatments":return"Make Decision";case"approvals":return"Review & Approve";case"reviews":return"Review Assessment";default:return"View"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"My Risk Queue"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Tasks and actions awaiting your attention"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(s=>e.jsx("button",{onClick:()=>h(s.key),className:`p-4 rounded-xl border transition-colors text-left ${t===s.key?"bg-brand-500/20 border-brand-500":"bg-surface-800 border-surface-700 hover:border-surface-600"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t===s.key?"bg-brand-500/30":"bg-surface-700"}`,children:e.jsx(s.icon,{className:`w-5 h-5 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.count}),e.jsx("p",{className:"text-sm text-surface-400",children:s.label})]})]})},s.key))}),e.jsxs("div",{className:"bg-surface-800 rounded-xl border border-surface-700",children:[e.jsx("div",{className:"p-4 border-b border-surface-700",children:e.jsx("h2",{className:"text-lg font-medium text-white",children:o.find(s=>s.key===t)?.label})}),e.jsx("div",{className:"divide-y divide-surface-700",children:u().length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(x,{className:"w-12 h-12 text-emerald-400 mx-auto mb-3"}),e.jsx("p",{className:"text-surface-400",children:"No items in this queue"}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:"You're all caught up!"})]}):u().map(s=>e.jsx("div",{className:"p-4 hover:bg-surface-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${m(s.inherentRisk)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-brand-400 font-mono text-sm",children:s.riskId}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${m(s.inherentRisk)} text-white`,children:s.inherentRisk})]}),e.jsx("p",{className:"text-white font-medium mt-1 truncate",children:s.title}),e.jsx("p",{className:"text-surface-400 text-sm truncate",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-surface-500",children:[e.jsxs("span",{children:["Category: ",s.category]}),e.jsxs("span",{children:["Created: ",new Date(s.createdAt).toLocaleDateString()]}),s.treatmentDueDate&&e.jsxs("span",{className:"text-amber-400",children:["Due: ",new Date(s.treatmentDueDate).toLocaleDateString()]})]})]}),e.jsxs(N,{to:`/risks/${s.id}`,className:"flex items-center gap-2 px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors shrink-0",children:[p(),e.jsx(b,{className:"w-4 h-4"})]})]})},s.id))})]}),e.jsxs("div",{className:"bg-surface-800 rounded-xl border border-surface-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Queue Tips"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-amber-400 font-bold",children:"1"})}),e.jsxs("p",{className:"text-surface-400",children:[e.jsx("strong",{className:"text-surface-200",children:"Assessments:"})," Complete risk analysis including likelihood, impact, and recommended treatment."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-orange-400 font-bold",children:"2"})}),e.jsxs("p",{className:"text-surface-400",children:[e.jsx("strong",{className:"text-surface-200",children:"Treatments:"})," Decide how to handle the risk - mitigate, accept, transfer, or avoid."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-purple-400 font-bold",children:"3"})}),e.jsxs("p",{className:"text-surface-400",children:[e.jsx("strong",{className:"text-surface-200",children:"Approvals:"})," Executive review required for high-risk accept/transfer/avoid decisions."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cyan-500/20 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-cyan-400 font-bold",children:"4"})}),e.jsxs("p",{className:"text-surface-400",children:[e.jsx("strong",{className:"text-surface-200",children:"Reviews:"})," GRC team validates assessments before treatment decisions."]})]})]})]})]})}export{q as default};
