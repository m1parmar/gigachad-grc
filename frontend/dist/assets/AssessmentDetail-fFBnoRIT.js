import{aS as v,k as g,r as d,j as e,aO as j,aQ as N,h as y}from"./vendor-CWk44mA8.js";import{R as u,v as S}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function w({assessment:r,onSave:l,onCancel:c}){const[i,x]=d.useState([]),[t,a]=d.useState({vendorId:r?.vendorId||"",assessmentType:r?.assessmentType||"security_review",status:r?.status||"pending",dueDate:r?.dueDate?new Date(r.dueDate).toISOString().split("T")[0]:"",completedAt:r?.completedAt?new Date(r.completedAt).toISOString().split("T")[0]:"",overallScore:r?.overallScore,securityScore:r?.securityScore,privacyScore:r?.privacyScore,complianceScore:r?.complianceScore,findings:r?.findings||"",recommendations:r?.recommendations||"",assessor:r?.assessor||""});d.useEffect(()=>{n()},[]);const n=async()=>{try{const s=await S.list();x(s.data?.data||[])}catch(s){console.error("Error fetching vendors:",s)}},m=async s=>{s.preventDefault(),await l(t)};return e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Vendor *"}),e.jsxs("select",{value:t.vendorId,onChange:s=>a({...t,vendorId:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a vendor..."}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Assessment Type *"}),e.jsxs("select",{value:t.assessmentType,onChange:s=>a({...t,assessmentType:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0,children:[e.jsx("option",{value:"security_review",children:"Security Review"}),e.jsx("option",{value:"privacy_assessment",children:"Privacy Assessment"}),e.jsx("option",{value:"compliance_audit",children:"Compliance Audit"}),e.jsx("option",{value:"vendor_questionnaire",children:"Vendor Questionnaire"}),e.jsx("option",{value:"on_site_audit",children:"On-site Audit"}),e.jsx("option",{value:"penetration_test",children:"Penetration Test"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Status *"}),e.jsxs("select",{value:t.status,onChange:s=>a({...t,status:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Assessor"}),e.jsx("input",{type:"text",value:t.assessor||"",onChange:s=>a({...t,assessor:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:s=>a({...t,dueDate:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Completed Date"}),e.jsx("input",{type:"date",value:t.completedAt||"",onChange:s=>a({...t,completedAt:s.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Assessment Scores"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Overall Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.overallScore||"",onChange:s=>a({...t,overallScore:parseInt(s.target.value)||void 0}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Security Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.securityScore||"",onChange:s=>a({...t,securityScore:parseInt(s.target.value)||void 0}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Privacy Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.privacyScore||"",onChange:s=>a({...t,privacyScore:parseInt(s.target.value)||void 0}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Compliance Score (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.complianceScore||"",onChange:s=>a({...t,complianceScore:parseInt(s.target.value)||void 0}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Findings"}),e.jsx("textarea",{value:t.findings||"",onChange:s=>a({...t,findings:s.target.value}),rows:4,className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",placeholder:"Document any findings, issues, or concerns discovered during the assessment..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Recommendations"}),e.jsx("textarea",{value:t.recommendations||"",onChange:s=>a({...t,recommendations:s.target.value}),rows:4,className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",placeholder:"Provide recommendations for improvement or remediation..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-surface-300 hover:text-surface-100 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Save Assessment"})]})]})}function A({assessment:r,onEdit:l,onDelete:c}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-surface-100 capitalize",children:r.assessmentType.replace("_"," ")}),e.jsx("p",{className:"mt-1 text-surface-400",children:r.vendor?.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(N,{className:"w-5 h-5"})}),e.jsx("button",{onClick:c,className:"p-2 text-red-400 hover:text-red-300 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(y,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Vendor"}),e.jsx("dd",{className:"text-sm text-surface-100",children:r.vendor?.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Type"}),e.jsx("dd",{className:"text-sm text-surface-100 capitalize",children:r.assessmentType.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Status"}),e.jsx("dd",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full capitalize ${r.status==="completed"?"bg-green-500/20 text-green-400":r.status==="in_progress"?"bg-blue-500/20 text-blue-400":r.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-surface-700 text-surface-400"}`,children:r.status.replace("_"," ")})})]}),r.assessor&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Assessor"}),e.jsx("dd",{className:"text-sm text-surface-100",children:r.assessor})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.dueDate&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Due Date"}),e.jsx("dd",{className:"text-sm text-surface-100",children:new Date(r.dueDate).toLocaleDateString()})]}),r.completedAt&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Completed"}),e.jsx("dd",{className:"text-sm text-surface-100",children:new Date(r.completedAt).toLocaleDateString()})]})]})]}),(r.overallScore||r.securityScore||r.privacyScore||r.complianceScore)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Assessment Scores"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.overallScore!==null&&r.overallScore!==void 0&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-2",children:"Overall Score"}),e.jsxs("dd",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold text-surface-100",children:r.overallScore}),e.jsx("div",{className:"flex-1 h-3 bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${r.overallScore>=80?"bg-green-500":r.overallScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.overallScore}%`}})})]})]}),r.securityScore!==null&&r.securityScore!==void 0&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-2",children:"Security Score"}),e.jsxs("dd",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold text-surface-100",children:r.securityScore}),e.jsx("div",{className:"flex-1 h-3 bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${r.securityScore>=80?"bg-green-500":r.securityScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.securityScore}%`}})})]})]}),r.privacyScore!==null&&r.privacyScore!==void 0&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-2",children:"Privacy Score"}),e.jsxs("dd",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold text-surface-100",children:r.privacyScore}),e.jsx("div",{className:"flex-1 h-3 bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${r.privacyScore>=80?"bg-green-500":r.privacyScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.privacyScore}%`}})})]})]}),r.complianceScore!==null&&r.complianceScore!==void 0&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-2",children:"Compliance Score"}),e.jsxs("dd",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold text-surface-100",children:r.complianceScore}),e.jsx("div",{className:"flex-1 h-3 bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${r.complianceScore>=80?"bg-green-500":r.complianceScore>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.complianceScore}%`}})})]})]})]})]}),r.findings&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Findings"}),e.jsx("div",{className:"text-sm text-surface-300 whitespace-pre-wrap",children:r.findings})]}),r.recommendations&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Recommendations"}),e.jsx("div",{className:"text-sm text-surface-300 whitespace-pre-wrap",children:r.recommendations})]})]})})}function _(){const{id:r}=v(),l=g(),[c,i]=d.useState(null),[x,t]=d.useState(!0),[a,n]=d.useState(!1);d.useEffect(()=>{r&&r!=="new"?m():(n(!0),t(!1))},[r]);const m=async()=>{try{const o=await u.get(r);i(o.data)}catch(o){console.error("Error fetching assessment:",o)}finally{t(!1)}},s=async o=>{try{const f=localStorage.getItem("organizationId"),p={...o,organizationId:f};if(r==="new"){const h=await u.create(p);l(`/assessments/${h.data.id}`)}else{const h=await u.update(r,p);i(h.data),n(!1)}}catch(f){console.error("Error saving assessment:",f)}},b=async()=>{if(confirm("Are you sure you want to delete this assessment?"))try{await u.delete(r),l("/assessments")}catch(o){console.error("Error deleting assessment:",o)}};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-surface-400",children:"Loading assessment..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>l("/assessments"),className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(j,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-100",children:r==="new"?"New Assessment":"Assessment Details"}),c&&e.jsxs("p",{className:"mt-1 text-surface-400",children:[c.vendor?.name," - ",c.assessmentType?.replace("_"," ")]})]})]}),a||r==="new"?e.jsx(w,{assessment:c,onSave:s,onCancel:()=>{r==="new"?l("/assessments"):n(!1)}}):c?e.jsx(A,{assessment:c,onEdit:()=>n(!0),onDelete:b}):null]})}export{_ as default};
