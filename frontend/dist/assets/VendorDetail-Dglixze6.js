import{u as z,r as h,c as O,aD as p,j as e,R as y,v as S,a8 as A,aZ as D,y as w,ay as E,B as u,S as F,M as P,aR as _,V,aS as $,k as L,aO as M,aQ as U,h as q,H as B}from"./vendor-CWk44mA8.js";import{v,B as b}from"./index-CiJwl-Bo.js";import{b as G,c as k}from"./Skeleton-DVOICtGK.js";import{C as H}from"./Modal-BXiMOSLX.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const I={low:"bg-green-500/20 text-green-400 border-green-500/30",medium:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",high:"bg-orange-500/20 text-orange-400 border-orange-500/30",critical:"bg-red-500/20 text-red-400 border-red-500/30"},Q={low:"text-green-400",medium:"text-yellow-400",high:"text-orange-400",critical:"text-red-400"};function K({vendorId:s,documentId:n,documentTitle:o,previousAnalysis:r,onAnalysisComplete:c,onCreateAssessment:i}){const a=z(),[t,m]=h.useState(r||null),[j,x]=h.useState({exceptions:!0,cuecs:!1,gaps:!1,subservices:!1}),g=O({mutationFn:()=>v.analyzeDocument(s,n),onSuccess:l=>{m(l.data),p.success("SOC 2 analysis completed"),a.invalidateQueries({queryKey:["vendor",s]}),c?.(l.data)},onError:l=>{p.error(l.response?.data?.message||"Failed to analyze document")}}),N=l=>{x(d=>({...d,[l]:!d[l]}))};return t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-surface-800/50 border border-surface-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(y,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-surface-100",children:"AI Analysis Results"}),e.jsxs("p",{className:"text-xs text-surface-400",children:["Analyzed: ",new Date(t.analyzedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-surface-400",children:["Confidence: ",t.confidence,"%"]}),e.jsx("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"btn btn-ghost btn-sm",title:"Re-analyze",children:e.jsx(E,{className:u("w-4 h-4",g.isPending&&"animate-spin")})})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-surface-900/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-surface-300",children:t.summary})}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-surface-900/50 rounded-lg",children:[e.jsx("p",{className:u("text-xl font-bold",Q[t.suggestedRiskScore]),children:t.suggestedRiskScore.charAt(0).toUpperCase()+t.suggestedRiskScore.slice(1)}),e.jsx("p",{className:"text-xs text-surface-400",children:"Risk Score"})]}),e.jsxs("div",{className:"text-center p-2 bg-surface-900/50 rounded-lg",children:[e.jsx("p",{className:u("text-xl font-bold",t.exceptions.length===0?"text-green-400":"text-orange-400"),children:t.exceptions.length}),e.jsx("p",{className:"text-xs text-surface-400",children:"Exceptions"})]}),e.jsxs("div",{className:"text-center p-2 bg-surface-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-yellow-400",children:t.cuecs.length}),e.jsx("p",{className:"text-xs text-surface-400",children:"CUECs"})]}),e.jsxs("div",{className:"text-center p-2 bg-surface-900/50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-blue-400",children:t.controlGaps.length}),e.jsx("p",{className:"text-xs text-surface-400",children:"Gaps"})]})]}),(t.reportPeriod||t.auditor||t.opinionType)&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4 text-sm",children:[t.reportPeriod&&e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-400 text-xs",children:"Report Period"}),e.jsxs("p",{className:"text-surface-200",children:[t.reportPeriod.startDate," to ",t.reportPeriod.endDate]})]}),t.auditor&&e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-400 text-xs",children:"Auditor"}),e.jsx("p",{className:"text-surface-200",children:t.auditor})]}),t.opinionType&&e.jsxs("div",{children:[e.jsx("p",{className:"text-surface-400 text-xs",children:"Opinion"}),e.jsx("p",{className:u("font-medium",t.opinionType.toLowerCase()==="unqualified"?"text-green-400":"text-yellow-400"),children:t.opinionType})]})]})]}),e.jsx(C,{title:"Exceptions",count:t.exceptions.length,icon:S,iconColor:"text-orange-400",expanded:j.exceptions,onToggle:()=>N("exceptions"),children:t.exceptions.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 py-2",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"No exceptions found"})]}):e.jsx("div",{className:"space-y-3",children:t.exceptions.map((l,d)=>e.jsx(W,{exception:l},d))})}),e.jsx(C,{title:"Complementary User Entity Controls",count:t.cuecs.length,icon:A,iconColor:"text-yellow-400",expanded:j.cuecs,onToggle:()=>N("cuecs"),children:t.cuecs.length===0?e.jsx("p",{className:"text-sm text-surface-400 py-2",children:"No CUECs identified"}):e.jsx("div",{className:"space-y-2",children:t.cuecs.map((l,d)=>e.jsx(Y,{cuec:l},d))})}),e.jsx(C,{title:"Control Gaps",count:t.controlGaps.length,icon:w,iconColor:"text-purple-400",expanded:j.gaps,onToggle:()=>N("gaps"),children:t.controlGaps.length===0?e.jsx("p",{className:"text-sm text-surface-400 py-2",children:"No significant control gaps identified"}):e.jsx("div",{className:"space-y-2",children:t.controlGaps.map((l,d)=>e.jsx(Z,{gap:l},d))})}),t.subserviceOrganizations.length>0&&e.jsx(C,{title:"Subservice Organizations",count:t.subserviceOrganizations.length,icon:D,iconColor:"text-blue-400",expanded:j.subservices,onToggle:()=>N("subservices"),children:e.jsx("div",{className:"space-y-2",children:t.subserviceOrganizations.map((l,d)=>e.jsxs("div",{className:"p-3 bg-surface-900/50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-surface-100",children:l.name}),e.jsx("p",{className:"text-sm text-surface-400 mt-1",children:l.services}),e.jsxs("p",{className:"text-xs text-surface-500 mt-1",children:["Method: ",l.carveOutOrInclusiveMethod.replace("_"," ")]})]},d))})}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>i?.(t),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"Create Assessment from Analysis"]})})]}):e.jsxs("div",{className:"bg-surface-800/50 border border-surface-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(y,{className:"w-6 h-6 text-purple-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-surface-100",children:"AI-Powered SOC 2 Analysis"}),e.jsx("p",{className:"text-sm text-surface-400",children:"Analyze this SOC 2 report to extract exceptions, CUECs, and findings"})]})]}),e.jsxs("div",{className:"bg-surface-900/50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-surface-300 mb-3",children:"AI analysis will extract:"}),e.jsxs("ul",{className:"text-sm text-surface-400 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-orange-400"}),"Exceptions and control deviations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-yellow-400"}),"Complementary User Entity Controls (CUECs)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-blue-400"}),"Subservice organizations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-purple-400"}),"Control gaps and recommendations"]})]})]}),e.jsx("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5"}),"Analyze with AI"]})})]})}function C({title:s,count:n,icon:o,iconColor:r,expanded:c,onToggle:i,children:a}){return e.jsxs("div",{className:"bg-surface-800/50 border border-surface-700 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-4 hover:bg-surface-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:u("w-5 h-5",r)}),e.jsx("span",{className:"font-medium text-surface-100",children:s}),e.jsxs("span",{className:"text-sm text-surface-400",children:["(",n,")"]})]}),c?e.jsx(_,{className:"w-5 h-5 text-surface-400"}):e.jsx(V,{className:"w-5 h-5 text-surface-400"})]}),c&&e.jsx("div",{className:"px-4 pb-4",children:a})]})}function W({exception:s}){return e.jsxs("div",{className:u("p-3 rounded-lg border",I[s.severity]),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-mono text-surface-400",children:s.controlId}),e.jsx("span",{className:"mx-2 text-surface-600",children:"•"}),e.jsx("span",{className:"text-xs text-surface-400",children:s.category})]}),e.jsx("span",{className:u("text-xs px-2 py-0.5 rounded capitalize",I[s.severity]),children:s.severity})]}),e.jsx("p",{className:"text-sm text-surface-200 mt-2",children:s.description}),s.managementResponse&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-surface-600/50",children:[e.jsx("p",{className:"text-xs text-surface-400",children:"Management Response:"}),e.jsx("p",{className:"text-xs text-surface-300 mt-1",children:s.managementResponse})]})]})}function Y({cuec:s}){const n={implemented:"bg-green-500/20 text-green-400",not_implemented:"bg-red-500/20 text-red-400",unknown:"bg-surface-600 text-surface-400"};return e.jsxs("div",{className:"p-3 bg-surface-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("p",{className:"text-sm text-surface-200 flex-1",children:s.description}),e.jsx("span",{className:u("text-xs px-2 py-0.5 rounded ml-2 whitespace-nowrap",n[s.status]),children:s.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-xs text-surface-400 mt-2",children:["Responsibility: ",s.responsibility]})]})}function Z({gap:s}){const n={low:"text-green-400",medium:"text-yellow-400",high:"text-orange-400"};return e.jsxs("div",{className:"p-3 bg-surface-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-surface-100",children:s.area}),e.jsxs("span",{className:u("text-xs capitalize",n[s.priority]),children:[s.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-surface-300",children:s.description}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-surface-700",children:[e.jsx("p",{className:"text-xs text-surface-400",children:"Recommendation:"}),e.jsx("p",{className:"text-xs text-surface-300 mt-1",children:s.recommendation})]})]})}const T={monthly:"Monthly",quarterly:"Quarterly",semi_annual:"Semi-Annual",annual:"Annual",biennial:"Bi-Annual"},J={tier_1:"Tier 1 (Critical)",tier_2:"Tier 2 (High)",tier_3:"Tier 3 (Medium)",tier_4:"Tier 4 (Low)"};function ce(){const{id:s}=$(),n=L(),[o,r]=h.useState(null),[c,i]=h.useState(!0),[a,t]=h.useState(!1),[m,j]=h.useState(!1);h.useEffect(()=>{s&&s!=="new"?x():(i(!1),t(!0))},[s]);const x=async()=>{try{const l=await v.get(s);r(l.data)}catch(l){console.error("Error fetching vendor:",l)}finally{i(!1)}},g=async l=>{try{const R=(s==="new"?await v.create(l):await v.update(s,l)).data;s==="new"?(p.success("Vendor created successfully"),n(`/vendors/${R.id}`)):(p.success("Vendor updated successfully"),r(R),t(!1))}catch(d){console.error("Error saving vendor:",d),p.error("Failed to save vendor")}},N=async()=>{try{await v.delete(s),p.success("Vendor deleted successfully"),n("/vendors")}catch(l){console.error("Error deleting vendor:",l),p.error("Failed to delete vendor")}};return c?e.jsxs("div",{className:"space-y-6",children:[e.jsx(G,{}),e.jsx(k,{title:!0}),e.jsx(k,{title:!0})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n("/vendors"),className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-100",children:s==="new"?"New Vendor":o?.name||"Vendor Details"}),o?.vendorId&&e.jsx("p",{className:"mt-1 text-surface-400",children:o.vendorId})]})]}),s!=="new"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",onClick:()=>t(!a),leftIcon:e.jsx(U,{className:"w-5 h-5"}),children:a?"Cancel":"Edit"}),e.jsx(b,{variant:"danger",onClick:()=>j(!0),leftIcon:e.jsx(q,{className:"w-5 h-5"}),children:"Delete"})]})]}),a?e.jsx(X,{vendor:o,onSave:g,onCancel:()=>s==="new"?n("/vendors"):t(!1)}):e.jsx(ee,{vendor:o}),e.jsx(H,{isOpen:m,onClose:()=>j(!1),onConfirm:N,title:"Delete Vendor",message:`Are you sure you want to delete "${o?.name}"? This action cannot be undone.`,confirmText:"Delete",confirmVariant:"danger"})]})}function X({vendor:s,onSave:n,onCancel:o}){const[r,c]=h.useState({organizationId:s?.organizationId||localStorage.getItem("organizationId")||"",vendorId:s?.vendorId||`VND-${Date.now()}`,name:s?.name||"",legalName:s?.legalName||"",category:s?.category||"software_vendor",tier:s?.tier||"tier_3",status:s?.status||"active",description:s?.description||"",website:s?.website||"",primaryContact:s?.primaryContact||"",primaryContactEmail:s?.primaryContactEmail||"",primaryContactPhone:s?.primaryContactPhone||"",notes:s?.notes||""}),i=a=>{a.preventDefault(),n(r)};return e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Vendor Name *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:a=>c({...r,name:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Legal Name"}),e.jsx("input",{type:"text",value:r.legalName,onChange:a=>c({...r,legalName:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Category *"}),e.jsxs("select",{required:!0,value:r.category,onChange:a=>c({...r,category:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",children:[e.jsx("option",{value:"software_vendor",children:"Software Vendor"}),e.jsx("option",{value:"cloud_provider",children:"Cloud Provider"}),e.jsx("option",{value:"professional_services",children:"Professional Services"}),e.jsx("option",{value:"hardware_vendor",children:"Hardware Vendor"}),e.jsx("option",{value:"consultant",children:"Consultant"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Tier *"}),e.jsxs("select",{required:!0,value:r.tier,onChange:a=>c({...r,tier:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",children:[e.jsx("option",{value:"tier_1",children:"Tier 1 (Critical)"}),e.jsx("option",{value:"tier_2",children:"Tier 2 (High)"}),e.jsx("option",{value:"tier_3",children:"Tier 3 (Medium)"}),e.jsx("option",{value:"tier_4",children:"Tier 4 (Low)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:r.status,onChange:a=>c({...r,status:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending_onboarding",children:"Pending Onboarding"}),e.jsx("option",{value:"offboarding",children:"Offboarding"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:r.website,onChange:a=>c({...r,website:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Primary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Contact Name"}),e.jsx("input",{type:"text",value:r.primaryContact,onChange:a=>c({...r,primaryContact:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.primaryContactEmail,onChange:a=>c({...r,primaryContactEmail:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:r.primaryContactPhone,onChange:a=>c({...r,primaryContactPhone:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:a=>c({...r,description:a.target.value}),rows:3,className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:r.notes,onChange:a=>c({...r,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(b,{variant:"secondary",type:"button",onClick:o,children:"Cancel"}),e.jsx(b,{type:"submit",children:"Save Vendor"})]})]})}function ee({vendor:s}){const[n,o]=h.useState(!1),[r,c]=h.useState(null),i=s,a=i.nextReviewDue?new Date(i.nextReviewDue):null,t=a?a<new Date:!1,m=a?Math.ceil((a.getTime()-Date.now())/(1e3*60*60*24)):null,j=x=>{c(x),o(!0)};return e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs("div",{className:u("p-4 rounded-lg border flex items-center justify-between",t?"bg-red-500/10 border-red-500/30":m!==null&&m<=30?"bg-yellow-500/10 border-yellow-500/30":"bg-surface-800 border-surface-700"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t?e.jsx(S,{className:"w-5 h-5 text-red-400"}):e.jsx(B,{className:u("w-5 h-5",m!==null&&m<=30?"text-yellow-400":"text-surface-400")}),e.jsxs("div",{children:[e.jsx("p",{className:u("font-medium",t?"text-red-400":m!==null&&m<=30?"text-yellow-400":"text-surface-200"),children:t?`Review Overdue by ${Math.abs(m)} days`:`Next Review Due: ${a.toLocaleDateString()}`}),e.jsxs("p",{className:"text-sm text-surface-400",children:["Review Frequency: ",T[i.reviewFrequency||"annual"]||"Annual",i.lastReviewedAt&&e.jsxs(e.Fragment,{children:[" • Last Reviewed: ",new Date(i.lastReviewedAt).toLocaleDateString()]})]})]})]}),e.jsx(b,{variant:"outline",size:"sm",leftIcon:e.jsx(F,{className:"w-4 h-4"}),onClick:()=>{v.completeReview(s.id).then(()=>{p.success("Review marked as complete"),window.location.reload()}).catch(()=>{p.error("Failed to complete review")})},children:"Mark Review Complete"})]}),e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{label:"Vendor Name",value:s.name}),e.jsx(f,{label:"Legal Name",value:s.legalName}),e.jsx(f,{label:"Category",value:s.category.replace("_"," "),capitalize:!0}),e.jsx(f,{label:"Tier",value:J[s.tier]||s.tier}),e.jsx(f,{label:"Status",value:s.status,capitalize:!0}),e.jsx(f,{label:"Website",value:s.website,link:!0}),e.jsx(f,{label:"Risk Score",value:s.inherentRiskScore,capitalize:!0}),e.jsx(f,{label:"Review Frequency",value:T[i.reviewFrequency||"annual"]})]})]}),(s.primaryContact||s.primaryContactEmail||s.primaryContactPhone)&&e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Primary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(f,{label:"Name",value:s.primaryContact}),e.jsx(f,{label:"Email",value:s.primaryContactEmail}),e.jsx(f,{label:"Phone",value:s.primaryContactPhone})]})]}),e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-surface-400"}),e.jsx("h3",{className:"text-lg font-medium text-surface-100",children:"Documents"})]})}),i.documents&&i.documents.length>0?e.jsx("div",{className:"space-y-3",children:i.documents.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-surface-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-surface-200",children:x.title}),e.jsx("p",{className:"text-xs text-surface-400",children:x.documentType.replace("_"," ")})]})]}),(x.documentType.toLowerCase().includes("soc2")||x.documentType.toLowerCase().includes("soc 2"))&&e.jsx(b,{variant:"ghost",size:"sm",leftIcon:e.jsx(y,{className:"w-4 h-4"}),onClick:()=>j(x),children:"Analyze with AI"})]},x.id))}):e.jsxs("div",{className:"text-center py-6 text-surface-400",children:[e.jsx(w,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No documents uploaded yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Upload SOC 2 reports for AI-powered analysis"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-surface-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(y,{className:"w-5 h-5 text-purple-400"}),e.jsx("h4",{className:"font-medium text-surface-200",children:"AI-Powered SOC 2 Analysis"})]}),e.jsx("p",{className:"text-sm text-surface-400 mb-3",children:"Upload a SOC 2 Type II report to automatically extract exceptions, CUECs, and control gaps using AI."}),e.jsx(b,{variant:"outline",size:"sm",leftIcon:e.jsx(y,{className:"w-4 h-4"}),onClick:()=>{c({id:"demo",title:"Demo SOC 2 Report"}),o(!0)},children:"Try Demo Analysis"})]})]}),n&&r&&e.jsx(K,{vendorId:s.id,documentId:r.id,documentTitle:r.title,onAnalysisComplete:()=>{p.success("Analysis complete")},onCreateAssessment:()=>{p.success("Assessment created from analysis"),o(!1)}}),s.description&&e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Description"}),e.jsx("p",{className:"text-surface-300",children:s.description})]}),s.notes&&e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Notes"}),e.jsx("p",{className:"text-surface-300 whitespace-pre-wrap",children:s.notes})]})]})}function f({label:s,value:n,capitalize:o,link:r}){return n?e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:s}),e.jsx("dd",{className:`text-sm text-surface-100 ${o?"capitalize":""}`,children:r?e.jsx("a",{href:n.toString(),target:"_blank",rel:"noopener noreferrer",className:"text-brand-400 hover:text-brand-300",children:n}):n})]}):null}export{ce as default};
