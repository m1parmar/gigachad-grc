import{r as o,c as m,j as s}from"./vendor-CWk44mA8.js";import{w as x,B as p,d as u}from"./index-CiJwl-Bo.js";import{T as h}from"./Form-uXUmRGSk.js";import{u as g}from"./useToast-oJzujiun.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";async function j(a){return(await u.post("/api/mcp/ai/analyze-risk",{description:a})).data}function I(){const[a,t]=o.useState(""),r=g(),{isModuleEnabled:n}=x(),c=n("ai"),{mutate:d,data:e,isPending:i}=m({mutationFn:j,onError:()=>{r.error("AI analysis failed. Please try again or adjust your description.")}});return c?s.jsxs("div",{className:"p-6 space-y-6 max-w-3xl",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"AI Risk Assistant"}),s.jsx("p",{className:"text-surface-400 mt-1",children:"Paste a risk description and let the AI assistant suggest categorization and a treatment plan."})]}),s.jsxs("div",{className:"card p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",children:"Risk Description"}),s.jsx(h,{rows:6,value:a,onChange:l=>t(l.target.value),placeholder:"Describe the risk scenario, affected assets, potential impact, and any existing controls..."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(p,{type:"button",onClick:()=>d(a),disabled:!a.trim()||i,children:i?"Analyzing...":"Analyze Risk"})})]}),e&&s.jsxs("div",{className:"card p-4 space-y-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Suggested Analysis"}),e.summary&&s.jsx("p",{className:"text-surface-300 whitespace-pre-wrap",children:e.summary}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2 text-sm",children:[e.suggestedCategory&&s.jsxs("div",{children:[s.jsx("p",{className:"text-surface-500",children:"Category"}),s.jsx("p",{className:"text-surface-100 font-medium",children:e.suggestedCategory})]}),e.suggestedLikelihood&&s.jsxs("div",{children:[s.jsx("p",{className:"text-surface-500",children:"Likelihood"}),s.jsx("p",{className:"text-surface-100 font-medium",children:e.suggestedLikelihood})]}),e.suggestedImpact&&s.jsxs("div",{children:[s.jsx("p",{className:"text-surface-500",children:"Impact"}),s.jsx("p",{className:"text-surface-100 font-medium",children:e.suggestedImpact})]}),e.suggestedTreatmentPlan&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("p",{className:"text-surface-500",children:"Treatment Plan"}),s.jsx("p",{className:"text-surface-100 whitespace-pre-wrap",children:e.suggestedTreatmentPlan})]})]})]})]}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:"AI Risk Assistant"}),s.jsxs("p",{className:"text-surface-400",children:["The AI module is not enabled for this environment. Ask an administrator to set",s.jsx("code",{className:"mx-1 text-xs bg-surface-900 px-2 py-1 rounded",children:"VITE_ENABLE_AI_MODULE=true"}),"and provide AI provider API keys."]})]})}export{I as default};
