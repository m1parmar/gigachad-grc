import{r as c,b as y,j as e,bT as w,L as d,M as C,l as R,ay as _,y as f,B as P}from"./vendor-CWk44mA8.js";import{d as S}from"./index-CiJwl-Bo.js";import{u as F}from"./useDebounce-BWtFJvQ9.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const D={draft:"bg-surface-600 text-surface-300",in_review:"bg-yellow-500/20 text-yellow-400",approved:"bg-blue-500/20 text-blue-400",published:"bg-green-500/20 text-green-400",archived:"bg-surface-700 text-surface-400",expired:"bg-red-500/20 text-red-400"},j={business_continuity:"Business Continuity",disaster_recovery:"Disaster Recovery",incident_response:"Incident Response",crisis_communication:"Crisis Communication",pandemic_response:"Pandemic Response",it_recovery:"IT Recovery",data_backup:"Data Backup",other:"Other"};function $(){const[o,b]=c.useState(""),[a,v]=c.useState(""),[t,N]=c.useState(""),[r,i]=c.useState(1),n=F(o,300);c.useEffect(()=>{i(1)},[n,a,t]);const{data:x,isLoading:g,error:m,refetch:u}=y({queryKey:["bcdr-plans",n,a,t,r],queryFn:async()=>{const s=new URLSearchParams;return n&&s.append("search",n),a&&s.append("planType",a),t&&s.append("status",t),s.append("page",r.toString()),s.append("limit","25"),(await S.get(`/api/bcdr/plans?${s}`)).data},retry:1}),p=x?.data||[],l=x?.totalPages||1;return m?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(w,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-surface-100 mb-2",children:"Failed to load BC/DR Plans"}),e.jsx("p",{className:"text-surface-400 mb-4",children:m.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>u(),className:"btn btn-primary",children:"Try Again"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"BC/DR Plans"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Manage business continuity and disaster recovery plans"})]}),e.jsxs(d,{to:"/bcdr/plans/new",className:"btn btn-primary",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),"Create Plan"]})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsx("input",{type:"text",placeholder:"Search plans...",className:"form-input pl-10 w-full",value:o,onChange:s=>b(s.target.value)})]})}),e.jsx("div",{className:"w-48",children:e.jsxs("select",{className:"form-select w-full",value:a,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),Object.entries(j).map(([s,h])=>e.jsx("option",{value:s,children:h},s))]})}),e.jsx("div",{className:"w-36",children:e.jsxs("select",{className:"form-select w-full",value:t,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"in_review",children:"In Review"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})}),e.jsx("button",{onClick:()=>u(),className:"btn btn-secondary",children:e.jsx(_,{className:"w-5 h-5"})})]})}),g?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsxs("div",{className:"card p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-surface-700 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-surface-700 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-surface-700 rounded w-2/3"})]},s))}):p.length===0?e.jsxs("div",{className:"card p-8 text-center text-surface-400",children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No BC/DR plans found"}),e.jsx(d,{to:"/bcdr/plans/new",className:"text-brand-400 hover:text-brand-300 mt-2 inline-block",children:"Create your first plan â†’"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(s=>e.jsxs(d,{to:`/bcdr/plans/${s.id}`,className:"card p-6 hover:border-brand-500/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-brand-400"}),e.jsx("span",{className:P("px-2 py-0.5 rounded text-xs font-medium",D[s.status]),children:s.status})]}),e.jsxs("span",{className:"text-surface-400 text-xs",children:["v",s.version]})]}),e.jsx("h3",{className:"text-lg font-semibold text-surface-100 mb-1",children:s.title}),e.jsx("p",{className:"text-surface-400 text-sm mb-3",children:s.plan_id}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Type"}),e.jsx("span",{className:"text-surface-300",children:j[s.plan_type]||s.plan_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Owner"}),e.jsx("span",{className:"text-surface-300",children:s.owner_name||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Linked Controls"}),e.jsx("span",{className:"text-surface-300",children:s.control_count||0})]}),s.effective_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-surface-400",children:"Effective"}),e.jsx("span",{className:"text-surface-300",children:new Date(s.effective_date).toLocaleDateString()})]})]})]},s.id))}),l>1&&e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>i(s=>Math.max(1,s-1)),disabled:r===1,className:"btn btn-secondary btn-sm",children:"Previous"}),e.jsxs("span",{className:"text-surface-400 text-sm",children:["Page ",r," of ",l]}),e.jsx("button",{onClick:()=>i(s=>Math.min(l,s+1)),disabled:r===l,className:"btn btn-secondary btn-sm",children:"Next"})]})]})}export{$ as default};
