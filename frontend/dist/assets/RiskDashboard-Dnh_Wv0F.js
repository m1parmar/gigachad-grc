import{b as x,j as e,L as a,v as c,aa as h,by as u,S as b,E as y,bz as k}from"./vendor-CWk44mA8.js";import{x as o}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function $(){const{data:r,isLoading:n}=x({queryKey:["risk-dashboard"],queryFn:async()=>(await o.getDashboard()).data}),{data:d}=x({queryKey:["risks","recent"],queryFn:async()=>(await o.list({limit:5})).data}),{data:m}=x({queryKey:["risk-trend"],queryFn:async()=>(await o.getTrend(30)).data}),i=s=>{switch(s){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-amber-500";case"low":return"bg-emerald-500";default:return"bg-surface-500"}},t=s=>s.includes("complete")||s.includes("mitigat")||s.includes("accept")||s.includes("avoid")||s.includes("transfer")?"text-emerald-400 bg-emerald-500/20":s.includes("progress")||s.includes("review")||s.includes("approval")?"text-amber-400 bg-amber-500/20":"text-blue-400 bg-blue-500/20";return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500 dark:text-surface-400",children:"Loading risk dashboard..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Risk Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 mt-1",children:"Executive overview of your risk posture"})]}),e.jsxs(a,{to:"/risks",className:"px-4 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"}),"View All Risks"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{title:"Total Risks",value:r?.totalRisks||0,icon:c,color:"text-blue-400",bgColor:"bg-blue-500/20"}),e.jsx(l,{title:"Open Risks",value:r?.openRisks||0,icon:h,color:"text-amber-400",bgColor:"bg-amber-500/20",trend:r?.openRisksTrend}),e.jsx(l,{title:"In Treatment",value:r?.inTreatment||0,icon:u,color:"text-cyan-400",bgColor:"bg-cyan-500/20"}),e.jsx(l,{title:"Mitigated This Month",value:r?.mitigatedThisMonth||0,icon:b,color:"text-emerald-400",bgColor:"bg-emerald-500/20"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Risk Level Distribution"}),e.jsx("div",{className:"space-y-4",children:["critical","high","medium","low"].map(s=>{const g=r?.byRiskLevel?.find(j=>j.level===s)?.count||0,p=r?.totalRisks||1,f=Math.round(g/p*100);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-surface-300 capitalize",children:s}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:g})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-surface-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${i(s)} transition-all duration-500`,style:{width:`${f}%`}})})]},s)})})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Risks by Category"}),e.jsxs("div",{className:"space-y-3",children:[(r?.byCategory||[]).slice(0,6).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-surface-300 capitalize",children:s.category?.replace("_"," ")||"Uncategorized"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-surface-700 rounded text-gray-900 dark:text-white text-sm font-medium",children:s.count})]},s.category)),(!r?.byCategory||r.byCategory.length===0)&&e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-center py-4",children:"No risks categorized yet"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Risks"}),e.jsx(a,{to:"/risks",className:"text-brand-500 dark:text-brand-400 text-sm hover:text-brand-600 dark:hover:text-brand-300",children:"View all â†’"})]}),e.jsxs("div",{className:"space-y-3",children:[(d?.risks||[]).map(s=>e.jsxs(a,{to:`/risks/${s.id}`,className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-surface-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-surface-700 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i(s.inherentRisk)}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium truncate",children:s.title}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm truncate",children:s.riskId})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t(s.status)}`,children:s.status.replace(/_/g," ")})]},s.id)),(!d?.risks||d.risks.length===0)&&e.jsx("p",{className:"text-gray-500 dark:text-surface-500 text-center py-8",children:"No risks recorded yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a,{to:"/risks?create=true",className:"flex items-center gap-3 p-3 bg-brand-500/20 text-brand-600 dark:text-brand-400 rounded-lg hover:bg-brand-500/30 transition-colors",children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{children:"Report New Risk"})]}),e.jsxs(a,{to:"/risk-queue",className:"flex items-center gap-3 p-3 bg-gray-100 dark:bg-surface-700 text-gray-700 dark:text-surface-300 rounded-lg hover:bg-gray-200 dark:hover:bg-surface-600 transition-colors",children:[e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{children:"View My Queue"})]}),e.jsxs(a,{to:"/risk-heatmap",className:"flex items-center gap-3 p-3 bg-gray-100 dark:bg-surface-700 text-gray-700 dark:text-surface-300 rounded-lg hover:bg-gray-200 dark:hover:bg-surface-600 transition-colors",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{children:"View Heatmap"})]}),e.jsxs(a,{to:"/risk-reports",className:"flex items-center gap-3 p-3 bg-gray-100 dark:bg-surface-700 text-gray-700 dark:text-surface-300 rounded-lg hover:bg-gray-200 dark:hover:bg-surface-600 transition-colors",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:"Generate Report"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Risk Appetite Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-emerald-500/20 mb-3",children:e.jsx(b,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r?.withinAppetite||0}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm",children:"Within Appetite"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-amber-500/20 mb-3",children:e.jsx(c,{className:"w-8 h-8 text-amber-400"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r?.nearingThreshold||0}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm",children:"Nearing Threshold"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/20 mb-3",children:e.jsx(k,{className:"w-8 h-8 text-red-400"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r?.exceedsAppetite||0}),e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm",children:"Exceeds Appetite"})]})]})]})]})}function l({title:r,value:n,icon:d,color:m,bgColor:i,trend:t}){return e.jsx("div",{className:"bg-white dark:bg-surface-800 rounded-xl border border-gray-200 dark:border-surface-700 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${i}`,children:e.jsx(d,{className:`w-6 h-6 ${m}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-surface-400 text-sm",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),t!==void 0&&e.jsxs("span",{className:`text-sm ${t>=0?"text-red-400":"text-emerald-400"}`,children:[t>=0?"+":"",t,"%"]})]})]})]})})}export{$ as default};
