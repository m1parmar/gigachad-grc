import{r as c,b,j as e,bT as v,L as n,M as _,l as y,ay as g,B as d}from"./vendor-CWk44mA8.js";import{d as w}from"./index-CiJwl-Bo.js";import{u as C}from"./useDebounce-BWtFJvQ9.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";const P={tier_1_critical:"bg-red-500/20 text-red-400 border-red-500/30",tier_2_essential:"bg-orange-500/20 text-orange-400 border-orange-500/30",tier_3_important:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",tier_4_standard:"bg-blue-500/20 text-blue-400 border-blue-500/30"},T={tier_1_critical:"Tier 1 - Critical",tier_2_essential:"Tier 2 - Essential",tier_3_important:"Tier 3 - Important",tier_4_standard:"Tier 4 - Standard"};function k(){const[x,f]=c.useState(""),[t,p]=c.useState(""),[a,l]=c.useState(1),r=C(x,300);c.useEffect(()=>{l(1)},[r,t]);const{data:o,isLoading:j,error:m,refetch:u}=b({queryKey:["business-processes",r,t,a],queryFn:async()=>{const s=new URLSearchParams;return r&&s.append("search",r),t&&s.append("criticalityTier",t),s.append("page",a.toString()),s.append("limit","25"),(await w.get(`/api/bcdr/processes?${s}`)).data},retry:1}),h=o?.data||[],i=o?.totalPages||1,N=s=>s?new Date(s)<new Date:!1;return m?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-surface-100 mb-2",children:"Failed to load Business Processes"}),e.jsx("p",{className:"text-surface-400 mb-4",children:m.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>u(),className:"btn btn-primary",children:"Try Again"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-100",children:"Business Processes"}),e.jsx("p",{className:"text-surface-400 mt-1",children:"Manage critical business processes and their impact analysis"})]}),e.jsxs(n,{to:"/bcdr/processes/new",className:"btn btn-primary",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Add Process"]})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),e.jsx("input",{type:"text",placeholder:"Search processes...",className:"form-input pl-10 w-full",value:x,onChange:s=>f(s.target.value)})]})}),e.jsx("div",{className:"w-48",children:e.jsxs("select",{className:"form-select w-full",value:t,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",children:"All Criticality"}),e.jsx("option",{value:"tier_1_critical",children:"Tier 1 - Critical"}),e.jsx("option",{value:"tier_2_essential",children:"Tier 2 - Essential"}),e.jsx("option",{value:"tier_3_important",children:"Tier 3 - Important"}),e.jsx("option",{value:"tier_4_standard",children:"Tier 4 - Standard"})]})}),e.jsx("button",{onClick:()=>u(),className:"btn btn-secondary",children:e.jsx(g,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"card overflow-hidden",children:[j?e.jsx("div",{className:"p-8 text-center text-surface-400",children:"Loading..."}):h.length===0?e.jsxs("div",{className:"p-8 text-center text-surface-400",children:[e.jsx("p",{children:"No business processes found"}),e.jsx(n,{to:"/bcdr/processes/new",className:"text-brand-400 hover:text-brand-300 mt-2 inline-block",children:"Create your first process â†’"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surface-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Process"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Criticality"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"RTO/RPO"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Owner"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Dependencies"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Next Review"}),e.jsx("th",{className:"text-left p-4 text-surface-300 font-medium",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-surface-700",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-surface-800/30 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(n,{to:`/bcdr/processes/${s.id}`,className:"text-surface-100 font-medium hover:text-brand-400 transition-colors",children:s.name}),e.jsx("div",{className:"text-surface-400 text-sm",children:s.process_id})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:d("px-2 py-1 rounded-full text-xs font-medium border",P[s.criticality_tier]),children:T[s.criticality_tier]||s.criticality_tier})}),e.jsxs("td",{className:"p-4 text-surface-300",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-surface-400",children:"RTO:"})," ",s.rto_hours?`${s.rto_hours}h`:"N/A"]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-surface-400",children:"RPO:"})," ",s.rpo_hours?`${s.rpo_hours}h`:"N/A"]})]}),e.jsx("td",{className:"p-4 text-surface-300",children:s.owner_name||"-"}),e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"text-surface-300 text-sm",children:[s.dependency_count||0," deps"]}),e.jsxs("div",{className:"text-surface-400 text-sm",children:[s.asset_count||0," assets"]})]}),e.jsx("td",{className:"p-4",children:s.next_review_due?e.jsx("span",{className:d("text-sm",N(s.next_review_due)?"text-red-400":"text-surface-300"),children:new Date(s.next_review_due).toLocaleDateString()}):e.jsx("span",{className:"text-surface-400 text-sm",children:"-"})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:d("px-2 py-1 rounded-full text-xs font-medium",s.is_active?"bg-green-500/20 text-green-400":"bg-surface-600 text-surface-400"),children:s.is_active?"Active":"Inactive"})})]},s.id))})]})}),i>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-surface-700",children:[e.jsx("button",{onClick:()=>l(s=>Math.max(1,s-1)),disabled:a===1,className:"btn btn-secondary btn-sm",children:"Previous"}),e.jsxs("span",{className:"text-surface-400 text-sm",children:["Page ",a," of ",i]}),e.jsx("button",{onClick:()=>l(s=>Math.min(i,s+1)),disabled:a===i,className:"btn btn-secondary btn-sm",children:"Next"})]})]})]})}export{k as default};
