const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CIchhWrJ.js","assets/vendor-CWk44mA8.js","assets/vendor-C9-ySRfk.css","assets/RiskHeatMap-qmek_2NP.js","assets/LazyCharts-CLuWtu1O.js","assets/Skeleton-DVOICtGK.js","assets/vendor-date-CWdg4M78.js","assets/vendor-http-B9ygI19o.js","assets/Controls-DB0Igs8d.js","assets/useDebounce-BWtFJvQ9.js","assets/AdvancedFilters-BfP-VL-m.js","assets/ExportDropdown-ClBGGM80.js","assets/export-DqfI3kh9.js","assets/BulkActions-DgJpXIcY.js","assets/Modal-BXiMOSLX.js","assets/ControlNew-xhjkAZXJ.js","assets/ControlDetail-3bn0V2TJ.js","assets/TasksPanel-lJoOjrDO.js","assets/EntityAuditHistory-C0v1gX0U.js","assets/Evidence-C34Kwz01.js","assets/EvidenceDetail-CKdGdEX4.js","assets/Frameworks-DMLCikKc.js","assets/FrameworkDetail-DZJJyt00.js","assets/FrameworkLibrary-CEw7SdR-.js","assets/Policies-frjjS6-O.js","assets/PolicyDetail-D_axV5tE.js","assets/Risks-B9HR2CBi.js","assets/vendor-zod-BDhom4hV.js","assets/useToast-oJzujiun.js","assets/Form-uXUmRGSk.js","assets/RiskDetail-BnpYs8PI.js","assets/RiskHeatmap-Cork06Je.js","assets/RiskDashboard-Dnh_Wv0F.js","assets/RiskQueue-C3CKZCPd.js","assets/RiskScenarios-SuqktDbI.js","assets/EmptyState-DqJSE5Oy.js","assets/RiskReports-BpjBF6au.js","assets/RiskConfiguration-BNGGla0u.js","assets/TPRMConfiguration-BMl07zl-.js","assets/TrustConfiguration-BpI4FVrg.js","assets/AnswerTemplates-xJm6psXA.js","assets/TrustAnalytics-B8oTOLG8.js","assets/AwarenessTraining-DAcve5g9.js","assets/Assets-D9ptfmG5.js","assets/AssetDetail-DxkHGhJB.js","assets/Integrations-DZpDAY31.js","assets/AuditLog-B2bdXuUd.js","assets/Settings-Bffay6gd.js","assets/DisabledModulePage-CE1vhHrB.js","assets/AccountSettings-AXc7oSAm.js","assets/NotificationSettings-Cg0cUmj4.js","assets/UserManagement-Ba61qj02.js","assets/PermissionGroups-M3PbDTkA.js","assets/Vendors-BnbHSfaE.js","assets/VendorDetail-Dglixze6.js","assets/Assessments-CQ_CbBY8.js","assets/AssessmentDetail-fFBnoRIT.js","assets/Contracts-DtalzejJ.js","assets/ContractDetail-w1iZTcgQ.js","assets/Questionnaires-Cz5v2NBc.js","assets/QuestionnaireDetail-ChPvME9D.js","assets/KnowledgeBase-yuz6B6u1.js","assets/KnowledgeBaseDetail-D_bx2BIJ.js","assets/TrustCenter-C-YvscZS.js","assets/TrustCenterSettings-BkqO2CXt.js","assets/Audits-DBgegHgq.js","assets/AuditRequests-5aCI-Le3.js","assets/AuditFindings-BZ6YYATg.js","assets/AuditTemplates-CrnlKvMW.js","assets/AuditWorkpapers-DzxncDNu.js","assets/AuditAnalytics-CAlbfFan.js","assets/AuditCalendar-Dt6GPAUy.js","assets/TestProcedures-05LVcAAz.js","assets/ComplianceCalendarPage-DIxCKMjc.js","assets/ScheduledReportsPage-GZ7iAD3P.js","assets/HelpCenter-D1EatdPX.js","assets/HelpArticle-cgtysumU.js","assets/DeveloperDocs-CdTmVgw8.js","assets/Employees-BWdA6LB6.js","assets/EmployeeDetail-DzXOBvhA.js","assets/EmployeeComplianceDashboard-D33GBVcu.js","assets/CustomDashboards-3QOTuj33.js","assets/MCPSettings-BgwgXSfM.js","assets/WorkspaceList-TNe-1ZD_.js","assets/WorkspaceSettings-BtStkDtD.js","assets/Login-tHK6jHA-.js","assets/AIRiskAssistant-CfDalTMo.js","assets/ConfigAsCode-sj09XcPN.js","assets/BCDRDashboard-BcvE2EmQ.js","assets/BusinessProcesses-v0VopyS_.js","assets/BusinessProcessDetail-DUnWkpko.js","assets/BCDRPlans-ijvNWjNn.js","assets/BCDRPlanDetail-Dwy-dYfz.js","assets/DRTests-B6JhWhC2.js","assets/DRTestDetail-BqprFS12.js","assets/Runbooks-BxfU839N.js","assets/CommunicationPlans-f8O7h2gq.js"])))=>i.map(i=>d[i]);
var ms=Object.defineProperty;var fs=(e,t,n)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H=(e,t,n)=>fs(e,typeof t!="symbol"?t+"":t,n);import{r,j as s,K as gs,u as hs,b as pe,c as Fe,F as xs,d as ke,f as Me,L as fe,g as Ae,h as js,k as ae,l as ye,m as Te,n as Xe,p as le,q as de,t as $,v as P,w as we,x as _e,y as F,z as Ee,A as K,B as E,C as Je,D as bs,E as D,G as vs,H as Se,I as Ie,J as Ne,M as J,N as ks,O as A,_ as M,P as ie,Q as ys,R as ws,S as _s,T as ze,U as z,V as Es,W as ue,X as ge,Y as Ss,Z as Ns,$ as Rs,a0 as Ve,a1 as $s,a2 as Cs,a3 as he,a4 as oe,a5 as As,a6 as Re,a7 as Ue,a8 as qe,a9 as Ts,aa as Is,ab as Ze,ac as Ds,ad as Ps,ae as Os,af as Ls,ag as es,ah as Z,ai as Fs,aj as Ms,ak as zs,al as Vs,am as Us,an as g,ao as qs,ap as p,aq as te,ar as Ws,as as Gs,at as Bs,au as Ks,av as Qs,aw as Hs,ax as Ys}from"./vendor-CWk44mA8.js";import{a as ss}from"./vendor-http-B9ygI19o.js";import{f as Xs}from"./vendor-date-CWdg4M78.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();class Js{constructor(){H(this,"config");H(this,"initialized",!1);H(this,"sentryModule",null);this.config={dsn:void 0,environment:"production",enabled:!1,release:"unknown"}}async init(){if(!this.initialized&&(this.initialized=!0,!!this.config.enabled)){if(!this.config.dsn){console.info("[ErrorTracking] No DSN configured - using console logging only");return}try{const t="@sentry/react";this.sentryModule=await import(t),this.sentryModule.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,integrations:[this.sentryModule.browserTracingIntegration(),this.sentryModule.replayIntegration({maskAllText:!0,blockAllMedia:!0})],tracesSampleRate:this.config.environment==="production"?.2:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","Non-Error promise rejection captured",/Loading chunk [\d]+ failed/],beforeSend(n,i){return n}}),console.info("[ErrorTracking] Sentry initialized successfully")}catch{console.info("[ErrorTracking] Sentry not available - using console logging only"),console.debug("[ErrorTracking] To enable Sentry: npm install @sentry/react")}}}setUser(t){this.sentryModule&&(t?(this.sentryModule.setUser({id:t.id,email:t.email}),this.sentryModule.setTag("organizationId",t.organizationId||"unknown")):this.sentryModule.setUser(null))}captureError(t,n){console.error("[Error]",t,n),this.sentryModule&&this.sentryModule.withScope(i=>{n?.userId&&i.setUser({id:n.userId}),n?.organizationId&&i.setTag("organizationId",n.organizationId),n?.tags&&Object.entries(n.tags).forEach(([o,c])=>{i.setTag(o,c)}),n?.extra&&Object.entries(n.extra).forEach(([o,c])=>{i.setExtra(o,c)}),n?.componentStack&&i.setExtra("componentStack",n.componentStack),this.sentryModule.captureException(t)})}captureMessage(t,n="info",i){(n==="error"?console.error:n==="warning"?console.warn:console.info)(`[${n.toUpperCase()}]`,t,i),this.sentryModule&&this.sentryModule.withScope(c=>{i&&Object.entries(i).forEach(([l,u])=>{c.setExtra(l,u)}),this.sentryModule.captureMessage(t,n)})}addBreadcrumb(t){this.sentryModule&&this.sentryModule.addBreadcrumb({category:t.category,message:t.message,level:t.level||"info",data:t.data})}isSentryAvailable(){return this.sentryModule!==null}}const De=new Js;De.init().catch(console.error);function Zs(e){De.setUser(e?{id:e.id,email:e.email,organizationId:e.organizationId}:null)}const We=Zs;function Ge(e){De.addBreadcrumb(e)}const R={TOKEN:"grc_token",REFRESH_TOKEN:"grc_refresh_token",USER_ID:"grc_user_id",ORGANIZATION_ID:"grc_org_id",SESSION_EXPIRY:"grc_session_expiry"};class et{constructor(){H(this,"useSessionStorage");this.useSessionStorage=!0}set(t,n){try{this.useSessionStorage?sessionStorage.setItem(t,n):localStorage.setItem(t,n)}catch(i){console.error("Failed to store value:",i)}}get(t){try{const n=sessionStorage.getItem(t);if(n)return n;const i=localStorage.getItem(t);return i?(sessionStorage.setItem(t,i),localStorage.removeItem(t),i):null}catch(n){return console.error("Failed to retrieve value:",n),null}}remove(t){try{sessionStorage.removeItem(t),localStorage.removeItem(t)}catch(n){console.error("Failed to remove value:",n)}}clearAll(){Object.values(R).forEach(t=>{this.remove(t)})}hasValidSession(){const t=this.get(R.TOKEN),n=this.get(R.SESSION_EXPIRY);return t?n?Date.now()<parseInt(n,10):!0:!1}setSession(t,n){this.set(R.TOKEN,t),this.set(R.SESSION_EXPIRY,String(Date.now()+n*1e3))}}const T=new et,G={token:"token",userId:"userId",organizationId:"organizationId"};function st(){const e=localStorage.getItem(G.token);e&&(T.set(R.TOKEN,e),localStorage.removeItem(G.token));const t=localStorage.getItem(G.userId);t&&(T.set(R.USER_ID,t),localStorage.removeItem(G.userId));const n=localStorage.getItem(G.organizationId);n&&(T.set(R.ORGANIZATION_ID,n),localStorage.removeItem(G.organizationId))}const ts=r.createContext(void 0),tt={url:"http://localhost:8080",realm:"gigachad-grc",clientId:"grc-frontend"};let xe=null,Y=null;function je(){return xe||(xe=new gs(tt)),xe}function at({children:e}){const[t,n]=r.useState(!1),[i,o]=r.useState(!0),[c,l]=r.useState(null),[u,f]=r.useState(null),v=r.useCallback(async x=>{try{const d=await x.loadUserProfile(),y=x.tokenParsed;console.log("Token parsed:",y),console.log("Profile:",d);const S=y?.roles?.[0]||y?.realm_access?.roles?.find(ne=>["admin","compliance_manager","auditor","viewer"].includes(ne))||"viewer",N=x.subject||"",q=y?.organization_id||"default",re={id:N,email:d.email||"",name:`${d.firstName||""} ${d.lastName||""}`.trim()||d.email||"",role:S,organizationId:q};l(re),We({id:N,email:d.email||void 0,organizationId:q}),Ge({category:"auth",message:"User logged in"}),T.set(R.USER_ID,N),T.set(R.ORGANIZATION_ID,q),x.token&&T.set(R.TOKEN,x.token),f(x.token||null)}catch(d){console.error("Failed to load user profile:",d),f(x.token||null)}},[]);r.useEffect(()=>{(async()=>{const d=je();if(Y){try{const y=await Y;n(y),y&&await v(d)}catch(y){console.error("Keycloak init promise failed:",y)}finally{o(!1)}return}try{console.log("Initializing Keycloak..."),Y=d.init({onLoad:"check-sso",checkLoginIframe:!1,pkceMethod:"S256",redirectUri:window.location.origin+"/"});const y=await Y;console.log("Keycloak initialized, authenticated:",y),y&&await v(d),n(y),d.onTokenExpired=()=>{console.log("Token expired, refreshing..."),d.updateToken(30).then(S=>{S&&(console.log("Token refreshed"),f(d.token||null))}).catch(()=>{console.error("Failed to refresh token"),n(!1),l(null),f(null)})},d.onAuthSuccess=()=>{console.log("Auth success"),v(d),n(!0)},d.onAuthError=S=>{console.error("Auth error:",S)}}catch(y){console.error("Keycloak initialization failed:",y),Y=null}finally{o(!1)}})()},[v]);const k=r.useCallback(()=>{const x=je();console.log("Logging in..."),x.login({redirectUri:window.location.origin+"/"})},[]),w=r.useCallback(()=>{const x=je();localStorage.removeItem("grc-dev-auth"),localStorage.removeItem("userId"),localStorage.removeItem("organizationId"),localStorage.removeItem("token"),n(!1),l(null),f(null),We(null),Ge({category:"auth",message:"User logged out"}),x.authenticated&&x.logout({redirectUri:window.location.origin})},[]);r.useCallback(()=>{},[]);const h=x=>c?c.role==="admin"?!0:c.role===x:!1,b=x=>c?c.role==="admin"?!0:{compliance_manager:["controls:view","controls:create","controls:update","evidence:view","evidence:upload","evidence:approve","frameworks:view","frameworks:manage","policies:view","policies:create","policies:update","policies:approve","integrations:view","integrations:manage"],auditor:["controls:view","evidence:view","frameworks:view","policies:view"],viewer:["controls:view","evidence:view","frameworks:view","policies:view"]}[c.role]?.includes(x)||!1:!1;return s.jsx(ts.Provider,{value:{isAuthenticated:t,isLoading:i,user:c,token:u,login:k,logout:w,devLogin:void 0,hasRole:h,hasPermission:b},children:e})}function Q(){const e=r.useContext(ts);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const ee={platformName:"GigaChad GRC",logoUrl:"/logo.png",faviconUrl:"/logo.png",primaryColor:"#6366f1"},Pe=r.createContext(null),be="grc-branding";function rt({children:e}){const[t,n]=r.useState(ee),[i,o]=r.useState(!0);r.useEffect(()=>{const l=localStorage.getItem(be);if(l)try{const u=JSON.parse(l);(u.faviconUrl==="/favicon.ico"||u.faviconUrl==="/favicon.svg"||!u.faviconUrl)&&(u.faviconUrl="/logo.png",localStorage.setItem(be,JSON.stringify({...ee,...u}))),n({...ee,...u})}catch{}o(!1)},[]),r.useEffect(()=>{t.platformName!==ee.platformName&&(document.title=t.platformName)},[t.platformName]),r.useEffect(()=>{const l=document.querySelector("link[rel~='icon']"),u=t.faviconUrl||"/logo.png";l&&(l.href=u)},[t.faviconUrl]);const c=async l=>{const u={...t,...l};n(u),localStorage.setItem(be,JSON.stringify(u))};return s.jsx(Pe.Provider,{value:{branding:t,updateBranding:c,isLoading:i},children:e})}function yr(){const e=r.useContext(Pe);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}function as(){return r.useContext(Pe)?.branding||ee}const nt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},L={compliance:{id:"compliance",name:"Compliance",description:"Controls, Frameworks, Evidence collection, and Compliance Calendar",envVar:"VITE_ENABLE_COMPLIANCE_MODULE",defaultEnabled:!0,routes:["/controls","/frameworks","/framework-library","/evidence","/calendar"],navSections:["Compliance"]},data:{id:"data",name:"Data Management",description:"Policies, Assets, and third-party Integrations",envVar:"VITE_ENABLE_DATA_MODULE",defaultEnabled:!0,routes:["/policies","/assets","/integrations"],navSections:["Data"]},risk:{id:"risk",name:"Risk Management",description:"Risk Dashboard, Risk Register, Heatmap, and Scenario Analysis",envVar:"VITE_ENABLE_RISK_MODULE",defaultEnabled:!0,routes:["/risks","/risk-dashboard","/risk-queue","/risk-heatmap","/risk-scenarios","/risk-reports"],navSections:["Risk Management"]},tprm:{id:"tprm",name:"Third Party Risk",description:"Vendor management, Assessments, Contracts, and Security Questionnaires",envVar:"VITE_ENABLE_TPRM_MODULE",defaultEnabled:!0,routes:["/vendors","/assessments","/contracts","/questionnaires"],navSections:["Third Party Risk"]},bcdr:{id:"bcdr",name:"BC/DR",description:"Business Continuity, Disaster Recovery, and Resilience Planning",envVar:"VITE_ENABLE_BCDR_MODULE",defaultEnabled:!0,routes:["/bcdr"],navSections:["BC/DR"]},audit:{id:"audit",name:"Audit",description:"Internal audits, Findings, Audit Requests, and Audit Log",envVar:"VITE_ENABLE_AUDIT_MODULE",defaultEnabled:!0,routes:["/audits","/audit-requests","/audit-findings","/audit","/audit-templates","/audit-workpapers","/test-procedures","/audit-analytics","/audit-calendar"],navSections:["Audit"]},trust:{id:"trust",name:"Trust Center",description:"Public Trust Center, Knowledge Base, and Customer Communications",envVar:"VITE_ENABLE_TRUST_MODULE",defaultEnabled:!0,routes:["/trust-center","/knowledge-base"],navSections:["Trust"]},people:{id:"people",name:"People & Compliance",description:"Employee compliance tracking, Training, and Awareness",envVar:"VITE_ENABLE_PEOPLE_MODULE",defaultEnabled:!0,routes:["/people","/tools/awareness"],navSections:["People"]},ai:{id:"ai",name:"AI Features",description:"AI-powered risk analysis, Control suggestions, and MCP integration",envVar:"VITE_ENABLE_AI_MODULE",defaultEnabled:!1,routes:["/settings/ai","/settings/mcp"],navSections:[]},tools:{id:"tools",name:"Tools & Reports",description:"Custom Dashboards, Scheduled Reports, and Reporting tools",envVar:"VITE_ENABLE_TOOLS_MODULE",defaultEnabled:!0,routes:["/dashboards","/scheduled-reports"],navSections:["Tools"]},"config-as-code":{id:"config-as-code",name:"Configuration as Code",description:"Manage GRC resources declaratively with version control (IDE + Export/Import)",envVar:"VITE_ENABLE_CONFIG_AS_CODE_MODULE",defaultEnabled:!0,routes:["/settings/config-as-code"],navSections:["Settings"]}},it=[{id:"full",name:"Full Platform",description:"All modules enabled - complete GRC functionality",modules:["compliance","data","risk","tprm","bcdr","audit","trust","people","tools"]},{id:"core",name:"Core GRC",description:"Essential compliance and risk management",modules:["compliance","data","risk","audit"]},{id:"compliance-only",name:"Compliance Only",description:"Controls, frameworks, and evidence management",modules:["compliance","data"]},{id:"risk-focused",name:"Risk Focused",description:"Risk management with vendor oversight",modules:["compliance","data","risk","tprm"]},{id:"enterprise",name:"Enterprise",description:"Full platform with BC/DR and advanced features",modules:["compliance","data","risk","tprm","bcdr","audit","trust","people","ai","tools"]}],rs=r.createContext(null);function ot(e){const t=L[e],n=nt[t.envVar];return n===void 0||n===""?t.defaultEnabled:n==="true"||n==="1"}function Be(){const e=new Set;for(const t of Object.keys(L))ot(t)&&e.add(t);return e}function ct({children:e,overrideModules:t}){const[n,i]=r.useState(()=>t?new Set(t):Be()),o=r.useCallback(l=>{if(!t&&Array.isArray(l)){const u=new Set;l.length>0?(Object.keys(L).forEach(f=>{l.includes(f)&&u.add(f)}),i(u)):i(Be())}},[t]),c=r.useMemo(()=>({enabledModules:n,isModuleEnabled:l=>n.has(l),isRouteEnabled:l=>{if(["/dashboard","/login","/settings","/account","/help","/docs","/users","/permissions"].some(f=>l===f||l.startsWith(f+"/")))return l.startsWith("/settings/ai")||l.startsWith("/settings/mcp")?n.has("ai"):l.startsWith("/settings/config-as-code")?n.has("config-as-code"):!0;for(const f of n)if(L[f].routes.some(k=>l===k||l.startsWith(k+"/")))return!0;return!1},isNavSectionEnabled:l=>{if(l==="Settings")return!0;for(const u of n)if(L[u].navSections.includes(l))return!0;return!1},getEnabledModules:()=>Array.from(n).map(l=>L[l]),getDisabledModules:()=>Object.keys(L).filter(l=>!n.has(l)).map(l=>L[l]),getActivePreset:()=>{const l=Array.from(n).sort();for(const u of it){const f=[...u.modules].sort();if(l.length===f.length&&l.every((v,k)=>v===f[k]))return u}return null},_refreshFromOrgConfig:o}),[n,o]);return s.jsx(rs.Provider,{value:c,children:e})}function me(){const e=r.useContext(rs);if(!e)throw new Error("useModules must be used within a ModuleProvider");return e}function wr({module:e,children:t,fallback:n=null}){const{isModuleEnabled:i}=me();return i(e)?s.jsx(s.Fragment,{children:t}):s.jsx(s.Fragment,{children:n})}st();const lt="",Ke="http://localhost:3001",B={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatusCodes:[408,429,500,502,503,504],retryableMethods:["GET","HEAD","OPTIONS","PUT","DELETE"]};function dt(e,t){if(t>=B.maxRetries)return!1;if(!e.response)return!0;const n=e.response.status,i=e.config?.method?.toUpperCase()||"";return!(!B.retryableStatusCodes.includes(n)||!B.retryableMethods.includes(i))}function pt(e){const t=B.baseDelayMs*Math.pow(2,e),n=Math.min(t,B.maxDelayMs),i=n*.1*Math.random();return Math.floor(n+i)}function ut(e){return new Promise(t=>setTimeout(t,e))}const a=ss.create({baseURL:lt,headers:{"Content-Type":"application/json"},timeout:3e4});a.interceptors.request.use(e=>{if(e.headers?.["X-Skip-Auth"]==="true")return delete e.headers["X-Skip-Auth"],e;const t=T.get(R.TOKEN)||localStorage.getItem("token");t&&(e.headers.Authorization=`Bearer ${t}`);const n=T.get(R.USER_ID)||localStorage.getItem("userId");n&&(e.headers["x-user-id"]=n);const i=T.get(R.ORGANIZATION_ID)||localStorage.getItem("organizationId");return i&&(e.headers["x-organization-id"]=i),e});let Qe=!1,ve=null;a.interceptors.response.use(e=>e,async e=>{const t=e.config;if(t&&t.__retryCount===void 0&&(t.__retryCount=0),t&&dt(e,t.__retryCount)){t.__retryCount+=1;const n=pt(t.__retryCount);return console.log(`API request failed, retrying in ${n}ms (attempt ${t.__retryCount}/${B.maxRetries}): ${t.method?.toUpperCase()} ${t.url}`),await ut(n),a.request(t)}if(e.response?.status===401){if(Qe)return Promise.reject(e);const n=e.config?.url||"";if(["/api/health","/api/workspaces/status"].some(o=>n.includes(o)))return Promise.reject(e);T.clearAll(),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("organizationId"),window.location.pathname.includes("/login")||(Qe=!0,ve&&clearTimeout(ve),ve=setTimeout(()=>{window.location.replace("/login")},100))}return Promise.reject(e)});const mt={list:e=>a.get("/api/controls",{params:e}),get:e=>a.get(`/api/controls/${e}`),create:e=>a.post("/api/controls",e),update:(e,t)=>a.put(`/api/controls/${e}`,t),delete:e=>a.delete(`/api/controls/${e}`),getCategories:()=>a.get("/api/controls/categories"),getTags:()=>a.get("/api/controls/tags"),bulkUpload:e=>a.post("/api/controls/bulk",e),bulkUploadCSV:e=>a.post("/api/controls/bulk/csv",e),getTemplate:()=>a.get("/api/controls/bulk/template",{responseType:"text"})},_r={list:e=>a.get("/api/implementations",{params:e}),get:e=>a.get(`/api/implementations/${e}`),update:(e,t)=>a.put(`/api/implementations/${e}`,t),bulkUpdate:e=>a.post("/api/implementations/bulk-update",e),createTest:(e,t)=>a.post(`/api/implementations/${e}/tests`,t),getTests:e=>a.get(`/api/implementations/${e}/tests`)},Er={list:(e,t)=>a.get(`/api/controls/${e}/implementations/${t}/collectors`),get:(e,t,n)=>a.get(`/api/controls/${e}/implementations/${t}/collectors/${n}`),create:(e,t,n)=>a.post(`/api/controls/${e}/implementations/${t}/collectors`,n),update:(e,t,n,i)=>a.put(`/api/controls/${e}/implementations/${t}/collectors/${n}`,i),delete:(e,t,n)=>a.delete(`/api/controls/${e}/implementations/${t}/collectors/${n}`),test:(e,t,n,i)=>a.post(`/api/controls/${e}/implementations/${t}/collectors/${n}/test`,i||{}),run:(e,t,n)=>a.post(`/api/controls/${e}/implementations/${t}/collectors/${n}/run`),getRuns:(e,t,n,i)=>a.get(`/api/controls/${e}/implementations/${t}/collectors/${n}/runs`,{params:{limit:i}})},Sr={list:e=>a.get("/api/evidence",{params:e}),get:e=>a.get(`/api/evidence/${e}`),upload:(e,t)=>{const n=new FormData;return n.append("file",e),Object.keys(t).forEach(i=>{const o=t[i];o!=null&&(Array.isArray(o)?o.forEach(c=>{n.append(i,String(c))}):n.append(i,String(o)))}),fetch("/api/evidence",{method:"POST",body:n}).then(async i=>{if(!i.ok){const o=await i.json().catch(()=>({message:i.statusText}));throw new Error(o.message||"Upload failed")}return{data:await i.json()}})},update:(e,t)=>a.put(`/api/evidence/${e}`,t),delete:e=>a.delete(`/api/evidence/${e}`),getDownloadUrl:e=>a.get(`/api/evidence/${e}/download`),review:(e,t)=>a.post(`/api/evidence/${e}/review`,t),link:(e,t)=>a.post(`/api/evidence/${e}/link`,{controlIds:t}),unlink:(e,t)=>a.delete(`/api/evidence/${e}/link/${t}`),getStats:()=>a.get("/api/evidence/stats"),getFolders:e=>a.get("/api/evidence/folders",{params:{parentId:e}}),createFolder:e=>a.post("/api/evidence/folders",e)},Nr={list:()=>a.get("/api/frameworks"),get:e=>a.get(`/api/frameworks/${e}`),create:e=>a.post("/api/frameworks",e),update:(e,t)=>a.put(`/api/frameworks/${e}`,t),delete:e=>a.delete(`/api/frameworks/${e}`),getRequirements:(e,t)=>a.get(`/api/frameworks/${e}/requirements`,{params:{parentId:t}}),getRequirementTree:e=>a.get(`/api/frameworks/${e}/requirements/tree`),getRequirement:(e,t)=>a.get(`/api/frameworks/${e}/requirements/${t}`),createRequirement:(e,t)=>a.post(`/api/frameworks/${e}/requirements`,t),bulkUploadRequirements:(e,t)=>{const n=new FormData;return n.append("file",t),a.post(`/api/frameworks/${e}/requirements/bulk-upload`,n,{headers:{"Content-Type":"multipart/form-data"}})},updateRequirement:(e,t,n)=>a.put(`/api/frameworks/${e}/requirements/${t}`,n),getReadiness:e=>a.get(`/api/frameworks/${e}/readiness`),getSeedStatus:()=>a.get("/api/frameworks/seed/status"),seed:()=>a.post("/api/frameworks/seed")},Rr={list:e=>a.get("/api/users",{params:e}),get:e=>a.get(`/api/users/${e}`),getMe:()=>a.get("/api/users/me"),getStats:()=>a.get("/api/users/stats"),create:e=>a.post("/api/users",e),update:(e,t)=>a.put(`/api/users/${e}`,t),deactivate:e=>a.post(`/api/users/${e}/deactivate`),reactivate:e=>a.post(`/api/users/${e}/reactivate`),getPermissions:e=>a.get(`/api/users/${e}/permissions`),getGroups:e=>a.get(`/api/users/${e}/groups`),addToGroup:(e,t)=>a.post(`/api/users/${e}/groups/${t}`),removeFromGroup:(e,t)=>a.post(`/api/users/${e}/groups/${t}/remove`),sync:e=>a.post("/api/users/sync",e)},$r={listGroups:()=>a.get("/api/permissions/groups"),getGroup:e=>a.get(`/api/permissions/groups/${e}`),createGroup:e=>a.post("/api/permissions/groups",e),updateGroup:(e,t)=>a.put(`/api/permissions/groups/${e}`,t),deleteGroup:e=>a.delete(`/api/permissions/groups/${e}`),getGroupMembers:e=>a.get(`/api/permissions/groups/${e}/members`),addGroupMember:(e,t)=>a.post(`/api/permissions/groups/${e}/members`,{userId:t}),removeGroupMember:(e,t)=>a.delete(`/api/permissions/groups/${e}/members/${t}`),getUserPermissions:e=>a.get(`/api/permissions/users/${e}`),setUserOverrides:(e,t)=>a.put(`/api/permissions/users/${e}/overrides`,{overrides:t}),getUserOverrides:e=>a.get(`/api/permissions/users/${e}/overrides`),checkPermission:(e,t,n)=>a.get("/api/permissions/check",{headers:{"x-check-resource":e,"x-check-action":t,"x-check-resource-id":n||""}}),getAvailable:()=>a.get("/api/permissions/available"),getModules:()=>a.get(`${Ke}/api/modules`),updateModules:e=>a.put(`${Ke}/api/modules`,{enabledModules:e}),seedDefaults:()=>a.post("/api/permissions/seed")},ft={list:e=>a.get("/api/policies",{params:e}),get:e=>a.get(`/api/policies/${e}`),getStats:()=>a.get("/api/policies/stats"),upload:async(e,t)=>{const n=new FormData;n.append("file",e),Object.keys(t).forEach(o=>{const c=t[o];c!=null&&(Array.isArray(c)?c.forEach(l=>n.append(o,String(l))):n.append(o,String(c)))});const i=await fetch("/api/policies",{method:"POST",body:n});if(!i.ok){const o=await i.json();throw new Error(o.message||"Failed to upload policy")}return i.json()},update:(e,t)=>a.put(`/api/policies/${e}`,t),updateStatus:(e,t,n)=>a.put(`/api/policies/${e}/status`,{status:t,notes:n}),delete:e=>a.delete(`/api/policies/${e}`),getDownloadUrl:e=>a.get(`/api/policies/${e}/download`),getPreviewUrl:e=>`/api/policies/${e}/preview`,uploadNewVersion:async(e,t,n,i)=>{const o=new FormData;o.append("file",t),o.append("versionNumber",n),i&&o.append("changeNotes",i);const c=await fetch(`/api/policies/${e}/versions`,{method:"POST",body:o});if(!c.ok){const l=await c.json();throw new Error(l.message||"Failed to upload new version")}return c.json()},linkToControls:(e,t)=>a.post(`/api/policies/${e}/link`,{controlIds:t}),unlinkFromControl:(e,t)=>a.delete(`/api/policies/${e}/link/${t}`)},Cr={list:(e,t)=>a.get("/api/comments",{params:{entityType:e,entityId:t}}),create:e=>a.post("/api/comments",e),update:(e,t)=>a.put(`/api/comments/${e}`,t),delete:e=>a.delete(`/api/comments/${e}`)},Ar={list:e=>a.get("/api/tasks",{params:e}),myTasks:e=>a.get("/api/tasks/my",{params:{status:e}}),create:e=>a.post("/api/tasks",e),update:(e,t)=>a.put(`/api/tasks/${e}`,t),delete:e=>a.delete(`/api/tasks/${e}`)},Tr={list:e=>a.get("/api/assessments",{params:{frameworkId:e}}),get:e=>a.get(`/api/assessments/${e}`),create:e=>a.post("/api/assessments",e),update:(e,t)=>a.patch(`/api/assessments/${e}`,t),delete:e=>a.delete(`/api/assessments/${e}`),updateRequirementStatus:(e,t,n)=>a.put(`/api/assessments/${e}/requirements/${t}`,n),getGaps:e=>a.get(`/api/assessments/${e}/gaps`),createGap:(e,t)=>a.post(`/api/assessments/${e}/gaps`,t),generateGaps:e=>a.post(`/api/assessments/${e}/gaps/generate`),createRemediation:(e,t)=>a.post(`/api/assessments/${e}/remediation`,t),updateRemediation:(e,t,n)=>a.put(`/api/assessments/${e}/remediation/${t}`,n),complete:e=>a.post(`/api/assessments/${e}/complete`)},Ir={list:e=>a.get("/api/mappings",{params:e}),byControl:e=>a.get(`/api/mappings/by-control/${e}`),byRequirement:e=>a.get(`/api/mappings/by-requirement/${e}`),controlCoverage:()=>a.get("/api/mappings/control-coverage"),requirementCoverage:e=>a.get(`/api/mappings/requirement-coverage/${e}`),create:e=>a.post("/api/mappings",e),bulkCreate:e=>a.post("/api/mappings/bulk",e),delete:e=>a.delete(`/api/mappings/${e}`)},Dr={getFull:()=>a.get("/api/dashboard/full"),getSummary:()=>a.get("/api/dashboard/summary"),getComplianceScore:()=>a.get("/api/dashboard/compliance-score"),getComplianceTrend:e=>a.get("/api/dashboard/compliance-trend",{params:{days:e}}),getControlStats:()=>a.get("/api/dashboard/controls-stats"),getEvidenceStats:()=>a.get("/api/dashboard/evidence-stats"),getUpcomingTests:()=>a.get("/api/dashboard/upcoming-tests"),getRecentActivity:()=>a.get("/api/dashboard/recent-activity")},Pr={list:e=>a.get("/api/integrations",{params:e}),get:e=>a.get(`/api/integrations/${e}`),getStats:()=>a.get("/api/integrations/stats"),getTypes:()=>a.get("/api/integrations/types"),create:e=>a.post("/api/integrations",e),update:(e,t)=>a.put(`/api/integrations/${e}`,t),delete:e=>a.delete(`/api/integrations/${e}`),testConnection:e=>a.post(`/api/integrations/${e}/test`),triggerSync:e=>a.post(`/api/integrations/${e}/sync`),getCustomConfig:e=>a.get(`/api/integrations/${e}/custom-config`),saveCustomConfig:(e,t)=>a.put(`/api/integrations/${e}/custom-config`,t),testCustomEndpoint:(e,t)=>a.post(`/api/integrations/${e}/custom-config/test`,t||{}),validateCode:e=>a.post("/api/integrations/custom-config/validate",{code:e}),getCodeTemplate:()=>a.get("/api/integrations/custom/template"),executeCustomSync:e=>a.post(`/api/integrations/${e}/custom-sync`)},Or={export:e=>a.post("/api/config-as-code/export",e),import:e=>a.post("/api/config-as-code/import",e),listFiles:(e,t)=>a.get("/api/config-as-code/files",{params:{...e?{workspaceId:e}:{},...t?{initialize:"true"}:{}}}),getFile:(e,t)=>a.get(`/api/config-as-code/files/${encodeURIComponent(e)}`,{params:t?{workspaceId:t}:{}}),createFile:e=>a.post("/api/config-as-code/files",e),updateFile:(e,t,n)=>a.put(`/api/config-as-code/files/${encodeURIComponent(e)}`,t,{params:n?{workspaceId:n}:{}}),deleteFile:(e,t)=>a.delete(`/api/config-as-code/files/${encodeURIComponent(e)}`,{params:t?{workspaceId:t}:{}}),previewChanges:e=>a.post("/api/config-as-code/files/preview",e),applyChanges:(e,t)=>a.post("/api/config-as-code/files/apply",e,{params:t?{workspaceId:t}:{}}),getVersionHistory:(e,t)=>a.get(`/api/config-as-code/files/${encodeURIComponent(e)}/versions`,{params:t?{workspaceId:t}:{}}),refreshFromDatabase:e=>a.post("/api/config-as-code/files/refresh",{},{params:e?{workspaceId:e}:{}})},Lr={list:e=>{const t=e?Object.fromEntries(Object.entries(e).filter(([,n])=>n!==""&&n!==void 0&&n!==null)):void 0;return a.get("/api/audit",{params:t})},get:e=>a.get(`/api/audit/${e}`),getStats:(e,t)=>a.get("/api/audit/stats",{params:{startDate:e,endDate:t}}),getFilters:()=>a.get("/api/audit/filters"),getByEntity:(e,t,n)=>a.get(`/api/audit/entity/${e}/${t}`,{params:{limit:n}}),export:e=>a.get("/api/audit/export",{params:e,responseType:"blob"})},Fr={list:e=>a.get("/api/audits",{params:e}),get:e=>a.get(`/api/audits/${e}`),create:e=>a.post("/api/audits",e),update:(e,t)=>a.put(`/api/audits/${e}`,t),delete:e=>a.delete(`/api/audits/${e}`)},Mr={list:e=>a.get("/api/findings",{params:e}),get:e=>a.get(`/api/findings/${e}`),getStats:()=>a.get("/api/findings/stats"),create:e=>a.post("/api/findings",e),update:(e,t)=>a.patch(`/api/findings/${e}`,t),delete:e=>a.delete(`/api/findings/${e}`),bulkUpdateStatus:(e,t)=>a.post("/api/findings/bulk/status",{ids:e,status:t})},gt={list:e=>a.get("/api/vendors",{params:e}),get:e=>a.get(`/api/vendors/${e}`),create:e=>a.post("/api/vendors",e),update:(e,t)=>a.put(`/api/vendors/${e}`,t),delete:e=>a.delete(`/api/vendors/${e}`),getReviewsDue:()=>a.get("/api/vendors/reviews-due"),completeReview:e=>a.patch(`/api/vendors/${e}/complete-review`),analyzeDocument:(e,t)=>a.post(`/api/vendors/${e}/documents/${t}/analyze`)},zr={list:()=>a.get("/api/contracts"),get:e=>a.get(`/api/contracts/${e}`),create:e=>a.post("/api/contracts",e),update:(e,t)=>a.put(`/api/contracts/${e}`,t),delete:e=>a.delete(`/api/contracts/${e}`)},Vr={list:e=>a.get("/api/questionnaires",{params:e}),get:e=>a.get(`/api/questionnaires/${e}`),create:e=>a.post("/api/questionnaires",e),update:(e,t)=>a.patch(`/api/questionnaires/${e}`,t),delete:e=>a.delete(`/api/questionnaires/${e}`),createQuestion:e=>a.post("/api/questionnaires/questions",e),updateQuestion:(e,t)=>a.patch(`/api/questionnaires/questions/${e}`,t),deleteQuestion:e=>a.delete(`/api/questionnaires/questions/${e}`),getStats:e=>a.get("/api/questionnaires/stats",{params:{organizationId:e}}),getDashboardQueue:e=>a.get("/api/questionnaires/dashboard-queue",{params:{organizationId:e}}),getMyQueue:e=>a.get("/api/questionnaires/my-queue",{params:{organizationId:e}}),getAnalytics:(e,t,n)=>a.get("/api/questionnaires/analytics",{params:{organizationId:e,startDate:t,endDate:n}}),findSimilarQuestions:(e,t,n)=>a.get("/api/questionnaires/similar-questions",{params:{organizationId:e,questionText:t,excludeId:n}}),getAnswerSuggestions:(e,t)=>a.get("/api/questionnaires/answer-suggestions",{params:{organizationId:e,questionText:t}}),findDuplicates:e=>a.get(`/api/questionnaires/${e}/duplicates`),exportQuestionnaire:(e,t="excel")=>a.get(`/api/questionnaires/${e}/export`,{params:{format:t},responseType:"blob"}),exportBatch:(e,t="excel")=>a.post("/api/questionnaires/export-batch",{ids:e,format:t},{responseType:"blob"})},Ur={list:e=>a.get("/api/knowledge-base",{params:e}),get:e=>a.get(`/api/knowledge-base/${e}`),create:e=>a.post("/api/knowledge-base",e),update:(e,t)=>a.patch(`/api/knowledge-base/${e}`,t),delete:e=>a.delete(`/api/knowledge-base/${e}`),bulkCreate:e=>a.post("/api/knowledge-base/bulk",e),approve:e=>a.post(`/api/knowledge-base/${e}/approve`),incrementUsage:e=>a.post(`/api/knowledge-base/${e}/use`),search:(e,t)=>a.get("/api/knowledge-base/search",{params:{organizationId:e,q:t}}),getStats:e=>a.get("/api/knowledge-base/stats",{params:{organizationId:e}})},qr={getConfig:e=>a.get("/api/trust-center/config",{params:e}),updateConfig:(e,t)=>a.patch("/api/trust-center/config",e,{params:t}),getContent:e=>a.get("/api/trust-center/content",{params:e}),createContent:e=>a.post("/api/trust-center/content",e),updateContent:(e,t)=>a.patch(`/api/trust-center/content/${e}`,t),deleteContent:e=>a.delete(`/api/trust-center/content/${e}`),getPublic:e=>a.get("/api/trust-center/public",{params:e})},Wr={get:e=>a.get("/api/trust-config",{params:{organizationId:e}}),update:(e,t)=>a.put("/api/trust-config",e,{params:{organizationId:t}}),reset:e=>a.post("/api/trust-config/reset",{},{params:{organizationId:e}}),getReference:()=>a.get("/api/trust-config/reference")},Gr={list:e=>a.get("/api/answer-templates",{params:e}),get:e=>a.get(`/api/answer-templates/${e}`),create:e=>a.post("/api/answer-templates",e),update:(e,t)=>a.patch(`/api/answer-templates/${e}`,t),delete:e=>a.delete(`/api/answer-templates/${e}`),archive:e=>a.post(`/api/answer-templates/${e}/archive`),unarchive:e=>a.post(`/api/answer-templates/${e}/unarchive`),apply:(e,t)=>a.post(`/api/answer-templates/${e}/apply`,{variables:t}),getStats:e=>a.get("/api/answer-templates/stats",{params:{organizationId:e}}),getCategories:e=>a.get("/api/answer-templates/categories",{params:{organizationId:e}})},X={list:e=>a.get("/api/notifications",{params:e}),get:e=>a.get(`/api/notifications/${e}`),getUnreadCount:()=>a.get("/api/notifications/unread-count"),getStats:()=>a.get("/api/notifications/stats"),markAsRead:(e,t)=>a.post("/api/notifications/mark-read",{notificationIds:e,markAll:t}),markOneAsRead:e=>a.post(`/api/notifications/${e}/read`),delete:e=>a.delete(`/api/notifications/${e}`),deleteAll:()=>a.delete("/api/notifications"),getPreferences:()=>a.get("/api/notifications/preferences/list"),updatePreferences:e=>a.put("/api/notifications/preferences",{preferences:e})},ns={list:e=>a.get("/api/risks",{params:e}),get:e=>a.get(`/api/risks/${e}`),create:e=>a.post("/api/risks",e),update:(e,t)=>a.put(`/api/risks/${e}`,t),delete:e=>a.delete(`/api/risks/${e}`),markReviewed:(e,t)=>a.post(`/api/risks/${e}/review`,{notes:t}),updateTreatment:(e,t)=>a.put(`/api/risks/${e}/treatment`,t),getDashboard:()=>a.get("/api/risks/dashboard"),getHeatmap:()=>a.get("/api/risks/heatmap"),getTrend:e=>a.get("/api/risks/trend",{params:{days:e}}),validateRisk:(e,t)=>a.post(`/api/risks/${e}/validate`,t),startAssessment:(e,t)=>a.post(`/api/risks/${e}/start-assessment`,{assessorId:t}),submitAssessment:(e,t)=>a.post(`/api/risks/${e}/submit-assessment`,t),reviewAssessment:(e,t)=>a.post(`/api/risks/${e}/review-assessment`,t),completeRevision:(e,t)=>a.post(`/api/risks/${e}/complete-revision`,t),submitTreatmentDecision:(e,t)=>a.post(`/api/risks/${e}/treatment-decision`,t),assignExecutiveApprover:(e,t)=>a.post(`/api/risks/${e}/assign-executive`,{approverId:t}),submitExecutiveApproval:(e,t)=>a.post(`/api/risks/${e}/executive-approval`,t),updateMitigationStatus:(e,t)=>a.post(`/api/risks/${e}/mitigation-status`,t),linkControl:(e,t)=>a.post(`/api/risks/${e}/controls`,t),unlinkControl:(e,t)=>a.delete(`/api/risks/${e}/controls/${t}`),linkAssets:(e,t)=>a.post(`/api/risks/${e}/assets`,{assetIds:t}),unlinkAsset:(e,t)=>a.delete(`/api/risks/${e}/assets/${t}`),createScenario:(e,t)=>a.post(`/api/risks/${e}/scenarios`,t),deleteScenario:(e,t)=>a.delete(`/api/risks/${e}/scenarios/${t}`)},Br={list:e=>a.get("/api/risk-scenarios",{params:e}),get:e=>a.get(`/api/risk-scenarios/${e}`),create:e=>a.post("/api/risk-scenarios",e),update:(e,t)=>a.put(`/api/risk-scenarios/${e}`,t),delete:e=>a.delete(`/api/risk-scenarios/${e}`),clone:(e,t)=>a.post(`/api/risk-scenarios/${e}/clone`,{newTitle:t}),simulate:(e,t)=>a.post(`/api/risk-scenarios/${e}/simulate`,t),getTemplates:()=>a.get("/api/risk-scenarios/templates"),getLibrary:()=>a.get("/api/risk-scenarios/library"),getLibraryByCategory:()=>a.get("/api/risk-scenarios/library/by-category"),getCategories:()=>a.get("/api/risk-scenarios/categories"),getStatistics:()=>a.get("/api/risk-scenarios/statistics"),bulkCreateFromTemplates:e=>a.post("/api/risk-scenarios/bulk/from-templates",{templateIds:e})};Object.assign(ns,{linkAssets:(e,t)=>a.post(`/api/risks/${e}/assets`,{assetIds:t}),unlinkAsset:(e,t)=>a.delete(`/api/risks/${e}/assets/${t}`),linkControl:(e,t)=>a.post(`/api/risks/${e}/controls`,t),updateControlEffectiveness:(e,t,n)=>a.put(`/api/risks/${e}/controls/${t}`,n),unlinkControl:(e,t)=>a.delete(`/api/risks/${e}/controls/${t}`),getScenarios:e=>a.get(`/api/risks/${e}/scenarios`),createScenario:(e,t)=>a.post(`/api/risks/${e}/scenarios`,t),updateScenario:(e,t,n)=>a.put(`/api/risks/${e}/scenarios/${t}`,n),deleteScenario:(e,t)=>a.delete(`/api/risks/${e}/scenarios/${t}`),validateRisk:(e,t)=>a.post(`/api/risks/${e}/validate`,t),startAssessment:(e,t)=>a.post(`/api/risks/${e}/start-assessment`,{riskAssessorId:t}),submitAssessment:(e,t)=>a.post(`/api/risks/${e}/assessment/submit`,t),reviewAssessment:(e,t)=>a.post(`/api/risks/${e}/assessment/review`,t),completeRevision:(e,t)=>a.post(`/api/risks/${e}/assessment/revision`,t),submitTreatmentDecision:(e,t)=>a.post(`/api/risks/${e}/treatment/decision`,t),assignExecutiveApprover:(e,t)=>a.post(`/api/risks/${e}/treatment/assign-approver`,{executiveApproverId:t}),submitExecutiveApproval:(e,t)=>a.post(`/api/risks/${e}/treatment/executive-approval`,t),updateMitigationStatus:(e,t)=>a.post(`/api/risks/${e}/treatment/mitigation-update`,t)});const Kr={list:e=>a.get("/api/assets",{params:e}),get:e=>a.get(`/api/assets/${e}`),create:e=>a.post("/api/assets",e),update:(e,t)=>a.put(`/api/assets/${e}`,t),delete:e=>a.delete(`/api/assets/${e}`),getStats:()=>a.get("/api/assets/stats"),getSources:()=>a.get("/api/assets/sources"),getDepartments:()=>a.get("/api/assets/departments"),syncFromSource:(e,t)=>a.post(`/api/assets/sync/${e}`,{integrationId:t})},Qr={get:()=>a.get("/api/risk-config"),update:e=>a.put("/api/risk-config",e),reset:()=>a.post("/api/risk-config/reset"),addCategory:e=>a.post("/api/risk-config/categories",e),removeCategory:e=>a.delete(`/api/risk-config/categories/${e}`),updateAppetite:(e,t,n)=>a.put(`/api/risk-config/appetite/${e}`,{level:t,description:n})},Hr={get:()=>a.get("/api/tprm-config"),getReference:()=>a.get("/api/tprm-config/reference"),update:e=>a.put("/api/tprm-config",e),reset:()=>a.post("/api/tprm-config/reset"),addCategory:e=>a.post("/api/tprm-config/categories",e),removeCategory:e=>a.delete(`/api/tprm-config/categories/${e}`),getTierFrequency:e=>a.get(`/api/tprm-config/tier-frequency/${e}`)},Yr={list:e=>a.get("/api/audit",{params:e}),get:e=>a.get(`/api/audit/${e}`)},Xr={get:()=>a.get("/api/notifications-config"),updateEmail:e=>a.put("/api/notifications-config/email",e),updateSlack:e=>a.put("/api/notifications-config/slack",e),updateDefaults:e=>a.put("/api/notifications-config/defaults",e),testEmail:e=>a.post("/api/notifications-config/test-email",{recipientEmail:e}),testSlack:e=>a.post("/api/notifications-config/test-slack",{channel:e}),disconnectSlack:()=>a.delete("/api/notifications-config/slack")},Jr={list:e=>a.get("/api/employee-compliance",{params:e}),get:e=>a.get(`/api/employee-compliance/${e}`),getScore:e=>a.get(`/api/employee-compliance/${e}/score`),getDashboard:()=>a.get("/api/employee-compliance/dashboard"),getDepartments:()=>a.get("/api/employee-compliance/departments"),getMissingData:()=>a.get("/api/employee-compliance/missing"),triggerSync:()=>a.post("/api/employee-compliance/sync"),recalculateScores:()=>a.post("/api/employee-compliance/recalculate-scores"),recalculateEmployeeScore:e=>a.post(`/api/employee-compliance/${e}/recalculate`),getConfig:()=>a.get("/api/employee-compliance/config"),updateConfig:e=>a.put("/api/employee-compliance/config",e)},Zr={getStatus:()=>a.get("/api/seed/status"),loadDemoData:()=>a.post("/api/seed/load-demo"),resetData:e=>a.post("/api/seed/reset",{confirmationPhrase:e}),getDataSummary:()=>a.get("/api/seed/summary")},en={list:()=>a.get("/api/dashboards"),getTemplates:()=>a.get("/api/dashboards/templates"),getDataSources:()=>a.get("/api/dashboards/data-sources"),executeQuery:(e,t=!0)=>a.post("/api/dashboards/query",{query:e,preview:t}),get:e=>a.get(`/api/dashboards/${e}`),create:e=>a.post("/api/dashboards",e),update:(e,t)=>a.put(`/api/dashboards/${e}`,t),delete:e=>a.delete(`/api/dashboards/${e}`),duplicate:(e,t)=>a.post(`/api/dashboards/${e}/duplicate`,{name:t}),setDefault:e=>a.post(`/api/dashboards/${e}/set-default`),addWidget:(e,t)=>a.post(`/api/dashboards/${e}/widgets`,t),updateWidget:(e,t,n)=>a.put(`/api/dashboards/${e}/widgets/${t}`,n),deleteWidget:(e,t)=>a.delete(`/api/dashboards/${e}/widgets/${t}`),getWidgetData:(e,t)=>a.get(`/api/dashboards/${e}/widgets/${t}/data`)},sn={getProgress:()=>a.get("/api/training/progress"),getModuleProgress:e=>a.get(`/api/training/progress/${e}`),startModule:e=>a.post("/api/training/progress/start",{moduleId:e}),updateProgress:(e,t)=>a.put(`/api/training/progress/${e}`,t),completeModule:(e,t)=>a.post("/api/training/progress/complete",{moduleId:e,score:t}),getStats:()=>a.get("/api/training/stats"),getOrgStats:()=>a.get("/api/training/stats/org"),getAssignments:e=>a.get("/api/training/assignments",{params:e?{userId:e}:void 0}),getMyAssignments:()=>a.get("/api/training/assignments/me"),createAssignment:e=>a.post("/api/training/assignments",e),bulkAssign:e=>a.post("/api/training/assignments/bulk",e),updateAssignment:(e,t)=>a.put(`/api/training/assignments/${e}`,t),deleteAssignment:e=>a.delete(`/api/training/assignments/${e}`),getCampaigns:()=>a.get("/api/training/campaigns"),getCampaign:e=>a.get(`/api/training/campaigns/${e}`),createCampaign:e=>a.post("/api/training/campaigns",e),updateCampaign:(e,t)=>a.put(`/api/training/campaigns/${e}`,t),deleteCampaign:e=>a.delete(`/api/training/campaigns/${e}`)},tn={getServers:()=>a.get("/api/mcp/servers"),getServer:e=>a.get(`/api/mcp/servers/${e}`),connectServer:e=>a.post(`/api/mcp/servers/${e}/connect`),disconnectServer:e=>a.post(`/api/mcp/servers/${e}/disconnect`),deleteServer:e=>a.delete(`/api/mcp/servers/${e}`),healthCheck:e=>a.get(`/api/mcp/servers/${e}/health`),getTemplates:()=>a.get("/api/mcp/templates"),deployTemplate:(e,t)=>a.post(`/api/mcp/templates/${e}/deploy`,{env:t}),getCapabilities:e=>a.get(`/api/mcp/servers/${e}/capabilities`),refreshCapabilities:e=>a.post(`/api/mcp/servers/${e}/capabilities/refresh`),callTool:(e,t,n)=>a.post("/api/mcp/tools/call",{serverId:e,toolName:t,arguments:n}),callToolsBatch:(e,t)=>a.post("/api/mcp/tools/batch",{calls:e,parallel:t}),readResource:(e,t)=>a.post("/api/mcp/resources/read",{serverId:e,uri:t}),getPrompt:(e,t,n)=>a.post("/api/mcp/prompts/get",{serverId:e,promptName:t,arguments:n}),getWorkflows:()=>a.get("/api/mcp/workflows"),getWorkflow:e=>a.get(`/api/mcp/workflows/${e}`),executeWorkflow:(e,t)=>a.post(`/api/mcp/workflows/${e}/execute`,{input:t}),getExecutions:()=>a.get("/api/mcp/workflows/executions"),getExecution:e=>a.get(`/api/mcp/workflows/executions/${e}`),cancelExecution:e=>a.post(`/api/mcp/workflows/executions/${e}/cancel`)},ht={info:"ðŸ’¬",success:"âœ…",warning:"âš ï¸",error:"ðŸš¨"},xt=(e,t,n)=>{if(!e||!t)return null;switch(e){case"control":return`/controls/${t}`;case"evidence":return`/evidence?id=${t}`;case"policy":return`/policies?id=${t}`;case"task":return"/tasks";case"integration":return"/integrations";default:return null}};function jt(){const[e,t]=r.useState(!1),n=r.useRef(null),i=hs(),{data:o}=pe({queryKey:["notifications","unread-count"],queryFn:()=>X.getUnreadCount(),refetchInterval:3e4}),c=o?.data?.count||0,{data:l,isLoading:u}=pe({queryKey:["notifications","list"],queryFn:()=>X.list({limit:10,unreadOnly:!1}),enabled:e,refetchInterval:e?15e3:!1}),f=l?.data?.notifications||[],v=Fe({mutationFn:({id:h,markAll:b})=>b?X.markAsRead(void 0,!0):X.markOneAsRead(h),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications"]})}}),k=Fe({mutationFn:h=>X.delete(h),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications"]})}});r.useEffect(()=>{const h=b=>{n.current&&!n.current.contains(b.target)&&t(!1)};return e&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[e]);const w=h=>{h.isRead||v.mutate({id:h.id}),t(!1)};return s.jsxs("div",{className:"relative",ref:n,children:[s.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 rounded-lg text-surface-400 hover:text-surface-100 hover:bg-surface-800 focus:outline-none focus:ring-2 focus:ring-brand-500 transition-colors","aria-label":"Notifications",children:[c>0?s.jsx(xs,{className:"h-5 w-5 text-brand-400"}):s.jsx(ke,{className:"h-5 w-5"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center h-4 w-4 text-[10px] font-bold text-white bg-red-500 rounded-full",children:c>9?"9+":c})]}),e&&s.jsxs("div",{className:"absolute left-0 mt-2 w-80 bg-surface-900 rounded-xl shadow-2xl border border-surface-700 z-[100] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-surface-800 border-b border-surface-700",children:[s.jsx("h3",{className:"text-sm font-semibold text-surface-100",children:"Notifications"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[c>0&&s.jsxs("button",{onClick:()=>v.mutate({markAll:!0}),className:"text-xs text-brand-400 hover:text-brand-300 flex items-center space-x-1",title:"Mark all as read",children:[s.jsx(Me,{className:"h-3 w-3"}),s.jsx("span",{children:"Mark all read"})]}),s.jsx(fe,{to:"/settings/notifications",onClick:()=>t(!1),className:"p-1 text-surface-400 hover:text-surface-100 rounded",title:"Notification settings",children:s.jsx(Ae,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:u?s.jsxs("div",{className:"p-4 text-center text-surface-400",children:[s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-brand-500 border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"mt-2 text-xs",children:"Loading..."})]}):f.length===0?s.jsxs("div",{className:"p-6 text-center text-surface-400",children:[s.jsx(ke,{className:"h-10 w-10 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):s.jsx("ul",{className:"divide-y divide-surface-700",children:f.map(h=>{const b=xt(h.entityType,h.entityId,h.metadata),x=s.jsx("div",{className:`p-3 hover:bg-surface-800 transition-colors cursor-pointer ${h.isRead?"":"bg-surface-800/50"}`,children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-sm flex-shrink-0",children:ht[h.severity]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`text-xs font-medium truncate ${h.isRead?"text-surface-300":"text-surface-100"}`,children:h.title}),!h.isRead&&s.jsx("span",{className:"ml-2 h-1.5 w-1.5 bg-brand-500 rounded-full flex-shrink-0"})]}),s.jsx("p",{className:"text-xs text-surface-400 mt-0.5 line-clamp-2",children:h.message}),s.jsx("span",{className:"text-[10px] text-surface-500 mt-1 block",children:Xs(new Date(h.createdAt),{addSuffix:!0})})]}),s.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[!h.isRead&&s.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),v.mutate({id:h.id})},className:"p-1 text-surface-500 hover:text-green-400 rounded",title:"Mark as read",children:s.jsx(Me,{className:"h-3 w-3"})}),s.jsx("button",{onClick:d=>{d.preventDefault(),d.stopPropagation(),k.mutate(h.id)},className:"p-1 text-surface-500 hover:text-red-400 rounded",title:"Delete",children:s.jsx(js,{className:"h-3 w-3"})})]})]})});return s.jsx("li",{children:b?s.jsx(fe,{to:b,onClick:()=>w(h),children:x}):s.jsx("div",{onClick:()=>w(h),children:x})},h.id)})})}),f.length>0&&s.jsx("div",{className:"px-3 py-2 bg-surface-800 border-t border-surface-700 text-center",children:s.jsx(fe,{to:"/settings/notifications",onClick:()=>t(!1),className:"text-xs text-brand-400 hover:text-brand-300",children:"View all & settings â†’"})})]})]})}const bt={control:K,framework:Ee,policy:F,evidence:_e,integration:we,risk:P,vendor:$,audit:de,user:le,asset:Xe},vt={control:"Control",framework:"Framework",policy:"Policy",evidence:"Evidence",integration:"Integration",risk:"Risk",vendor:"Vendor",audit:"Audit",user:"User",asset:"Asset"};function kt(){const[e,t]=r.useState(""),[n,i]=r.useState(!1),[o,c]=r.useState(0),l=r.useRef(null),u=r.useRef(null),f=ae(),{data:v=[],isLoading:k}=pe({queryKey:["global-search",e],queryFn:async()=>{if(!e||e.length<2)return[];try{return(await ss.get("undefined/search/global",{params:{q:e},withCredentials:!0})).data.data||[]}catch(h){return console.error("Search error:",h),[]}},enabled:e.length>=2});r.useEffect(()=>{const h=b=>{(b.metaKey||b.ctrlKey)&&b.key==="k"&&(b.preventDefault(),i(!0),u.current?.focus()),b.key==="Escape"&&(i(!1),t(""),c(0)),n&&(b.key==="ArrowDown"&&(b.preventDefault(),c(x=>Math.min(x+1,v.length-1))),b.key==="ArrowUp"&&(b.preventDefault(),c(x=>Math.max(x-1,0))),b.key==="Enter"&&v[o]&&(b.preventDefault(),w(v[o])))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,v,o]),r.useEffect(()=>{const h=b=>{l.current&&!l.current.contains(b.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),r.useEffect(()=>{c(0)},[v]);const w=h=>{f(h.path),i(!1),t(""),c(0)};return s.jsxs("div",{ref:l,className:"relative flex-1 max-w-xl",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"}),s.jsx("input",{ref:u,type:"text",placeholder:"Search everything... (âŒ˜K)",value:e,onChange:h=>{t(h.target.value),i(!0)},onFocus:()=>i(!0),className:"w-full pl-10 pr-10 py-2 bg-surface-800 border border-surface-700 rounded-lg text-sm text-surface-100 placeholder-surface-500 focus:outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500"}),e&&s.jsx("button",{onClick:()=>{t(""),c(0)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-400 hover:text-surface-100",children:s.jsx(Te,{className:"w-5 h-5"})})]}),n&&e.length>=2&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-surface-900 border border-surface-800 rounded-lg shadow-xl max-h-96 overflow-y-auto z-50",children:k?s.jsx("div",{className:"p-4 text-center text-surface-400",children:s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-surface-700 border-t-brand-500 rounded-full mx-auto"})}):v.length===0?s.jsxs("div",{className:"p-4 text-center text-surface-400",children:['No results found for "',e,'"']}):s.jsx("div",{className:"py-2",children:v.map((h,b)=>{const x=bt[h.type],d=b===o;return s.jsxs("button",{onClick:()=>w(h),className:E("w-full px-4 py-3 flex items-center gap-3 text-left transition-colors",d?"bg-brand-500/20 text-surface-100":"text-surface-300 hover:bg-surface-800"),children:[s.jsx("div",{className:E("p-2 rounded-lg",d?"bg-brand-500/30":"bg-surface-800"),children:s.jsx(x,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium truncate",children:h.title}),s.jsx("span",{className:E("text-xs px-2 py-0.5 rounded",d?"bg-brand-500/30 text-brand-300":"bg-surface-800 text-surface-500"),children:vt[h.type]})]}),h.subtitle&&s.jsx("p",{className:"text-xs text-surface-500 truncate mt-0.5",children:h.subtitle})]})]},`${h.type}-${h.id}`)})})})]})}function yt({isOpen:e,onClose:t}){const n=ae(),i=as(),[o,c]=r.useState(""),l=r.useRef(null),{data:u}=pe({queryKey:["command-search",o],queryFn:async()=>{if(o.length<2)return{controls:[],policies:[],risks:[],vendors:[]};const[x,d,y,S]=await Promise.all([mt.list({search:o,limit:5}).then(N=>N.data?.data||[]).catch(()=>[]),ft.list({search:o,limit:5}).then(N=>N.data?.data||[]).catch(()=>[]),ns.list({search:o,limit:5}).then(N=>N.data?.risks||[]).catch(()=>[]),gt.list({search:o,limit:5}).then(N=>N.data?.data||[]).catch(()=>[])]);return{controls:x,policies:d,risks:y,vendors:S}},enabled:o.length>=2}),f=r.useMemo(()=>[{id:"nav-dashboard",name:"Go to Dashboard",icon:Je,action:()=>n("/"),category:"navigation",keywords:["home"]},{id:"nav-controls",name:"Go to Controls",icon:K,action:()=>n("/controls"),category:"navigation"},{id:"nav-risks",name:"Go to Risks",icon:P,action:()=>n("/risks"),category:"navigation"},{id:"nav-policies",name:"Go to Policies",icon:F,action:()=>n("/policies"),category:"navigation"},{id:"nav-evidence",name:"Go to Evidence",icon:bs,action:()=>n("/evidence"),category:"navigation"},{id:"nav-vendors",name:"Go to Vendors",icon:$,action:()=>n("/vendors"),category:"navigation",keywords:["tprm","third party"]},{id:"nav-frameworks",name:"Go to Frameworks",icon:D,action:()=>n("/frameworks"),category:"navigation",keywords:["compliance","soc2","iso"]},{id:"nav-audits",name:"Go to Audits",icon:vs,action:()=>n("/audits"),category:"navigation"},{id:"nav-calendar",name:"Go to Calendar",icon:Se,action:()=>n("/compliance-calendar"),category:"navigation",keywords:["schedule","events"]},{id:"nav-reports",name:"Go to Risk Reports",icon:D,action:()=>n("/risk-reports"),category:"navigation"},{id:"nav-training",name:"Go to Training",icon:Ie,action:()=>n("/tools/awareness"),category:"navigation",keywords:["security awareness"]},{id:"nav-users",name:"Go to Users",icon:Ne,action:()=>n("/users"),category:"navigation"},{id:"action-new-control",name:"Create New Control",icon:J,action:()=>n("/controls/new"),category:"actions",keywords:["add control"]},{id:"action-new-risk",name:"Create New Risk",icon:J,action:()=>n("/risks/new"),category:"actions",keywords:["add risk","register risk"]},{id:"action-upload-evidence",name:"Upload Evidence",icon:ks,action:()=>n("/evidence/new"),category:"actions",keywords:["add evidence"]},{id:"action-new-vendor",name:"Add New Vendor",icon:J,action:()=>n("/vendors/new"),category:"actions"},{id:"action-new-policy",name:"Create New Policy",icon:J,action:()=>n("/policies/new"),category:"actions"},{id:"settings-profile",name:"Profile Settings",icon:Ae,action:()=>n("/settings"),category:"settings"},{id:"settings-notifications",name:"Notification Settings",icon:ke,action:()=>n("/notification-settings"),category:"settings"},{id:"settings-permissions",name:"Permission Groups",icon:Ne,action:()=>n("/permission-groups"),category:"settings"}],[n]),v=r.useMemo(()=>{if(!u)return[];const x=[];return u.controls?.forEach(d=>{x.push({id:`control-${d.id}`,name:d.title,description:d.controlId,icon:K,action:()=>n(`/controls/${d.id}`),category:"search"})}),u.policies?.forEach(d=>{x.push({id:`policy-${d.id}`,name:d.title,description:d.status,icon:F,action:()=>n(`/policies/${d.id}`),category:"search"})}),u.risks?.forEach(d=>{x.push({id:`risk-${d.id}`,name:d.title,description:d.riskLevel,icon:P,action:()=>n(`/risks/${d.id}`),category:"search"})}),u.vendors?.forEach(d=>{x.push({id:`vendor-${d.id}`,name:d.name,description:d.tier?`Tier ${d.tier}`:void 0,icon:$,action:()=>n(`/vendors/${d.id}`),category:"search"})}),x},[u,n]),k=r.useMemo(()=>{const x=o.toLowerCase();if(o.length>=2){const d=f.filter(y=>y.name.toLowerCase().includes(x)||y.keywords?.some(S=>S.toLowerCase().includes(x)));return[...v,...d]}return o?f.filter(d=>d.name.toLowerCase().includes(x)||d.keywords?.some(y=>y.toLowerCase().includes(x))):f},[o,f,v]),w=r.useMemo(()=>{const x={};return k.forEach(d=>{x[d.category]||(x[d.category]=[]),x[d.category].push(d)}),x},[k]),h={search:"Search Results",navigation:"Navigation",actions:"Actions",settings:"Settings"},b=r.useCallback(x=>{x&&(x.action(),t(),c(""))},[t]);return r.useEffect(()=>{e&&setTimeout(()=>l.current?.focus(),100)},[e]),r.useEffect(()=>{e||c("")},[e]),s.jsx(A.Root,{show:e,as:r.Fragment,children:s.jsxs(M,{as:"div",className:"relative z-50",onClose:t,children:[s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto p-4 sm:p-6 md:p-20",children:s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsx(M.Panel,{className:"mx-auto max-w-2xl transform overflow-hidden rounded-xl bg-surface-800 border border-surface-700 shadow-2xl transition-all",children:s.jsxs(ie,{onChange:b,children:[s.jsxs("div",{className:"relative",children:[s.jsx(ye,{className:"pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-surface-400","aria-hidden":"true"}),s.jsx(ie.Input,{ref:l,className:"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-white placeholder:text-surface-500 focus:ring-0 text-base",placeholder:"Search or type a command...",onChange:x=>c(x.target.value),value:o}),s.jsxs("div",{className:"absolute right-4 top-3 text-xs text-surface-500 hidden sm:flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded text-surface-400",children:"Esc"}),s.jsx("span",{children:"to close"})]})]}),k.length>0&&s.jsx(ie.Options,{static:!0,className:"max-h-96 scroll-py-2 overflow-y-auto border-t border-surface-700",children:Object.entries(w).map(([x,d])=>s.jsxs("div",{children:[s.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-surface-500 uppercase tracking-wider bg-surface-900/50",children:h[x]||x}),d.map(y=>s.jsx(ie.Option,{value:y,className:({active:S})=>E("flex items-center gap-3 px-4 py-3 cursor-pointer",S?"bg-surface-700":""),children:({active:S})=>s.jsxs(s.Fragment,{children:[s.jsx(y.icon,{className:E("w-5 h-5 flex-shrink-0",S?"text-brand-400":"text-surface-400")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:E("text-sm font-medium truncate",S?"text-white":"text-surface-200"),children:y.name}),y.description&&s.jsx("p",{className:"text-xs text-surface-500 truncate",children:y.description})]}),y.shortcut&&s.jsx("kbd",{className:"px-2 py-1 text-xs bg-surface-700 rounded text-surface-400",children:y.shortcut})]})},y.id))]},x))}),o&&k.length===0&&s.jsxs("div",{className:"px-6 py-14 text-center border-t border-surface-700",children:[s.jsx(ye,{className:"mx-auto h-8 w-8 text-surface-500"}),s.jsxs("p",{className:"mt-4 text-sm text-surface-400",children:['No results found for "',o,'"']}),s.jsx("p",{className:"mt-2 text-xs text-surface-500",children:"Try searching for controls, policies, risks, or use a command"})]}),s.jsxs("div",{className:"flex items-center justify-between border-t border-surface-700 px-4 py-2 text-xs text-surface-500",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded",children:"â†‘"}),s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded",children:"â†“"}),"navigate"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded",children:"â†µ"}),"select"]})]}),s.jsx("span",{children:i.platformName})]})]})})})})]})})}function wt(){const[e,t]=r.useState(!1),n=r.useCallback(()=>t(!0),[]),i=r.useCallback(()=>t(!1),[]),o=r.useCallback(()=>t(c=>!c),[]);return r.useEffect(()=>{const c=l=>{(l.metaKey||l.ctrlKey)&&l.key==="k"&&(l.preventDefault(),o())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[o]),{isOpen:e,open:n,close:i,toggle:o}}function _t({isOpen:e,onClose:t}){const n=[{name:"Global",shortcuts:[{keys:["âŒ˜","K"],description:"Open command palette"},{keys:["âŒ˜","/"],description:"Show keyboard shortcuts"},{keys:["Esc"],description:"Close modal / Cancel"}]},{name:"Navigation",shortcuts:[{keys:["G","H"],description:"Go to Dashboard"},{keys:["G","C"],description:"Go to Controls"},{keys:["G","R"],description:"Go to Risks"},{keys:["G","P"],description:"Go to Policies"},{keys:["G","E"],description:"Go to Evidence"},{keys:["G","V"],description:"Go to Vendors"},{keys:["G","F"],description:"Go to Frameworks"},{keys:["G","S"],description:"Go to Settings"}]},{name:"Actions",shortcuts:[{keys:["N","C"],description:"New Control"},{keys:["N","R"],description:"New Risk"},{keys:["N","P"],description:"New Policy"},{keys:["N","E"],description:"Upload Evidence"},{keys:["N","V"],description:"New Vendor"}]},{name:"List Views",shortcuts:[{keys:["J"],description:"Next item"},{keys:["K"],description:"Previous item"},{keys:["Enter"],description:"Open selected item"},{keys:["X"],description:"Toggle selection"},{keys:["âŒ˜","A"],description:"Select all"},{keys:["âŒ˜","D"],description:"Deselect all"}]}];return s.jsx(A.Root,{show:e,as:r.Fragment,children:s.jsxs(M,{as:"div",className:"relative z-50",onClose:t,children:[s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(M.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-xl bg-surface-800 border border-surface-700 shadow-2xl transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-surface-700",children:[s.jsx(M.Title,{className:"text-lg font-semibold text-white",children:"Keyboard Shortcuts"}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-surface-700 text-surface-400 hover:text-white transition-colors",children:s.jsx(Te,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[70vh] overflow-y-auto",children:n.map(i=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-surface-300 uppercase tracking-wider mb-3",children:i.name}),s.jsx("div",{className:"space-y-2",children:i.shortcuts.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx("span",{className:"text-surface-300 text-sm",children:o.description}),s.jsx("div",{className:"flex items-center gap-1",children:o.keys.map((l,u)=>s.jsxs(r.Fragment,{children:[u>0&&s.jsx("span",{className:"text-surface-600 text-xs mx-0.5",children:"+"}),s.jsx("kbd",{className:"px-2 py-1 text-xs font-medium bg-surface-700 text-surface-300 rounded border border-surface-600",children:l})]},u))})]},c))})]},i.name))}),s.jsx("div",{className:"px-6 py-4 bg-surface-900/50 border-t border-surface-700",children:s.jsxs("p",{className:"text-xs text-surface-500 text-center",children:["Press ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded text-surface-400",children:"âŒ˜"})," + ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-surface-700 rounded text-surface-400",children:"/"})," to toggle this help"]})})]})})})})]})})}function Et(e){const t=ae(),[n,i]=r.useState(null);return r.useEffect(()=>{const o=c=>{const l=c.target;if(l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.isContentEditable)return;if((c.metaKey||c.ctrlKey)&&c.key==="/"){c.preventDefault(),e.onShowShortcuts?.();return}const u=c.key.toUpperCase();if(n){if(n==="G"){const f={H:"/",C:"/controls",R:"/risks",P:"/policies",E:"/evidence",V:"/vendors",F:"/frameworks",S:"/settings",A:"/audits",T:"/tools/awareness"};f[u]&&(c.preventDefault(),t(f[u]))}else if(n==="N"){const f={C:"/controls/new",R:"/risks/new",P:"/policies/new",E:"/evidence/new",V:"/vendors/new"};f[u]&&(c.preventDefault(),t(f[u]))}i(null);return}if(u==="G"||u==="N"){i(u),setTimeout(()=>i(null),1e3);return}};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t,n,e]),{pendingKey:n}}function is({className:e}){return s.jsxs("svg",{className:E("animate-spin",e),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}const os={primary:"btn-variant-primary",secondary:"btn-variant-secondary",success:"btn-variant-success",danger:"btn-variant-danger",warning:"btn-variant-warning",outline:"btn-variant-outline",ghost:"btn-variant-ghost",link:"btn-variant-link"},St={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",xl:"px-6 py-3 text-lg"},se={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},$e=r.forwardRef(({className:e,variant:t="primary",size:n="md",isLoading:i=!1,loadingText:o,leftIcon:c,rightIcon:l,fullWidth:u=!1,disabled:f,children:v,...k},w)=>{const h=f||i;return s.jsx("button",{ref:w,className:E("inline-flex items-center justify-center font-medium rounded-md transition-colors","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--bg-primary)]","disabled:cursor-not-allowed",os[t],St[n],u&&"w-full",e),disabled:h,...k,children:i?s.jsxs(s.Fragment,{children:[s.jsx(is,{className:E(se[n],"mr-2")}),o||v]}):s.jsxs(s.Fragment,{children:[c&&s.jsx("span",{className:E("mr-2",se[n]),children:c}),v,l&&s.jsx("span",{className:E("ml-2",se[n]),children:l})]})})});$e.displayName="Button";const Nt={xs:"p-1",sm:"p-1.5",md:"p-2",lg:"p-2.5",xl:"p-3"},Rt=r.forwardRef(({className:e,variant:t="ghost",size:n="md",isLoading:i=!1,icon:o,disabled:c,...l},u)=>{const f=c||i;return s.jsx("button",{ref:u,className:E("inline-flex items-center justify-center rounded-md transition-colors","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:cursor-not-allowed",os[t],Nt[n],e),disabled:f,...l,children:i?s.jsx(is,{className:se[n]}):s.jsx("span",{className:se[n],children:o})})});Rt.displayName="IconButton";const Ce="gigachad-grc-onboarding-completed",ce=[{id:"welcome",title:"Welcome to GigaChad GRC! ðŸŽ‰",description:"Your comprehensive Governance, Risk, and Compliance platform. Let's take a quick tour to help you get started.",icon:ys,tips:["Press âŒ˜K anytime to search or run commands","Press âŒ˜/ to see all keyboard shortcuts"]},{id:"controls",title:"Security Controls",description:"Manage your security controls, map them to compliance frameworks, and track implementation status across your organization.",icon:K,action:{label:"View Controls",path:"/controls"},tips:["Import controls from frameworks like SOC 2, ISO 27001","Link controls to policies and evidence"]},{id:"risks",title:"Risk Management",description:"Identify, assess, and track risks with our comprehensive risk register. Visualize risks with heat maps and manage treatment plans.",icon:P,action:{label:"View Risks",path:"/risks"},tips:["Use the Risk Heat Map for visual analysis","Create risk scenarios to model potential threats"]},{id:"policies",title:"Policy Management",description:"Create, version, and manage your security policies. Track reviews, approvals, and ensure employees acknowledge policy changes.",icon:F,action:{label:"View Policies",path:"/policies"},tips:["Set up automated review reminders","Track policy acknowledgments"]},{id:"vendors",title:"Third-Party Risk Management",description:"Assess and monitor your vendors and suppliers. Track contracts, security assessments, and manage vendor relationships.",icon:$,action:{label:"View Vendors",path:"/vendors"},tips:["Use questionnaires for vendor assessments","Set up contract expiration alerts"]},{id:"frameworks",title:"Compliance Frameworks",description:"Map your controls to compliance frameworks like SOC 2, ISO 27001, HIPAA, and more. Track your readiness score in real-time.",icon:D,action:{label:"View Frameworks",path:"/frameworks"},tips:["Dashboard shows framework readiness at a glance","Generate compliance reports for auditors"]},{id:"training",title:"Security Awareness Training",description:"Keep your team security-aware with interactive training modules. Track completion and compliance across your organization.",icon:Ie,action:{label:"Start Training",path:"/awareness-training"},tips:["Assign training modules to employees","Track completion rates on the dashboard"]},{id:"complete",title:"You're All Set! ðŸš€",description:"You're ready to start managing your GRC program. Remember, you can always access help from the command palette (âŒ˜K) or view keyboard shortcuts (âŒ˜/).",icon:ws,tips:["Start by mapping your controls to a framework","Set up your risk register","Configure notification preferences"]}];function $t({isOpen:e,onClose:t,onComplete:n}){const i=ae(),[o,c]=r.useState(0),l=ce[o],u=o===0,f=o===ce.length-1,v=(o+1)/ce.length*100,k=()=>{f?b():c(d=>d+1)},w=()=>{u||c(d=>d-1)},h=()=>{b()},b=()=>{localStorage.setItem(Ce,"true"),n(),t()},x=()=>{l.action&&i(l.action.path)};return r.useEffect(()=>{e&&c(0)},[e]),s.jsx(A.Root,{show:e,as:r.Fragment,children:s.jsxs(M,{as:"div",className:"relative z-50",onClose:()=>{},children:[s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(A.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(M.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-gradient-to-br from-surface-800 to-surface-900 border border-surface-700 shadow-2xl transition-all",children:[s.jsx("div",{className:"h-1 bg-surface-700",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-brand-500 to-brand-400 transition-all duration-300",style:{width:`${v}%`}})}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:h,className:"text-sm text-surface-500 hover:text-surface-300 transition-colors",children:"Skip tour"})}),s.jsxs("div",{className:"p-8 pt-12 text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-2xl bg-brand-500/20 flex items-center justify-center mb-6",children:s.jsx(l.icon,{className:"w-8 h-8 text-brand-400"})}),s.jsx(M.Title,{className:"text-2xl font-bold text-white mb-3",children:l.title}),s.jsx("p",{className:"text-surface-300 mb-6 leading-relaxed",children:l.description}),l.tips&&l.tips.length>0&&s.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 mb-6 text-left",children:[s.jsx("p",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider mb-3",children:"Pro Tips"}),s.jsx("ul",{className:"space-y-2",children:l.tips.map((d,y)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-surface-300",children:[s.jsx(_s,{className:"w-4 h-4 text-brand-400 flex-shrink-0 mt-0.5"}),d]},y))})]}),l.action&&s.jsxs($e,{onClick:x,variant:"secondary",className:"mb-6",children:[l.action.label,s.jsx(ze,{className:"w-4 h-4 ml-2"})]}),s.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:ce.map((d,y)=>s.jsx("button",{onClick:()=>c(y),className:E("w-2 h-2 rounded-full transition-all",y===o?"w-6 bg-brand-500":y<o?"bg-brand-500/50":"bg-surface-600")},y))})]}),s.jsxs("div",{className:"flex items-center justify-between px-8 py-4 border-t border-surface-700 bg-surface-800/50",children:[s.jsx("button",{onClick:w,disabled:u,className:E("px-4 py-2 text-sm font-medium rounded-lg transition-colors",u?"text-surface-600 cursor-not-allowed":"text-surface-300 hover:text-white hover:bg-surface-700"),children:"Previous"}),s.jsxs($e,{onClick:k,children:[f?"Get Started":"Next",!f&&s.jsx(ze,{className:"w-4 h-4 ml-2"})]})]})]})})})})]})})}function Ct(){const[e,t]=r.useState(!1),[n,i]=r.useState(()=>localStorage.getItem(Ce)==="true"),o=()=>t(!0),c=()=>t(!1),l=()=>{i(!0),t(!1)},u=()=>{localStorage.removeItem(Ce),i(!1)};return r.useEffect(()=>{if(!n){const f=setTimeout(()=>{t(!0)},1e3);return()=>clearTimeout(f)}},[n]),{showTour:e,hasCompleted:n,startTour:o,closeTour:c,completeTour:l,resetTour:u}}const cs=r.createContext(void 0),V="grc-current-workspace";function At({children:e}){const{user:t,isAuthenticated:n}=Q(),[i,o]=r.useState(!1),[c,l]=r.useState(!0),[u,f]=r.useState([]),[v,k]=r.useState(null),w=r.useRef(!1),h=r.useMemo(()=>t?.role==="admin",[t?.role]),b=r.useCallback(async()=>{if(!w.current){if(!n||!t?.organizationId){l(!1);return}w.current=!0,l(!0);try{const I=(await a.get("/api/workspaces/status").catch(C=>{if(C.response?.status===401)throw C;return console.warn("Failed to load workspace status, defaulting to disabled:",C),{data:{enabled:!1}}})).data?.enabled||!1;if(o(I),I){const O=(await a.get("/api/workspaces").catch(W=>{if(W.response?.status===401)throw W;return console.warn("Failed to load workspaces:",W),{data:[]}})).data||[];f(O);const Le=localStorage.getItem(V);if(Le){const W=O.find(us=>us.id===Le);W?k(W):O.length>0&&(k(O[0]),localStorage.setItem(V,O[0].id))}else O.length>0&&(k(O[0]),localStorage.setItem(V,O[0].id))}else f([]),k(null),localStorage.removeItem(V)}catch(_){_.response?.status!==401&&console.error("Failed to load workspace data:",_),o(!1),f([])}finally{l(!1),w.current=!1}}},[n,t?.organizationId]);r.useEffect(()=>{n&&t?.organizationId&&!w.current?b():n||(l(!1),o(!1),f([]),k(null),w.current=!1)},[n,t?.organizationId,b]);const x=r.useCallback(_=>{k(_),_?localStorage.setItem(V,_.id):localStorage.removeItem(V)},[]),d=r.useCallback(async()=>{if(i)try{const _=await a.get("/api/workspaces");f(_.data||[])}catch(_){_.response?.status!==401&&console.error("Failed to refresh workspaces:",_)}},[i]),y=r.useCallback(async _=>{const I=await a.post("/api/workspaces",_);return await d(),I.data},[d]),S=r.useCallback(async(_,I)=>{const C=await a.put(`/api/workspaces/${_}`,I);return await d(),v?.id===_&&k(C.data),C.data},[v?.id,d]),N=r.useCallback(async _=>{if(await a.delete(`/api/workspaces/${_}`),await d(),v?.id===_){const I=u.filter(C=>C.id!==_&&C.status==="active");x(I.length>0?I[0]:null)}},[v?.id,u,d,x]),q=r.useCallback(async()=>{await a.post("/api/workspaces/toggle",{enabled:!0}),await b()},[b]),re=r.useCallback(async()=>{await a.post("/api/workspaces/toggle",{enabled:!1}),o(!1),f([]),k(null),localStorage.removeItem(V)},[]),ne=r.useCallback(()=>{if(!(!i||!v))return v.id},[i,v]),ps=r.useMemo(()=>({isMultiWorkspaceEnabled:i,isLoading:c,workspaces:u,currentWorkspace:v,setCurrentWorkspace:x,refreshWorkspaces:d,createWorkspace:y,updateWorkspace:S,deleteWorkspace:N,enableMultiWorkspace:q,disableMultiWorkspace:re,getWorkspaceFilterParam:ne,canManageWorkspaces:h}),[i,c,u,v,x,d,y,S,N,q,re,ne,h]);return s.jsx(cs.Provider,{value:ps,children:e})}function ls(){const e=r.useContext(cs);if(e===void 0)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}function an(){const{getWorkspaceFilterParam:e}=ls();return e()}function Tt({isOpen:e,onClose:t,onCreate:n}){const[i,o]=r.useState(""),[c,l]=r.useState(""),[u,f]=r.useState(!1),v=async k=>{if(k.preventDefault(),!!i.trim()){f(!0);try{await n({name:i.trim(),description:c.trim()||void 0}),o(""),l(""),t()}catch(w){console.error("Failed to create workspace:",w)}finally{f(!1)}}};return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-surface-800 rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Create New Workspace"}),s.jsxs("form",{onSubmit:v,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Workspace Name *"}),s.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"e.g., Product A, Enterprise Edition",className:"w-full px-3 py-2 bg-surface-700 border border-surface-600 rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-brand-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:c,onChange:k=>l(k.target.value),placeholder:"Brief description of this workspace...",rows:2,className:"w-full px-3 py-2 bg-surface-700 border border-surface-600 rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-brand-500 resize-none"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm text-muted-foreground hover:text-foreground",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!i.trim()||u,className:"px-4 py-2 text-sm bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Creating...":"Create Workspace"})]})]})]})}):null}function It(){const{isMultiWorkspaceEnabled:e,workspaces:t,currentWorkspace:n,setCurrentWorkspace:i,createWorkspace:o,canManageWorkspaces:c}=ls(),{user:l}=Q(),u=ae(),[f,v]=r.useState(!1);if(!e)return null;const k=b=>{i(b)},w=async b=>{const x=await o(b);i(x)},h=t.filter(b=>b.status==="active");return s.jsxs(s.Fragment,{children:[s.jsxs(z,{as:"div",className:"relative",children:[s.jsxs(z.Button,{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-surface-800 hover:bg-surface-700 border border-surface-600 transition-colors text-sm text-foreground",children:[s.jsx($,{className:"w-4 h-4 text-surface-300"}),s.jsx("span",{className:"font-medium max-w-[160px] truncate",children:n?.name||"Select Workspace"}),s.jsx(Es,{className:"w-4 h-4 text-surface-300"})]}),s.jsx(A,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:s.jsxs(z.Items,{className:"absolute left-0 mt-2 w-64 rounded-lg bg-surface-800 border border-surface-700 shadow-lg z-50 py-1 focus:outline-none",children:[s.jsx("div",{className:"px-2 py-1",children:s.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider px-2 py-1",children:"Workspaces"})}),s.jsx("div",{className:"max-h-60 overflow-y-auto",children:h.map(b=>s.jsx(z.Item,{children:({active:x})=>s.jsxs("button",{onClick:()=>k(b),className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${x?"bg-surface-700":""} ${n?.id===b.id?"text-brand-400":"text-foreground"}`,children:[s.jsx($,{className:"w-4 h-4 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"truncate font-medium",children:b.name}),b.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:b.description})]}),n?.id===b.id&&s.jsx("span",{className:"text-xs bg-brand-600/20 text-brand-400 px-1.5 py-0.5 rounded",children:"Active"})]})},b.id))}),s.jsxs("div",{className:"border-t border-surface-700 mt-1 pt-1",children:[l?.role==="admin"&&s.jsx(z.Item,{children:({active:b})=>s.jsxs("button",{onClick:()=>u("/settings/workspaces"),className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${b?"bg-surface-700":""} text-muted-foreground hover:text-foreground`,children:[s.jsx(D,{className:"w-4 h-4"}),s.jsx("span",{children:"View All Workspaces"})]})}),n&&c&&s.jsx(z.Item,{children:({active:b})=>s.jsxs("button",{onClick:()=>u(`/settings/workspaces/${n.id}`),className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${b?"bg-surface-700":""} text-muted-foreground hover:text-foreground`,children:[s.jsx(Ae,{className:"w-4 h-4"}),s.jsx("span",{children:"Workspace Settings"})]})}),c&&s.jsx(z.Item,{children:({active:b})=>s.jsxs("button",{onClick:()=>v(!0),className:`w-full text-left px-4 py-2 text-sm flex items-center gap-2 ${b?"bg-surface-700":""} text-brand-400 hover:text-brand-300`,children:[s.jsx(J,{className:"w-4 h-4"}),s.jsx("span",{children:"Create New Workspace"})]})})]})]})})]}),s.jsx(Tt,{isOpen:f,onClose:()=>v(!1),onCreate:w})]})}const Dt=[{name:"Compliance",icon:K,items:[{name:"Controls",href:"/controls",icon:K},{name:"Frameworks",href:"/frameworks",icon:Ee},{name:"Framework Library",href:"/framework-library",icon:ge},{name:"Calendar",href:"/calendar",icon:Se}]},{name:"Data",icon:_e,items:[{name:"Evidence",href:"/evidence",icon:_e},{name:"Policies",href:"/policies",icon:F},{name:"Assets",href:"/assets",icon:Xe},{name:"Integrations",href:"/integrations",icon:we}]},{name:"Risk Management",icon:P,items:[{name:"Risk Dashboard",href:"/risk-dashboard",icon:Ss},{name:"Risk Register",href:"/risks",icon:Ns},{name:"My Queue",href:"/risk-queue",icon:Rs},{name:"Risk Heatmap",href:"/risk-heatmap",icon:D},{name:"Scenarios",href:"/risk-scenarios",icon:Ve},{name:"Reports",href:"/risk-reports",icon:$s}]},{name:"Third Party Risk",icon:$,items:[{name:"Vendors",href:"/vendors",icon:$},{name:"Assessments",href:"/assessments",icon:Cs},{name:"Contracts",href:"/contracts",icon:he}]},{name:"People",icon:le,items:[{name:"Employee Compliance",href:"/people",icon:le},{name:"Compliance Dashboard",href:"/people/dashboard",icon:D}]},{name:"Trust",icon:oe,items:[{name:"Questionnaires",href:"/questionnaires",icon:oe},{name:"Knowledge Base",href:"/knowledge-base",icon:ge},{name:"Answer Templates",href:"/answer-templates",icon:he},{name:"Trust Analytics",href:"/trust-analytics",icon:D},{name:"Trust Center",href:"/trust-center",icon:As},{name:"Trust Center Settings",href:"/trust-center/settings",icon:Re}]},{name:"Audit",icon:de,items:[{name:"Audits",href:"/audits",icon:de},{name:"Audit Requests",href:"/audit-requests",icon:F},{name:"Findings",href:"/audit-findings",icon:P},{name:"Templates",href:"/audit-templates",icon:he},{name:"Workpapers",href:"/audit-workpapers",icon:F},{name:"Test Procedures",href:"/test-procedures",icon:Ue},{name:"Analytics",href:"/audit-analytics",icon:D},{name:"Calendar",href:"/audit-calendar",icon:Se}]},{name:"BC/DR",icon:qe,items:[{name:"BC/DR Dashboard",href:"/bcdr",icon:D},{name:"Business Processes",href:"/bcdr/processes",icon:qe},{name:"BC/DR Plans",href:"/bcdr/plans",icon:F},{name:"DR Tests",href:"/bcdr/tests",icon:Ue},{name:"Runbooks",href:"/bcdr/runbooks",icon:ge},{name:"Communication Plans",href:"/bcdr/communication",icon:Ts}]},{name:"Tools",icon:Ds,items:[{name:"Awareness & Training",href:"/tools/awareness",icon:Ie},{name:"Scheduled Reports",href:"/scheduled-reports",icon:Is},{name:"Dashboard Templates",href:"/settings/dashboard-templates",icon:Ze},{name:"Audit Log",href:"/audit",icon:de}]},{name:"Configuration",icon:Os,items:[{name:"Risk Configuration",href:"/settings/risk",icon:P},{name:"TPRM Configuration",href:"/settings/tprm",icon:$},{name:"Trust Configuration",href:"/settings/trust",icon:oe},{name:"Employee Compliance Configuration",href:"/settings/employee-compliance",icon:Ne},{name:"Module Configuration",href:"/settings/modules",icon:Ee},{name:"Configuration as Code",href:"/settings/config-as-code",icon:Ps}]},{name:"Settings",icon:Re,items:[{name:"Organization",href:"/settings/organization",icon:$},{name:"Users",href:"/users",icon:le},{name:"Permissions",href:"/permissions",icon:Ls},{name:"Communications",href:"/settings/communications",icon:oe},{name:"API Keys",href:"/settings/api-keys",icon:we},{name:"AI Configuration",href:"/settings/ai",icon:Ve},{name:"MCP Servers",href:"/settings/mcp",icon:es},{name:"Workspaces",href:"/settings/workspaces",icon:$}]}];function Pt(e,t){return e===t||e.startsWith(t+"/")}function Ot(e,t){let n=null,i=0;for(const o of t)Pt(e,o.href)&&o.href.length>i&&(n=o.href,i=o.href.length);return n}function Lt({section:e}){const t=ue(),{isRouteEnabled:n}=me(),i=e.items.filter(f=>n(f.href)),o=Ot(t.pathname,i),[c,l]=r.useState(()=>o!==null),u=o!==null;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>l(!c),className:E("flex items-center justify-between w-full px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300",u?"text-brand-400":"text-surface-400 hover:bg-surface-800 hover:text-surface-100"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(e.icon,{className:"w-5 h-5"}),e.name]}),s.jsx(Us,{className:E("w-4 h-4 transition-transform duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]",c&&"rotate-90")})]}),s.jsx("div",{className:"ml-4 pl-4 border-l border-surface-800 overflow-hidden",style:{display:"grid",gridTemplateRows:c?"1fr":"0fr",transition:"grid-template-rows 300ms cubic-bezier(0.4, 0, 0.2, 1)"},children:s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{className:"space-y-1 py-1",style:{opacity:c?1:0,transform:c?"translateY(0)":"translateY(-8px)",transition:"opacity 300ms cubic-bezier(0.4, 0, 0.2, 1), transform 300ms cubic-bezier(0.4, 0, 0.2, 1)"},children:i.map((f,v)=>{const k=f.href===o;return s.jsxs(Z,{to:f.href,className:E("flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200",k?"bg-brand-600/20 text-brand-400 font-medium":"text-surface-400 hover:bg-surface-800 hover:text-surface-100"),style:{transitionDelay:c?`${v*30}ms`:"0ms"},children:[s.jsx(f.icon,{className:"w-4 h-4"}),f.name]},f.name)})})})})]})}function Ft(){const{user:e,logout:t}=Q(),n=ue(),i=as(),{isNavSectionEnabled:o}=me(),[c,l]=r.useState(!1),[u,f]=r.useState(!1),v=wt();Et({onShowShortcuts:()=>f(!0)});const k=Ct(),w=n.pathname==="/dashboard"||n.pathname==="/";return s.jsxs("div",{className:"min-h-screen bg-surface-950",children:[c&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>l(!1)}),s.jsx("aside",{className:E("fixed inset-y-0 left-0 z-50 w-64 bg-surface-900 border-r border-surface-800 transform transition-transform duration-200 ease-in-out lg:translate-x-0",c?"translate-x-0":"-translate-x-full"),children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-surface-800",children:[s.jsx("img",{src:i.logoUrl,alt:"Logo",className:"w-8 h-8 object-contain"}),s.jsx("span",{className:"text-lg font-semibold text-surface-100",children:i.platformName})]}),s.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-2 overflow-y-auto",children:[s.jsxs(Z,{to:"/dashboard",className:E("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",w?"bg-brand-600/20 text-brand-400":"text-surface-400 hover:bg-surface-800 hover:text-surface-100"),onClick:()=>l(!1),children:[s.jsx(Je,{className:"w-5 h-5"}),"Dashboard"]}),s.jsxs(Z,{to:"/dashboards",className:({isActive:h})=>E("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ml-2",h?"bg-brand-600/20 text-brand-400":"text-surface-400 hover:bg-surface-800 hover:text-surface-100"),onClick:()=>l(!1),children:[s.jsx(Ze,{className:"w-4 h-4"}),"Custom Dashboards"]}),s.jsx("div",{className:"h-px bg-surface-800 my-2"}),Dt.filter(h=>h.name==="Settings"||h.name==="Configuration"?e?.role==="admin"||e?.role==="super_admin":!!o(h.name)).map(h=>s.jsx(Lt,{section:h},h.name))]}),s.jsxs("div",{className:"p-4 border-t border-surface-800",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-surface-700 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-surface-300",children:e?.name?.charAt(0)?.toUpperCase()||"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-surface-100 truncate",children:e?.name}),s.jsx("p",{className:"text-xs text-surface-500 truncate capitalize",children:e?.role?.replace("_"," ")})]})]}),s.jsxs("button",{onClick:t,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:[s.jsx(Fs,{className:"w-5 h-5"}),"Sign out"]})]})]})}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsx("header",{className:"sticky top-0 z-[60] bg-surface-900/80 backdrop-blur-sm border-b border-surface-800",children:s.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 lg:px-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"lg:hidden p-2 -ml-2 text-surface-400 hover:text-surface-100",onClick:()=>l(!0),children:s.jsx(Ms,{className:"w-6 h-6"})}),s.jsx(jt,{}),s.jsx(It,{}),s.jsx("button",{onClick:()=>f(!0),className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",title:"Keyboard Shortcuts (âŒ˜/)",children:s.jsx(es,{className:"w-5 h-5"})}),s.jsx(Z,{to:"/help",className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",title:"Help Center",children:s.jsx(zs,{className:"w-5 h-5"})}),s.jsx(Z,{to:"/account",className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",title:"Account Settings",children:s.jsx(Re,{className:"w-5 h-5"})})]}),s.jsx(kt,{})]})}),s.jsx("main",{className:"p-4 lg:p-6",children:s.jsx(Vs,{})})]}),s.jsx(yt,{isOpen:v.isOpen,onClose:v.close}),s.jsx(_t,{isOpen:u,onClose:()=>f(!1)}),s.jsx($t,{isOpen:k.showTour,onClose:k.closeTour,onComplete:k.completeTour})]})}function Oe({fullScreen:e=!0,message:t="Loading..."}){return s.jsx("div",{className:`${e?"min-h-screen":"min-h-[200px]"} flex items-center justify-center bg-surface-950`,children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-12 h-12 border-4 border-surface-700 rounded-full animate-spin border-t-brand-500"})}),s.jsx("p",{className:"text-surface-400 text-sm",children:t})]})})}const Mt=r.lazy(()=>g(()=>import("./Dashboard-CIchhWrJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),zt=r.lazy(()=>g(()=>import("./Controls-DB0Igs8d.js"),__vite__mapDeps([8,1,2,9,10,5,11,12,13,14,7,6]))),Vt=r.lazy(()=>g(()=>import("./ControlNew-xhjkAZXJ.js"),__vite__mapDeps([15,1,2,7,6]))),Ut=r.lazy(()=>g(()=>import("./ControlDetail-3bn0V2TJ.js"),__vite__mapDeps([16,1,2,17,6,18,5,7]))),qt=r.lazy(()=>g(()=>import("./Evidence-C34Kwz01.js"),__vite__mapDeps([19,1,2,9,5,7,6]))),Wt=r.lazy(()=>g(()=>import("./EvidenceDetail-CKdGdEX4.js"),__vite__mapDeps([20,1,2,18,6,5,7]))),Gt=r.lazy(()=>g(()=>import("./Frameworks-DMLCikKc.js"),__vite__mapDeps([21,1,2,5,7,6]))),Bt=r.lazy(()=>g(()=>import("./FrameworkDetail-DZJJyt00.js"),__vite__mapDeps([22,1,2,17,5,7,6]))),Kt=r.lazy(()=>g(()=>import("./FrameworkLibrary-CEw7SdR-.js"),__vite__mapDeps([23,1,2,5,7,6]))),Qt=r.lazy(()=>g(()=>import("./Policies-frjjS6-O.js"),__vite__mapDeps([24,1,2,5,11,12,7,6]))),Ht=r.lazy(()=>g(()=>import("./PolicyDetail-D_axV5tE.js"),__vite__mapDeps([25,1,2,18,6,5,7]))),Yt=r.lazy(()=>g(()=>import("./Risks-B9HR2CBi.js"),__vite__mapDeps([26,1,2,27,28,9,10,29,5,11,12,7,6]))),Xt=r.lazy(()=>g(()=>import("./RiskDetail-BnpYs8PI.js"),__vite__mapDeps([30,1,2,18,6,7]))),Jt=r.lazy(()=>g(()=>import("./RiskHeatmap-Cork06Je.js"),__vite__mapDeps([31,1,2,7,6]))),Zt=r.lazy(()=>g(()=>import("./RiskDashboard-Dnh_Wv0F.js"),__vite__mapDeps([32,1,2,7,6]))),ea=r.lazy(()=>g(()=>import("./RiskQueue-C3CKZCPd.js"),__vite__mapDeps([33,1,2,7,6]))),sa=r.lazy(()=>g(()=>import("./RiskScenarios-SuqktDbI.js"),__vite__mapDeps([34,1,2,14,5,35,28,7,6]))),ta=r.lazy(()=>g(()=>import("./RiskReports-BpjBF6au.js"),__vite__mapDeps([36,1,2,12,3,7,6]))),aa=r.lazy(()=>g(()=>import("./RiskConfiguration-BNGGla0u.js"),__vite__mapDeps([37,1,2,7,6]))),ra=r.lazy(()=>g(()=>import("./TPRMConfiguration-BMl07zl-.js"),__vite__mapDeps([38,1,2,7,6]))),na=r.lazy(()=>g(()=>import("./TrustConfiguration-BpI4FVrg.js"),__vite__mapDeps([39,1,2,7,6]))),ia=r.lazy(()=>g(()=>import("./AnswerTemplates-xJm6psXA.js"),__vite__mapDeps([40,1,2,7,6]))),oa=r.lazy(()=>g(()=>import("./TrustAnalytics-B8oTOLG8.js"),__vite__mapDeps([41,1,2,4,7,6]))),ca=r.lazy(()=>g(()=>import("./AwarenessTraining-DAcve5g9.js"),__vite__mapDeps([42,1,2,7,6]))),la=r.lazy(()=>g(()=>import("./Assets-D9ptfmG5.js"),__vite__mapDeps([43,1,2,5,11,12,7,6]))),da=r.lazy(()=>g(()=>import("./AssetDetail-DxkHGhJB.js"),__vite__mapDeps([44,1,2,5,7,6]))),pa=r.lazy(()=>g(()=>import("./Integrations-DZpDAY31.js"),__vite__mapDeps([45,1,2,7,6]))),ua=r.lazy(()=>g(()=>import("./AuditLog-B2bdXuUd.js"),__vite__mapDeps([46,1,2,7,6]))),U=r.lazy(()=>g(()=>import("./Settings-Bffay6gd.js"),__vite__mapDeps([47,1,2,48,7,6]))),ma=r.lazy(()=>g(()=>import("./AccountSettings-AXc7oSAm.js"),__vite__mapDeps([49,1,2,7,6]))),fa=r.lazy(()=>g(()=>import("./NotificationSettings-Cg0cUmj4.js"),__vite__mapDeps([50,1,2,6,7]))),ga=r.lazy(()=>g(()=>import("./UserManagement-Ba61qj02.js"),__vite__mapDeps([51,1,2,7,6]))),ha=r.lazy(()=>g(()=>import("./PermissionGroups-M3PbDTkA.js"),__vite__mapDeps([52,1,2,5,35,7,6]))),xa=r.lazy(()=>g(()=>import("./Vendors-BnbHSfaE.js"),__vite__mapDeps([53,1,2,5,11,12,9,7,6]))),ja=r.lazy(()=>g(()=>import("./VendorDetail-Dglixze6.js"),__vite__mapDeps([54,1,2,5,14,7,6]))),ba=r.lazy(()=>g(()=>import("./Assessments-CQ_CbBY8.js"),__vite__mapDeps([55,1,2,5,7,6]))),va=r.lazy(()=>g(()=>import("./AssessmentDetail-fFBnoRIT.js"),__vite__mapDeps([56,1,2,7,6]))),ka=r.lazy(()=>g(()=>import("./Contracts-DtalzejJ.js"),__vite__mapDeps([57,1,2,5,35,7,6]))),ya=r.lazy(()=>g(()=>import("./ContractDetail-w1iZTcgQ.js"),__vite__mapDeps([58,1,2,7,6]))),wa=r.lazy(()=>g(()=>import("./Questionnaires-Cz5v2NBc.js"),__vite__mapDeps([59,1,2,5,35,7,6]))),_a=r.lazy(()=>g(()=>import("./QuestionnaireDetail-ChPvME9D.js"),__vite__mapDeps([60,1,2,5,7,6]))),Ea=r.lazy(()=>g(()=>import("./KnowledgeBase-yuz6B6u1.js"),__vite__mapDeps([61,1,2,5,35,7,6]))),Sa=r.lazy(()=>g(()=>import("./KnowledgeBaseDetail-D_bx2BIJ.js"),__vite__mapDeps([62,1,2,5,7,6]))),Na=r.lazy(()=>g(()=>import("./TrustCenter-C-YvscZS.js"),__vite__mapDeps([63,1,2,7,6]))),Ra=r.lazy(()=>g(()=>import("./TrustCenterSettings-BkqO2CXt.js"),__vite__mapDeps([64,1,2,7,6]))),$a=r.lazy(()=>g(()=>import("./Audits-DBgegHgq.js"),__vite__mapDeps([65,1,2,5,11,12,7,6]))),Ca=r.lazy(()=>g(()=>import("./AuditRequests-5aCI-Le3.js"),__vite__mapDeps([66,1,2,5,35,7,6]))),Aa=r.lazy(()=>g(()=>import("./AuditFindings-BZ6YYATg.js"),__vite__mapDeps([67,1,2,14,35,5,28,13,7,6]))),Ta=r.lazy(()=>g(()=>import("./AuditTemplates-CrnlKvMW.js"),__vite__mapDeps([68,1,2,28,7,6]))),Ia=r.lazy(()=>g(()=>import("./AuditWorkpapers-DzxncDNu.js"),__vite__mapDeps([69,1,2,28,7,6]))),Da=r.lazy(()=>g(()=>import("./AuditAnalytics-CAlbfFan.js"),__vite__mapDeps([70,1,2,4]))),Pa=r.lazy(()=>g(()=>import("./AuditCalendar-Dt6GPAUy.js"),__vite__mapDeps([71,1,2,28,7,6]))),Oa=r.lazy(()=>g(()=>import("./TestProcedures-05LVcAAz.js"),__vite__mapDeps([72,1,2,28,7,6]))),La=r.lazy(()=>g(()=>import("./ComplianceCalendarPage-DIxCKMjc.js"),__vite__mapDeps([73,1,2,7,6]))),Fa=r.lazy(()=>g(()=>import("./ScheduledReportsPage-GZ7iAD3P.js"),__vite__mapDeps([74,1,2,14,7,6]))),Ma=r.lazy(()=>g(()=>import("./HelpCenter-D1EatdPX.js"),__vite__mapDeps([75,1,2]))),za=r.lazy(()=>g(()=>import("./HelpArticle-cgtysumU.js"),__vite__mapDeps([76,1,2]))),Va=r.lazy(()=>g(()=>import("./DeveloperDocs-CdTmVgw8.js"),__vite__mapDeps([77,1,2]))),Ua=r.lazy(()=>g(()=>import("./Employees-BWdA6LB6.js"),__vite__mapDeps([78,1,2,7,6]))),qa=r.lazy(()=>g(()=>import("./EmployeeDetail-DzXOBvhA.js"),__vite__mapDeps([79,1,2,7,6]))),Wa=r.lazy(()=>g(()=>import("./EmployeeComplianceDashboard-D33GBVcu.js"),__vite__mapDeps([80,1,2,5,28,7,6]))),Ga=r.lazy(()=>g(()=>import("./CustomDashboards-3QOTuj33.js"),__vite__mapDeps([81,1,2,4,7,6]))),Ba=r.lazy(()=>g(()=>import("./MCPSettings-BgwgXSfM.js"),__vite__mapDeps([82,1,2,7,6]))),Ka=r.lazy(()=>g(()=>import("./WorkspaceList-TNe-1ZD_.js"),__vite__mapDeps([83,1,2,7,6]))),Qa=r.lazy(()=>g(()=>import("./WorkspaceSettings-BtStkDtD.js"),__vite__mapDeps([84,1,2,7,6]))),Ha=r.lazy(()=>g(()=>import("./Login-tHK6jHA-.js"),__vite__mapDeps([85,1,2,7,6]))),Ya=r.lazy(()=>g(()=>import("./AIRiskAssistant-CfDalTMo.js"),__vite__mapDeps([86,1,2,29,28,7,6]))),Xa=r.lazy(()=>g(()=>import("./ConfigAsCode-sj09XcPN.js"),__vite__mapDeps([87,1,2,48,7,6]))),Ja=r.lazy(()=>g(()=>import("./BCDRDashboard-BcvE2EmQ.js"),__vite__mapDeps([88,1,2,7,6]))),Za=r.lazy(()=>g(()=>import("./BusinessProcesses-v0VopyS_.js"),__vite__mapDeps([89,1,2,9,7,6]))),er=r.lazy(()=>g(()=>import("./BusinessProcessDetail-DUnWkpko.js"),__vite__mapDeps([90,1,2,5,7,6]))),sr=r.lazy(()=>g(()=>import("./BCDRPlans-ijvNWjNn.js"),__vite__mapDeps([91,1,2,9,7,6]))),tr=r.lazy(()=>g(()=>import("./BCDRPlanDetail-Dwy-dYfz.js"),__vite__mapDeps([92,1,2,5,7,6]))),ar=r.lazy(()=>g(()=>import("./DRTests-B6JhWhC2.js"),__vite__mapDeps([93,1,2,9,7,6]))),rr=r.lazy(()=>g(()=>import("./DRTestDetail-BqprFS12.js"),__vite__mapDeps([94,1,2,5,7,6]))),He=r.lazy(()=>g(()=>import("./Runbooks-BxfU839N.js"),__vite__mapDeps([95,1,2,9,7,6]))),Ye=r.lazy(()=>g(()=>import("./CommunicationPlans-f8O7h2gq.js"),__vite__mapDeps([96,1,2,9,7,6])));function nr({children:e}){const{isAuthenticated:t,isLoading:n}=Q(),i=ue(),o=new URLSearchParams(i.search),c=o.has("code")||o.has("error")||o.has("session_state"),l=i.pathname==="/login";return n||c?s.jsx(Oe,{}):!t&&!l?s.jsx(te,{to:"/login",replace:!0}):t?s.jsx(s.Fragment,{children:e}):null}const ir=r.lazy(()=>g(()=>import("./DisabledModulePage-CE1vhHrB.js"),__vite__mapDeps([48,1,2,7,6])));function j({children:e,module:t}){const{isModuleEnabled:n}=me();return n(t)?s.jsx(s.Fragment,{children:e}):s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ir,{moduleId:t})})}function or(){const{isAuthenticated:e,isLoading:t}=Q(),n=ue(),i=new URLSearchParams(n.search),o=i.has("code")||i.has("session_state"),c=n.pathname,l=c==="/login",u=c==="/dashboard";return t||o?s.jsx(Oe,{}):c!=="/"&&c!==""?null:e&&!u?s.jsx(te,{to:"/dashboard",replace:!0}):!e&&!l?s.jsx(te,{to:"/login",replace:!0}):null}function m(){return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-brand-500"})})}function cr(){return s.jsx(r.Suspense,{fallback:s.jsx(Oe,{}),children:s.jsxs(qs,{children:[s.jsx(p,{path:"/login",element:s.jsx(Ha,{})}),s.jsx(p,{path:"/",element:s.jsx(or,{})}),s.jsxs(p,{element:s.jsx(nr,{children:s.jsx(Ft,{})}),children:[s.jsx(p,{path:"dashboard",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Mt,{})})}),s.jsx(p,{path:"dashboards",element:s.jsx(j,{module:"tools",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ga,{})})})}),s.jsx(p,{path:"controls",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(zt,{})})})}),s.jsx(p,{path:"controls/new",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Vt,{})})})}),s.jsx(p,{path:"controls/:id",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ut,{})})})}),s.jsx(p,{path:"evidence",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(qt,{})})})}),s.jsx(p,{path:"evidence/:id",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Wt,{})})})}),s.jsx(p,{path:"frameworks",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Gt,{})})})}),s.jsx(p,{path:"frameworks/:id",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Bt,{})})})}),s.jsx(p,{path:"framework-library",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Kt,{})})})}),s.jsx(p,{path:"calendar",element:s.jsx(j,{module:"compliance",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(La,{})})})}),s.jsx(p,{path:"policies",element:s.jsx(j,{module:"data",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Qt,{})})})}),s.jsx(p,{path:"policies/:id",element:s.jsx(j,{module:"data",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ht,{})})})}),s.jsx(p,{path:"assets",element:s.jsx(j,{module:"data",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(la,{})})})}),s.jsx(p,{path:"assets/:id",element:s.jsx(j,{module:"data",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(da,{})})})}),s.jsx(p,{path:"integrations",element:s.jsx(j,{module:"data",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(pa,{})})})}),s.jsx(p,{path:"risks",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Yt,{})})})}),s.jsx(p,{path:"risks/:id",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Xt,{})})})}),s.jsx(p,{path:"risk-dashboard",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Zt,{})})})}),s.jsx(p,{path:"risk-queue",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ea,{})})})}),s.jsx(p,{path:"risk-heatmap",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Jt,{})})})}),s.jsx(p,{path:"risk-scenarios",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(sa,{})})})}),s.jsx(p,{path:"risk-reports",element:s.jsx(j,{module:"risk",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ta,{})})})}),s.jsx(p,{path:"vendors",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(xa,{})})})}),s.jsx(p,{path:"vendors/:id",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ja,{})})})}),s.jsx(p,{path:"assessments",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ba,{})})})}),s.jsx(p,{path:"assessments/:id",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(va,{})})})}),s.jsx(p,{path:"contracts",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ka,{})})})}),s.jsx(p,{path:"contracts/:id",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ya,{})})})}),s.jsx(p,{path:"questionnaires",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(wa,{})})})}),s.jsx(p,{path:"questionnaires/:id",element:s.jsx(j,{module:"tprm",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(_a,{})})})}),s.jsx(p,{path:"knowledge-base",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ea,{})})})}),s.jsx(p,{path:"knowledge-base/:id",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Sa,{})})})}),s.jsx(p,{path:"answer-templates",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ia,{})})})}),s.jsx(p,{path:"trust-analytics",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(oa,{})})})}),s.jsx(p,{path:"trust-center",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Na,{})})})}),s.jsx(p,{path:"trust-center/settings",element:s.jsx(j,{module:"trust",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ra,{})})})}),s.jsx(p,{path:"audits",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx($a,{})})})}),s.jsx(p,{path:"audit-requests",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ca,{})})})}),s.jsx(p,{path:"audit-findings",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Aa,{})})})}),s.jsx(p,{path:"audit-templates",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ta,{})})})}),s.jsx(p,{path:"audit-workpapers",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ia,{})})})}),s.jsx(p,{path:"audit-analytics",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Da,{})})})}),s.jsx(p,{path:"audit-calendar",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Pa,{})})})}),s.jsx(p,{path:"test-procedures",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Oa,{})})})}),s.jsx(p,{path:"audit",element:s.jsx(j,{module:"audit",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ua,{})})})}),s.jsx(p,{path:"scheduled-reports",element:s.jsx(j,{module:"tools",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Fa,{})})})}),s.jsx(p,{path:"tools/ai-risk-assistant",element:s.jsx(j,{module:"ai",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ya,{})})})}),s.jsx(p,{path:"settings",element:s.jsx(te,{to:"/settings/organization",replace:!0})}),s.jsx(p,{path:"settings/organization",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"organization"})})}),s.jsx(p,{path:"settings/communications",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"communications"})})}),s.jsx(p,{path:"settings/api-keys",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"api"})})}),s.jsx(p,{path:"settings/modules",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"modules"})})}),s.jsx(p,{path:"settings/notifications",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(fa,{})})}),s.jsx(p,{path:"settings/risk",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(aa,{})})}),s.jsx(p,{path:"settings/tprm",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ra,{})})}),s.jsx(p,{path:"settings/trust",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(na,{})})}),s.jsx(p,{path:"settings/dashboard-templates",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"dashboard-templates"})})}),s.jsx(p,{path:"settings/employee-compliance",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"employee-compliance"})})}),s.jsx(p,{path:"settings/ai",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(U,{section:"ai"})})}),s.jsx(p,{path:"settings/config-as-code",element:s.jsx(j,{module:"config-as-code",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Xa,{})})})}),s.jsx(p,{path:"settings/mcp",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ba,{})})}),s.jsx(p,{path:"settings/workspaces",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ka,{})})}),s.jsx(p,{path:"settings/workspaces/:id",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Qa,{})})}),s.jsx(p,{path:"account",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ma,{})})}),s.jsx(p,{path:"tools/awareness",element:s.jsx(j,{module:"people",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ca,{})})})}),s.jsx(p,{path:"users",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ga,{})})}),s.jsx(p,{path:"permissions",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ha,{})})}),s.jsx(p,{path:"help",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ma,{})})}),s.jsx(p,{path:"help/:category/:article",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(za,{})})}),s.jsx(p,{path:"docs",element:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Va,{})})}),s.jsx(p,{path:"people",element:s.jsx(j,{module:"people",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ua,{})})})}),s.jsx(p,{path:"people/dashboard",element:s.jsx(j,{module:"people",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Wa,{})})})}),s.jsx(p,{path:"people/:id",element:s.jsx(j,{module:"people",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(qa,{})})})}),s.jsx(p,{path:"bcdr",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ja,{})})})}),s.jsx(p,{path:"bcdr/processes",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Za,{})})})}),s.jsx(p,{path:"bcdr/processes/:id",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(er,{})})})}),s.jsx(p,{path:"bcdr/plans",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(sr,{})})})}),s.jsx(p,{path:"bcdr/plans/:id",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(tr,{})})})}),s.jsx(p,{path:"bcdr/tests",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(ar,{})})})}),s.jsx(p,{path:"bcdr/tests/:id",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(rr,{})})})}),s.jsx(p,{path:"bcdr/runbooks",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(He,{})})})}),s.jsx(p,{path:"bcdr/runbooks/:id",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(He,{})})})}),s.jsx(p,{path:"bcdr/communication",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ye,{})})})}),s.jsx(p,{path:"bcdr/communication/:id",element:s.jsx(j,{module:"bcdr",children:s.jsx(r.Suspense,{fallback:s.jsx(m,{}),children:s.jsx(Ye,{})})})})]}),s.jsx(p,{path:"*",element:s.jsx(te,{to:"/dashboard",replace:!0})})]})})}const ds=r.createContext(void 0);function lr({children:e}){const[t,n]=r.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"dark"),[i,o]=r.useState("dark");r.useEffect(()=>{const l=document.documentElement,u=f=>{f?(l.classList.add("dark"),l.classList.remove("light"),o("dark")):(l.classList.remove("dark"),l.classList.add("light"),o("light"))};if(t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)");u(f.matches);const v=k=>u(k.matches);return f.addEventListener("change",v),()=>f.removeEventListener("change",v)}else u(t==="dark")},[t]);const c=l=>{n(l),localStorage.setItem("theme",l)};return s.jsx(ds.Provider,{value:{theme:t,setTheme:c,resolvedTheme:i},children:e})}function rn(){const e=r.useContext(ds);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}class dr extends r.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.props.onError&&this.props.onError(t,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-red-600/20 border border-red-600/50 rounded-lg p-4",children:[s.jsx("h2",{className:"text-red-400 font-semibold mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-red-300 text-sm mb-4",children:this.state.error?.message||"An unexpected error occurred"}),s.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Reload Page"})]})}):this.props.children}}function pr({className:e}){const[t,n]=r.useState(navigator.onLine),[i,o]=r.useState(!1),[c,l]=r.useState(!1),u=r.useCallback(()=>{n(!0),c&&(o(!0),setTimeout(()=>o(!1),3e3))},[c]),f=r.useCallback(()=>{n(!1),l(!0),o(!1)},[]);return r.useEffect(()=>(window.addEventListener("online",u),window.addEventListener("offline",f),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",f)}),[u,f]),t&&!i?null:s.jsxs("div",{className:E("fixed top-0 left-0 right-0 z-50",e),children:[!t&&s.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 flex items-center justify-center gap-2 text-sm animate-fade-in",children:[s.jsx(P,{className:"w-5 h-5"}),s.jsxs("span",{children:[s.jsx("strong",{children:"You're offline."})," Some features may be unavailable until you reconnect."]})]}),i&&s.jsxs("div",{className:"bg-green-600 text-white px-4 py-2 flex items-center justify-center gap-2 text-sm animate-fade-in",children:[s.jsx(Ws,{className:"w-5 h-5"}),s.jsxs("span",{children:[s.jsx("strong",{children:"You're back online!"})," All features are now available."]})]})]})}function ur({warningThreshold:e=300*1e3,onExtendSession:t}){const{isAuthenticated:n,token:i}=Q(),[o,c]=r.useState(!1),[l,u]=r.useState(null),[f,v]=r.useState(!1),k=r.useCallback(x=>{try{const d=JSON.parse(atob(x.split(".")[1]));return d.exp?d.exp*1e3:null}catch{return null}},[]);r.useEffect(()=>{if(!n||!i||f){c(!1);return}const x=k(i);if(!x)return;const d=()=>{const S=Date.now(),N=x-S;N<=0?c(!1):N<=e?(c(!0),u(N)):(c(!1),u(null))};d();const y=setInterval(d,1e4);return()=>clearInterval(y)},[n,i,e,f,k]);const w=r.useCallback(()=>{t?.(),v(!0),c(!1)},[t]),h=r.useCallback(()=>{v(!0),c(!1)},[]),b=x=>{const d=Math.floor(x/6e4),y=Math.floor(x%6e4/1e3);return d>0?`${d} minute${d!==1?"s":""}`:`${y} second${y!==1?"s":""}`};return!o||!l?null:s.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-md animate-fade-in",children:s.jsx("div",{className:"bg-yellow-600 text-white rounded-lg shadow-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(P,{className:"w-6 h-6 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:"Session Expiring Soon"}),s.jsxs("p",{className:"text-sm text-yellow-100 mt-1",children:["Your session will expire in ",b(l),". Save your work to avoid losing any changes."]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[t&&s.jsx("button",{onClick:w,className:"px-3 py-1.5 bg-white text-yellow-700 rounded text-sm font-medium hover:bg-yellow-50 transition-colors",children:"Extend Session"}),s.jsx("button",{onClick:h,className:"px-3 py-1.5 bg-yellow-700 text-white rounded text-sm font-medium hover:bg-yellow-800 transition-colors",children:"Dismiss"})]})]}),s.jsx("button",{onClick:h,className:"text-yellow-200 hover:text-white transition-colors",children:s.jsx(Te,{className:"w-5 h-5"})})]})})})}function mr(e){"serviceWorker"in navigator&&window.addEventListener("load",()=>{fr("/sw.js",e)})}function fr(e,t){navigator.serviceWorker.register(e).then(n=>{setInterval(()=>{n.update()},3600*1e3),n.onupdatefound=()=>{const i=n.installing;i&&(i.onstatechange=()=>{i.state==="installed"&&(navigator.serviceWorker.controller?t?.onUpdate&&t.onUpdate(n):t?.onSuccess&&t.onSuccess(n))})}}).catch(n=>{console.error("Error during service worker registration:",n)}),(t?.onOffline||t?.onOnline)&&(window.addEventListener("online",()=>{t.onOnline?.()}),window.addEventListener("offline",()=>{t.onOffline?.()}))}function gr(){"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SKIP_WAITING"})}function hr(e,t){if(e>=3)return!1;const n=t;if(n.response?.status){const i=n.response.status;if(i>=400&&i<500&&i!==408&&i!==429)return!1;if([408,429,500,502,503,504].includes(i))return!0}return n.code==="ERR_NETWORK"||n.code==="ECONNABORTED"?!0:e<1}const xr=new Gs({defaultOptions:{queries:{staleTime:120*1e3,gcTime:600*1e3,retry:hr,retryDelay:e=>{const i=1e3*Math.pow(2,e),o=Math.min(i,3e4),c=o*.1*Math.random();return Math.floor(o+c)},refetchOnWindowFocus:!1,refetchOnReconnect:!0,structuralSharing:!0,networkMode:"online"},mutations:{retry:(e,t)=>{if(e>=1)return!1;const i=t.response?.status;return i!==void 0&&[502,503,504].includes(i)},networkMode:"online"}}});Bs.createRoot(document.getElementById("root")).render(s.jsx(Ks.StrictMode,{children:s.jsx(dr,{children:s.jsx(lr,{children:s.jsx(rt,{children:s.jsx(Qs,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(Hs,{client:xr,children:s.jsx(at,{children:s.jsx(ct,{children:s.jsxs(At,{children:[s.jsx(pr,{}),s.jsx(ur,{warningThreshold:300*1e3}),s.jsx(cr,{}),s.jsx(Ys,{position:"top-right",toastOptions:{className:"bg-surface-800 text-surface-100 border border-surface-700",duration:4e3}})]})})})})})})})})}));mr({onSuccess:()=>{},onUpdate:()=>{window.confirm("A new version of GigaChad GRC is available. Refresh to update?")&&(gr(),window.location.reload())}});export{Br as A,$e as B,Qr as C,Hr as D,Wr as E,Gr as F,Ur as G,sn as H,$r as I,L as J,wr as K,yr as L,it as M,Xr as N,Jr as O,rn as P,X as Q,Tr as R,zr as S,qr as T,Fr as U,Mr as V,tn as W,Or as X,dr as Y,Yr as a,Q as b,ls as c,a as d,mt as e,Nr as f,Dr as g,en as h,Er as i,Pr as j,_r as k,Sr as l,Rr as m,an as n,Ir as o,ft as p,Vr as q,Cr as r,Zr as s,Ar as t,as as u,gt as v,me as w,ns as x,Kr as y,Lr as z};
