import{aS as v,k as y,r as d,j as e,aO as w,aD as f,aQ as D,h as C,aE as S}from"./vendor-CWk44mA8.js";import{b as q,S as k}from"./index-CiJwl-Bo.js";import"./vendor-http-B9ygI19o.js";import"./vendor-date-CWdg4M78.js";function I({contract:s,onSave:n,onCancel:l}){const[t,r]=d.useState({vendorId:s?.vendorId||"",contractType:s?.contractType||"msa",title:s?.title||"",description:s?.description||"",contractValue:s?.contractValue,currency:s?.currency||"USD",startDate:s?.startDate?new Date(s.startDate).toISOString().split("T")[0]:"",endDate:s?.endDate?new Date(s.endDate).toISOString().split("T")[0]:"",renewalDate:s?.renewalDate?new Date(s.renewalDate).toISOString().split("T")[0]:"",autoRenew:s?.autoRenew??!1,status:s?.status||"active",requiresSoc2:s?.requiresSoc2??!1,requiresIso27001:s?.requiresIso27001??!1,requiresHipaa:s?.requiresHipaa??!1,requiresGdpr:s?.requiresGdpr??!1}),u=async a=>{a.preventDefault(),await n(t)};return e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Contract Title *"}),e.jsx("input",{type:"text",value:t.title,onChange:a=>r({...t,title:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Contract Type *"}),e.jsxs("select",{value:t.contractType,onChange:a=>r({...t,contractType:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0,children:[e.jsx("option",{value:"msa",children:"MSA"}),e.jsx("option",{value:"nda",children:"NDA"}),e.jsx("option",{value:"sow",children:"SOW"}),e.jsx("option",{value:"dpa",children:"DPA"}),e.jsx("option",{value:"sla",children:"SLA"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Status *"}),e.jsxs("select",{value:t.status,onChange:a=>r({...t,status:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"terminated",children:"Terminated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Vendor ID *"}),e.jsx("input",{type:"text",value:t.vendorId,onChange:a=>r({...t,vendorId:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description||"",onChange:a=>r({...t,description:a.target.value}),rows:3,className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Contract Value"}),e.jsx("input",{type:"number",value:t.contractValue||"",onChange:a=>r({...t,contractValue:parseFloat(a.target.value)||void 0}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Currency"}),e.jsxs("select",{value:t.currency,onChange:a=>r({...t,currency:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Important Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",value:t.startDate,onChange:a=>r({...t,startDate:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",value:t.endDate,onChange:a=>r({...t,endDate:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-surface-400 mb-1",children:"Renewal Date"}),e.jsx("input",{type:"date",value:t.renewalDate||"",onChange:a=>r({...t,renewalDate:a.target.value}),className:"w-full px-3 py-2 bg-surface-800 border border-surface-700 rounded-lg text-surface-100 focus:outline-none focus:border-brand-500"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.autoRenew,onChange:a=>r({...t,autoRenew:a.target.checked}),className:"w-4 h-4 bg-surface-800 border-surface-700 rounded text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-surface-300",children:"Auto-renew contract"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Compliance Requirements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.requiresSoc2,onChange:a=>r({...t,requiresSoc2:a.target.checked}),className:"w-4 h-4 bg-surface-800 border-surface-700 rounded text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-surface-300",children:"SOC 2 Required"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.requiresIso27001,onChange:a=>r({...t,requiresIso27001:a.target.checked}),className:"w-4 h-4 bg-surface-800 border-surface-700 rounded text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-surface-300",children:"ISO 27001 Required"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.requiresHipaa,onChange:a=>r({...t,requiresHipaa:a.target.checked}),className:"w-4 h-4 bg-surface-800 border-surface-700 rounded text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-surface-300",children:"HIPAA Required"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.requiresGdpr,onChange:a=>r({...t,requiresGdpr:a.target.checked}),className:"w-4 h-4 bg-surface-800 border-surface-700 rounded text-brand-600 focus:ring-brand-500"}),e.jsx("span",{className:"text-sm text-surface-300",children:"GDPR Required"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-surface-300 hover:text-surface-100 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Save Contract"})]})]})}function R({contract:s,onEdit:n,onDelete:l}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-surface-100",children:s.title}),e.jsx("p",{className:"mt-1 text-surface-400",children:s.vendor.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:n,className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx("button",{onClick:l,className:"p-2 text-red-400 hover:text-red-300 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(C,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Contract Type"}),e.jsx("dd",{className:"text-sm text-surface-100 uppercase",children:s.contractType})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Status"}),e.jsx("dd",{children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full capitalize ${s.status==="active"?"bg-green-500/20 text-green-400":s.status==="expired"?"bg-red-500/20 text-red-400":s.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-surface-700 text-surface-400"}`,children:s.status})})]}),s.description&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Description"}),e.jsx("dd",{className:"text-sm text-surface-100",children:s.description})]})]})]}),s.contractValue&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Financial Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Contract Value"}),e.jsxs("dd",{className:"text-sm text-surface-100",children:[s.currency," ",s.contractValue.toLocaleString()]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Important Dates"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Start Date"}),e.jsx("dd",{className:"text-sm text-surface-100",children:new Date(s.startDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"End Date"}),e.jsx("dd",{className:"text-sm text-surface-100",children:new Date(s.endDate).toLocaleDateString()})]}),s.renewalDate&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-surface-400 mb-1",children:"Renewal Date"}),e.jsx("dd",{className:"text-sm text-surface-100",children:new Date(s.renewalDate).toLocaleDateString()})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:"text-sm text-surface-400",children:["Auto-renew: ",e.jsx("span",{className:"text-surface-100",children:s.autoRenew?"Yes":"No"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Compliance Requirements"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.requiresSoc2&&e.jsx("span",{className:"px-3 py-1 bg-brand-600/20 text-brand-400 text-sm rounded-full",children:"SOC 2"}),s.requiresIso27001&&e.jsx("span",{className:"px-3 py-1 bg-brand-600/20 text-brand-400 text-sm rounded-full",children:"ISO 27001"}),s.requiresHipaa&&e.jsx("span",{className:"px-3 py-1 bg-brand-600/20 text-brand-400 text-sm rounded-full",children:"HIPAA"}),s.requiresGdpr&&e.jsx("span",{className:"px-3 py-1 bg-brand-600/20 text-brand-400 text-sm rounded-full",children:"GDPR"}),!s.requiresSoc2&&!s.requiresIso27001&&!s.requiresHipaa&&!s.requiresGdpr&&e.jsx("span",{className:"text-sm text-surface-500",children:"No compliance requirements specified"})]})]}),s.storagePath&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-surface-100 mb-4",children:"Contract Document"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-surface-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-surface-100",children:s.filename}),e.jsx("p",{className:"text-xs text-surface-500",children:s.size?`${(s.size/1024/1024).toFixed(2)} MB`:"Unknown size"})]}),e.jsx("button",{className:"px-3 py-1 text-sm text-brand-400 hover:text-brand-300 transition-colors",children:"Download"})]})]})]})})}function F(){const{id:s}=v(),n=y(),{user:l}=q(),[t,r]=d.useState(null),[u,a]=d.useState(!0),[h,p]=d.useState(!1),[b,o]=d.useState(!1);d.useEffect(()=>{s&&s!=="new"?j():(o(!0),a(!1))},[s]);const j=async()=>{try{const i=await(await fetch(`/api/contracts/${s}`)).json();r(i)}catch(c){console.error("Error fetching contract:",c)}finally{a(!1)}},g=async c=>{try{const i=s==="new"?"/api/contracts":`/api/contracts/${s}`,x=await fetch(i,{method:s==="new"?"POST":"PATCH",headers:{"Content-Type":"application/json","x-user-id":l?.id||"","x-organization-id":l?.organizationId||""},body:JSON.stringify(c)});if(x.ok){const m=await x.json();s==="new"?n(`/contracts/${m.id}`):(r(m),o(!1))}}catch(i){console.error("Error saving contract:",i)}},N=async()=>{if(confirm("Are you sure you want to delete this contract?"))try{await k.delete(s),n("/contracts")}catch(c){console.error("Error deleting contract:",c)}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-surface-400",children:"Loading contract..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>n("/contracts"),className:"p-2 text-surface-400 hover:text-surface-100 hover:bg-surface-800 rounded-lg transition-colors",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-surface-100",children:s==="new"?"New Contract":"Contract Details"}),t&&e.jsxs("p",{className:"mt-1 text-surface-400",children:[t.vendor.name," - ",t.contractType.toUpperCase()]})]})]}),b||s==="new"?e.jsx(I,{contract:t,onSave:g,onCancel:()=>{s==="new"?n("/contracts"):o(!1)}}):t?e.jsx(R,{contract:t,onEdit:()=>o(!0),onDelete:N}):null,h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface-900 border border-surface-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-100 mb-2",children:"Delete Contract"}),e.jsx("p",{className:"text-surface-400 mb-6",children:"Are you sure you want to delete this contract? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-surface-800 text-surface-100 rounded-lg hover:bg-surface-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{await fetch(`/api/contracts/${s}`,{method:"DELETE",headers:{"x-user-id":"system"}}),f.success("Contract deleted successfully"),n("/contracts")}catch(c){console.error("Error deleting contract:",c),f.error("Failed to delete contract")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}export{F as default};
