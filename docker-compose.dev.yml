# Development overrides for docker-compose.yml
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

version: '3.8'

services:
  # Development mode for services with hot reload
  controls:
    build:
      context: ./services/controls
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/controls/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  frameworks:
    build:
      context: ./services/frameworks
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/frameworks/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  policies:
    build:
      context: ./services/policies
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/policies/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  tprm:
    build:
      context: ./services/tprm
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/tprm/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  trust:
    build:
      context: ./services/trust
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/trust/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  audit:
    build:
      context: ./services/audit
      dockerfile: Dockerfile.dev
    volumes:
      - ./services/audit/src:/app/src
      - ./services/shared:/app/shared
      - /app/node_modules
    environment:
      NODE_ENV: development

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    volumes:
      - ./frontend/src:/app/src
      - /app/node_modules
    environment:
      NODE_ENV: development
