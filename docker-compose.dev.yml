# Development overrides for docker-compose.yml
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

version: '3.8'

services:
  # Development mode for services with hot reload
  controls:
    build:
      context: .
      dockerfile: services/controls/Dockerfile.dev
    volumes:
      - ./services/controls/src:/app/services/controls/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  frameworks:
    build:
      context: .
      dockerfile: services/frameworks/Dockerfile.dev
    volumes:
      - ./services/frameworks/src:/app/services/frameworks/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  policies:
    build:
      context: .
      dockerfile: services/policies/Dockerfile.dev
    volumes:
      - ./services/policies/src:/app/services/policies/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  tprm:
    build:
      context: .
      dockerfile: services/tprm/Dockerfile.dev
    volumes:
      - ./services/tprm/src:/app/services/tprm/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  trust:
    build:
      context: .
      dockerfile: services/trust/Dockerfile.dev
    volumes:
      - ./services/trust/src:/app/services/trust/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  audit:
    build:
      context: .
      dockerfile: services/audit/Dockerfile.dev
    volumes:
      - ./services/audit/src:/app/services/audit/src
      - ./services/shared:/app/services/shared
    environment:
      NODE_ENV: development

  frontend:
    build:
      context: .
      dockerfile: frontend/Dockerfile
    environment:
      NODE_ENV: development
      VITE_ENABLE_DEV_AUTH: "true"
